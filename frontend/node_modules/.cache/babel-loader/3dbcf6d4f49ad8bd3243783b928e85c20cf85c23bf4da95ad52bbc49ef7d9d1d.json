{"ast":null,"code":"export default {\n  name: 'DjiSpaceComponent',\n  props: {\n    componentName: {\n      type: String,\n      required: true\n    },\n    componentProps: {\n      type: Object,\n      default: () => ({})\n    },\n    config: {\n      type: Object,\n      required: true\n    }\n  },\n  data() {\n    return {\n      loading: false,\n      error: null,\n      loaded: false\n    };\n  },\n  mounted() {\n    this.initComponent();\n  },\n  beforeUnmount() {\n    // 清理组件\n    if (this.loaded && window.FH2 && this.$refs.container) {\n      this.$refs.container.innerHTML = '';\n    }\n  },\n  methods: {\n    async initComponent() {\n      this.loading = true;\n      this.error = null;\n      try {\n        // 检查FH2是否存在\n        if (!window.FH2) {\n          throw new Error('FH2未正确加载，请检查paas.js是否正确引入');\n        }\n\n        // 初始化配置\n        if (this.config) {\n          window.FH2.initConfig(this.config);\n        }\n\n        // 等待DOM更新\n        await this.$nextTick();\n\n        // 生成唯一的容器ID\n        const containerId = `dji-component-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n        this.$refs.container.id = containerId;\n\n        // 根据组件名称加载对应组件\n        switch (this.componentName) {\n          case 'project':\n            window.FH2.loadProject(containerId);\n            break;\n          case 'cockpit':\n            window.FH2.loadCockpit(containerId, this.componentProps);\n            break;\n          case 'wayline':\n            window.FH2.loadWayline(containerId, this.componentProps);\n            break;\n          case 'waylineCreation':\n            window.FH2.loadWaylineCreation(containerId);\n            break;\n          default:\n            throw new Error(`不支持的组件名称: ${this.componentName}`);\n        }\n        this.loaded = true;\n      } catch (err) {\n        this.error = err.message;\n        console.error('组件加载失败:', err);\n      } finally {\n        this.loading = false;\n      }\n    }\n  }\n};","map":{"version":3,"names":["name","props","componentName","type","String","required","componentProps","Object","default","config","data","loading","error","loaded","mounted","initComponent","beforeUnmount","window","FH2","$refs","container","innerHTML","methods","Error","initConfig","$nextTick","containerId","Date","now","Math","random","toString","substr","id","loadProject","loadCockpit","loadWayline","loadWaylineCreation","err","message","console"],"sources":["D:\\projects\\FlightHub-2-Frontend-Standalone-Component\\frontend\\src\\djispace-components\\DjiSpaceComponent.vue"],"sourcesContent":["<template>\n  <div ref=\"container\" class=\"dji-space-component-container\">\n    <div v-if=\"loading\" class=\"loading-placeholder\">\n      <p>组件加载中...</p>\n    </div>\n    <div v-if=\"error\" class=\"error-placeholder\">\n      <p>组件加载失败: {{ error }}</p>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'DjiSpaceComponent',\n  props: {\n    componentName: {\n      type: String,\n      required: true\n    },\n    componentProps: {\n      type: Object,\n      default: () => ({})\n    },\n    config: {\n      type: Object,\n      required: true\n    }\n  },\n  data() {\n    return {\n      loading: false,\n      error: null,\n      loaded: false\n    }\n  },\n  mounted() {\n    this.initComponent()\n  },\n  beforeUnmount() {\n    // 清理组件\n    if (this.loaded && window.FH2 && this.$refs.container) {\n      this.$refs.container.innerHTML = ''\n    }\n  },\n  methods: {\n    async initComponent() {\n      this.loading = true\n      this.error = null\n      \n      try {\n        // 检查FH2是否存在\n        if (!window.FH2) {\n          throw new Error('FH2未正确加载，请检查paas.js是否正确引入')\n        }\n        \n        // 初始化配置\n        if (this.config) {\n          window.FH2.initConfig(this.config)\n        }\n        \n        // 等待DOM更新\n        await this.$nextTick()\n        \n        // 生成唯一的容器ID\n        const containerId = `dji-component-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\n        this.$refs.container.id = containerId\n        \n        // 根据组件名称加载对应组件\n        switch (this.componentName) {\n          case 'project':\n            window.FH2.loadProject(containerId)\n            break\n          case 'cockpit':\n            window.FH2.loadCockpit(containerId, this.componentProps)\n            break\n          case 'wayline':\n            window.FH2.loadWayline(containerId, this.componentProps)\n            break\n          case 'waylineCreation':\n            window.FH2.loadWaylineCreation(containerId)\n            break\n          default:\n            throw new Error(`不支持的组件名称: ${this.componentName}`)\n        }\n        \n        this.loaded = true\n      } catch (err) {\n        this.error = err.message\n        console.error('组件加载失败:', err)\n      } finally {\n        this.loading = false\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.dji-space-component-container {\n  width: 100%;\n  height: 100%;\n  position: relative;\n}\n\n.loading-placeholder,\n.error-placeholder {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  width: 100%;\n}\n\n.loading-placeholder p,\n.error-placeholder p {\n  font-size: 16px;\n  color: #666;\n}\n</style>"],"mappings":"AAYA,eAAe;EACbA,IAAI,EAAE,mBAAmB;EACzBC,KAAK,EAAE;IACLC,aAAa,EAAE;MACbC,IAAI,EAAEC,MAAM;MACZC,QAAQ,EAAE;IACZ,CAAC;IACDC,cAAc,EAAE;MACdH,IAAI,EAAEI,MAAM;MACZC,OAAO,EAAEA,CAAA,MAAO,CAAC,CAAC;IACpB,CAAC;IACDC,MAAM,EAAE;MACNN,IAAI,EAAEI,MAAM;MACZF,QAAQ,EAAE;IACZ;EACF,CAAC;EACDK,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,OAAO,EAAE,KAAK;MACdC,KAAK,EAAE,IAAI;MACXC,MAAM,EAAE;IACV;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,aAAa,CAAC;EACrB,CAAC;EACDC,aAAaA,CAAA,EAAG;IACd;IACA,IAAI,IAAI,CAACH,MAAK,IAAKI,MAAM,CAACC,GAAE,IAAK,IAAI,CAACC,KAAK,CAACC,SAAS,EAAE;MACrD,IAAI,CAACD,KAAK,CAACC,SAAS,CAACC,SAAQ,GAAI,EAAC;IACpC;EACF,CAAC;EACDC,OAAO,EAAE;IACP,MAAMP,aAAaA,CAAA,EAAG;MACpB,IAAI,CAACJ,OAAM,GAAI,IAAG;MAClB,IAAI,CAACC,KAAI,GAAI,IAAG;MAEhB,IAAI;QACF;QACA,IAAI,CAACK,MAAM,CAACC,GAAG,EAAE;UACf,MAAM,IAAIK,KAAK,CAAC,2BAA2B;QAC7C;;QAEA;QACA,IAAI,IAAI,CAACd,MAAM,EAAE;UACfQ,MAAM,CAACC,GAAG,CAACM,UAAU,CAAC,IAAI,CAACf,MAAM;QACnC;;QAEA;QACA,MAAM,IAAI,CAACgB,SAAS,CAAC;;QAErB;QACA,MAAMC,WAAU,GAAI,iBAAiBC,IAAI,CAACC,GAAG,CAAC,CAAC,IAAIC,IAAI,CAACC,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC,CAACC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,EAAC;QAC3F,IAAI,CAACb,KAAK,CAACC,SAAS,CAACa,EAAC,GAAIP,WAAU;;QAEpC;QACA,QAAQ,IAAI,CAACxB,aAAa;UACxB,KAAK,SAAS;YACZe,MAAM,CAACC,GAAG,CAACgB,WAAW,CAACR,WAAW;YAClC;UACF,KAAK,SAAS;YACZT,MAAM,CAACC,GAAG,CAACiB,WAAW,CAACT,WAAW,EAAE,IAAI,CAACpB,cAAc;YACvD;UACF,KAAK,SAAS;YACZW,MAAM,CAACC,GAAG,CAACkB,WAAW,CAACV,WAAW,EAAE,IAAI,CAACpB,cAAc;YACvD;UACF,KAAK,iBAAiB;YACpBW,MAAM,CAACC,GAAG,CAACmB,mBAAmB,CAACX,WAAW;YAC1C;UACF;YACE,MAAM,IAAIH,KAAK,CAAC,aAAa,IAAI,CAACrB,aAAa,EAAE;QACrD;QAEA,IAAI,CAACW,MAAK,GAAI,IAAG;MACnB,EAAE,OAAOyB,GAAG,EAAE;QACZ,IAAI,CAAC1B,KAAI,GAAI0B,GAAG,CAACC,OAAM;QACvBC,OAAO,CAAC5B,KAAK,CAAC,SAAS,EAAE0B,GAAG;MAC9B,UAAU;QACR,IAAI,CAAC3B,OAAM,GAAI,KAAI;MACrB;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}