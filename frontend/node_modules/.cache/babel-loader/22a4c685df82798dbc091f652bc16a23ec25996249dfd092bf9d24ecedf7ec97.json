{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.find.js\";\nimport { mapState, mapActions } from 'vuex';\nimport DroneRouteList from '../components/DroneRouteList.vue';\nimport TaskProgressBar from '../components/TaskProgressBar.vue';\nimport AlarmPanel from '../components/AlarmPanel.vue';\nimport MonitorPanel from '../components/MonitorPanel.vue';\nimport ControlPanel from '../components/ControlPanel.vue';\nimport VisualizationPanel from '../components/VisualizationPanel.vue';\nexport default {\n  name: 'Dashboard',\n  components: {\n    DroneRouteList,\n    TaskProgressBar,\n    AlarmPanel,\n    MonitorPanel,\n    ControlPanel,\n    VisualizationPanel\n  },\n  computed: {\n    ...mapState(['droneRoutes', 'selectedRoute', 'taskProgress', 'currentTask', 'remainingTime', 'completedTasks', 'totalTasks', 'alarms', 'droneStatus', 'batteryLevel', 'currentAltitude', 'currentSpeed', 'targetAltitude', 'targetSpeed', 'videoStreamUrl', 'isStreaming'])\n  },\n  async mounted() {\n    // 初始化系统数据\n    await this.initializeSystem();\n\n    // 启动数据模拟更新\n    this.startDataSimulation();\n  },\n  methods: {\n    ...mapActions(['initializeSystem', 'selectRoute', 'processAlarm', 'controlDrone', 'updateTargetAltitude', 'updateTargetSpeed', 'emergencyStop', 'refreshStream']),\n    // 处理航线选择\n    handleRouteSelected(routeId) {\n      const route = this.droneRoutes.find(r => r.id === routeId);\n      this.selectRoute(route);\n    },\n    // 处理报警\n    handleAlarmProcessed(alarmId) {\n      this.processAlarm(alarmId);\n    },\n    // 处理控制动作\n    handleControlAction(action) {\n      this.controlDrone(action);\n    },\n    // 处理高度更新\n    handleUpdateAltitude(altitude) {\n      this.updateTargetAltitude(altitude);\n    },\n    // 处理速度更新\n    handleUpdateSpeed(speed) {\n      this.updateTargetSpeed(speed);\n    },\n    // 处理紧急停止\n    handleEmergencyStop() {\n      if (confirm('确定执行紧急停止？这将立即中断所有飞行操作。')) {\n        this.emergencyStop();\n      }\n    },\n    // 处理刷新视频流\n    handleRefreshStream() {\n      this.refreshStream();\n    },\n    // 处理视图模式变更\n    handleViewModeChanged(viewMode) {\n      console.log('视图模式变更为:', viewMode);\n    },\n    // 处理图层变更\n    handleLayersChanged(layers) {\n      console.log('图层设置变更:', layers);\n    },\n    // 启动数据模拟\n    startDataSimulation() {\n      // 模拟电池电量逐渐下降\n      setInterval(() => {\n        if (this.droneStatus === '飞行中' && this.batteryLevel > 0) {\n          this.$store.commit('SET_BATTERY_LEVEL', Math.max(0, this.batteryLevel - 0.5));\n        }\n      }, 10000);\n\n      // 模拟当前高度和目标高度逐渐接近\n      setInterval(() => {\n        if (this.droneStatus === '飞行中' && Math.abs(this.currentAltitude - this.targetAltitude) > 1) {\n          const newAltitude = this.currentAltitude + (this.targetAltitude > this.currentAltitude ? 1 : -1);\n          this.$store.commit('SET_CURRENT_ALTITUDE', newAltitude);\n        }\n        if (this.droneStatus === '飞行中' && Math.abs(this.currentSpeed - this.targetSpeed) > 0.5) {\n          const newSpeed = this.currentSpeed + (this.targetSpeed > this.currentSpeed ? 0.5 : -0.5);\n          this.$store.commit('SET_CURRENT_SPEED', newSpeed);\n        }\n      }, 2000);\n\n      // 模拟任务进度更新\n      setInterval(() => {\n        if (this.droneStatus === '飞行中' && this.taskProgress < 100) {\n          this.$store.commit('SET_TASK_PROGRESS', Math.min(100, this.taskProgress + 0.5));\n        }\n      }, 5000);\n    }\n  }\n};","map":{"version":3,"names":["mapState","mapActions","DroneRouteList","TaskProgressBar","AlarmPanel","MonitorPanel","ControlPanel","VisualizationPanel","name","components","computed","mounted","initializeSystem","startDataSimulation","methods","handleRouteSelected","routeId","route","droneRoutes","find","r","id","selectRoute","handleAlarmProcessed","alarmId","processAlarm","handleControlAction","action","controlDrone","handleUpdateAltitude","altitude","updateTargetAltitude","handleUpdateSpeed","speed","updateTargetSpeed","handleEmergencyStop","confirm","emergencyStop","handleRefreshStream","refreshStream","handleViewModeChanged","viewMode","console","log","handleLayersChanged","layers","setInterval","droneStatus","batteryLevel","$store","commit","Math","max","abs","currentAltitude","targetAltitude","newAltitude","currentSpeed","targetSpeed","newSpeed","taskProgress","min"],"sources":["D:\\projects\\FlightHub-2-Frontend-Standalone-Component\\frontend\\src\\views\\Dashboard.vue"],"sourcesContent":["<template>\n  <div class=\"p-4 h-screen overflow-hidden\">\n    <div class=\"grid-layout h-full\">\n      <!-- 左侧导航 -->\n      <div class=\"grid-sidebar overflow-hidden\">\n        <drone-route-list \n          :routes=\"droneRoutes\" \n          :selected-route-id=\"selectedRoute?.id\"\n          @route-selected=\"handleRouteSelected\"\n        />\n      </div>\n      \n      <!-- 顶部进度条 -->\n      <div class=\"grid-header\">\n        <task-progress-bar \n          :progress=\"taskProgress\" \n          :current-task=\"currentTask\" \n          :remaining-time=\"remainingTime\"\n          :completed-tasks=\"completedTasks\" \n          :total-tasks=\"totalTasks\"\n        />\n      </div>\n      \n      <!-- 主内容区 - 3D可视化 -->\n      <div class=\"grid-main\">\n        <visualization-panel \n          :selected-route=\"selectedRoute\"\n          :alarm-points=\"alarms\"\n          @view-mode-changed=\"handleViewModeChanged\"\n          @layers-changed=\"handleLayersChanged\"\n        />\n      </div>\n      \n      <!-- 右侧面板 -->\n      <div class=\"grid-right flex flex-col gap-4 overflow-hidden\">\n        <!-- 报警信息面板 -->\n        <alarm-panel \n          :alarms=\"alarms\" \n          @alarm-processed=\"handleAlarmProcessed\"\n          class=\"flex-grow\"\n        />\n        \n        <!-- 实时监控面板 -->\n        <monitor-panel \n          :video-stream-url=\"videoStreamUrl\"\n          :is-streaming=\"isStreaming\"\n          :drone-status=\"droneStatus\"\n          :battery-level=\"batteryLevel\"\n          :altitude=\"currentAltitude\"\n          :speed=\"currentSpeed\"\n          @refresh-stream=\"handleRefreshStream\"\n        />\n        \n        <!-- 控制面板 -->\n        <control-panel \n          :current-status=\"droneStatus\"\n          :target-altitude=\"targetAltitude\"\n          :target-speed=\"targetSpeed\"\n          @control-action=\"handleControlAction\"\n          @update-altitude=\"handleUpdateAltitude\"\n          @update-speed=\"handleUpdateSpeed\"\n          @emergency-stop=\"handleEmergencyStop\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapActions } from 'vuex'\nimport DroneRouteList from '../components/DroneRouteList.vue'\nimport TaskProgressBar from '../components/TaskProgressBar.vue'\nimport AlarmPanel from '../components/AlarmPanel.vue'\nimport MonitorPanel from '../components/MonitorPanel.vue'\nimport ControlPanel from '../components/ControlPanel.vue'\nimport VisualizationPanel from '../components/VisualizationPanel.vue'\n\nexport default {\n  name: 'Dashboard',\n  components: {\n    DroneRouteList,\n    TaskProgressBar,\n    AlarmPanel,\n    MonitorPanel,\n    ControlPanel,\n    VisualizationPanel\n  },\n  computed: {\n    ...mapState([\n      'droneRoutes',\n      'selectedRoute',\n      'taskProgress',\n      'currentTask',\n      'remainingTime',\n      'completedTasks',\n      'totalTasks',\n      'alarms',\n      'droneStatus',\n      'batteryLevel',\n      'currentAltitude',\n      'currentSpeed',\n      'targetAltitude',\n      'targetSpeed',\n      'videoStreamUrl',\n      'isStreaming'\n    ])\n  },\n  async mounted() {\n    // 初始化系统数据\n    await this.initializeSystem()\n    \n    // 启动数据模拟更新\n    this.startDataSimulation()\n  },\n  methods: {\n    ...mapActions([\n      'initializeSystem',\n      'selectRoute',\n      'processAlarm',\n      'controlDrone',\n      'updateTargetAltitude',\n      'updateTargetSpeed',\n      'emergencyStop',\n      'refreshStream'\n    ]),\n    \n    // 处理航线选择\n    handleRouteSelected(routeId) {\n      const route = this.droneRoutes.find(r => r.id === routeId)\n      this.selectRoute(route)\n    },\n    \n    // 处理报警\n    handleAlarmProcessed(alarmId) {\n      this.processAlarm(alarmId)\n    },\n    \n    // 处理控制动作\n    handleControlAction(action) {\n      this.controlDrone(action)\n    },\n    \n    // 处理高度更新\n    handleUpdateAltitude(altitude) {\n      this.updateTargetAltitude(altitude)\n    },\n    \n    // 处理速度更新\n    handleUpdateSpeed(speed) {\n      this.updateTargetSpeed(speed)\n    },\n    \n    // 处理紧急停止\n    handleEmergencyStop() {\n      if (confirm('确定执行紧急停止？这将立即中断所有飞行操作。')) {\n        this.emergencyStop()\n      }\n    },\n    \n    // 处理刷新视频流\n    handleRefreshStream() {\n      this.refreshStream()\n    },\n    \n    // 处理视图模式变更\n    handleViewModeChanged(viewMode) {\n      console.log('视图模式变更为:', viewMode)\n    },\n    \n    // 处理图层变更\n    handleLayersChanged(layers) {\n      console.log('图层设置变更:', layers)\n    },\n    \n    // 启动数据模拟\n    startDataSimulation() {\n      // 模拟电池电量逐渐下降\n      setInterval(() => {\n        if (this.droneStatus === '飞行中' && this.batteryLevel > 0) {\n          this.$store.commit('SET_BATTERY_LEVEL', Math.max(0, this.batteryLevel - 0.5))\n        }\n      }, 10000)\n      \n      // 模拟当前高度和目标高度逐渐接近\n      setInterval(() => {\n        if (this.droneStatus === '飞行中' && Math.abs(this.currentAltitude - this.targetAltitude) > 1) {\n          const newAltitude = this.currentAltitude + (this.targetAltitude > this.currentAltitude ? 1 : -1)\n          this.$store.commit('SET_CURRENT_ALTITUDE', newAltitude)\n        }\n        if (this.droneStatus === '飞行中' && Math.abs(this.currentSpeed - this.targetSpeed) > 0.5) {\n          const newSpeed = this.currentSpeed + (this.targetSpeed > this.currentSpeed ? 0.5 : -0.5)\n          this.$store.commit('SET_CURRENT_SPEED', newSpeed)\n        }\n      }, 2000)\n      \n      // 模拟任务进度更新\n      setInterval(() => {\n        if (this.droneStatus === '飞行中' && this.taskProgress < 100) {\n          this.$store.commit('SET_TASK_PROGRESS', Math.min(100, this.taskProgress + 0.5))\n        }\n      }, 5000)\n    }\n  }\n}\n</script>"],"mappings":";;AAqEA,SAASA,QAAQ,EAAEC,UAAS,QAAS,MAAK;AAC1C,OAAOC,cAAa,MAAO,kCAAiC;AAC5D,OAAOC,eAAc,MAAO,mCAAkC;AAC9D,OAAOC,UAAS,MAAO,8BAA6B;AACpD,OAAOC,YAAW,MAAO,gCAA+B;AACxD,OAAOC,YAAW,MAAO,gCAA+B;AACxD,OAAOC,kBAAiB,MAAO,sCAAqC;AAEpE,eAAe;EACbC,IAAI,EAAE,WAAW;EACjBC,UAAU,EAAE;IACVP,cAAc;IACdC,eAAe;IACfC,UAAU;IACVC,YAAY;IACZC,YAAY;IACZC;EACF,CAAC;EACDG,QAAQ,EAAE;IACR,GAAGV,QAAQ,CAAC,CACV,aAAa,EACb,eAAe,EACf,cAAc,EACd,aAAa,EACb,eAAe,EACf,gBAAgB,EAChB,YAAY,EACZ,QAAQ,EACR,aAAa,EACb,cAAc,EACd,iBAAiB,EACjB,cAAc,EACd,gBAAgB,EAChB,aAAa,EACb,gBAAgB,EAChB,aAAY,CACb;EACH,CAAC;EACD,MAAMW,OAAOA,CAAA,EAAG;IACd;IACA,MAAM,IAAI,CAACC,gBAAgB,CAAC;;IAE5B;IACA,IAAI,CAACC,mBAAmB,CAAC;EAC3B,CAAC;EACDC,OAAO,EAAE;IACP,GAAGb,UAAU,CAAC,CACZ,kBAAkB,EAClB,aAAa,EACb,cAAc,EACd,cAAc,EACd,sBAAsB,EACtB,mBAAmB,EACnB,eAAe,EACf,eAAc,CACf,CAAC;IAEF;IACAc,mBAAmBA,CAACC,OAAO,EAAE;MAC3B,MAAMC,KAAI,GAAI,IAAI,CAACC,WAAW,CAACC,IAAI,CAACC,CAAA,IAAKA,CAAC,CAACC,EAAC,KAAML,OAAO;MACzD,IAAI,CAACM,WAAW,CAACL,KAAK;IACxB,CAAC;IAED;IACAM,oBAAoBA,CAACC,OAAO,EAAE;MAC5B,IAAI,CAACC,YAAY,CAACD,OAAO;IAC3B,CAAC;IAED;IACAE,mBAAmBA,CAACC,MAAM,EAAE;MAC1B,IAAI,CAACC,YAAY,CAACD,MAAM;IAC1B,CAAC;IAED;IACAE,oBAAoBA,CAACC,QAAQ,EAAE;MAC7B,IAAI,CAACC,oBAAoB,CAACD,QAAQ;IACpC,CAAC;IAED;IACAE,iBAAiBA,CAACC,KAAK,EAAE;MACvB,IAAI,CAACC,iBAAiB,CAACD,KAAK;IAC9B,CAAC;IAED;IACAE,mBAAmBA,CAAA,EAAG;MACpB,IAAIC,OAAO,CAAC,wBAAwB,CAAC,EAAE;QACrC,IAAI,CAACC,aAAa,CAAC;MACrB;IACF,CAAC;IAED;IACAC,mBAAmBA,CAAA,EAAG;MACpB,IAAI,CAACC,aAAa,CAAC;IACrB,CAAC;IAED;IACAC,qBAAqBA,CAACC,QAAQ,EAAE;MAC9BC,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEF,QAAQ;IAClC,CAAC;IAED;IACAG,mBAAmBA,CAACC,MAAM,EAAE;MAC1BH,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEE,MAAM;IAC/B,CAAC;IAED;IACAhC,mBAAmBA,CAAA,EAAG;MACpB;MACAiC,WAAW,CAAC,MAAM;QAChB,IAAI,IAAI,CAACC,WAAU,KAAM,KAAI,IAAK,IAAI,CAACC,YAAW,GAAI,CAAC,EAAE;UACvD,IAAI,CAACC,MAAM,CAACC,MAAM,CAAC,mBAAmB,EAAEC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE,IAAI,CAACJ,YAAW,GAAI,GAAG,CAAC;QAC9E;MACF,CAAC,EAAE,KAAK;;MAER;MACAF,WAAW,CAAC,MAAM;QAChB,IAAI,IAAI,CAACC,WAAU,KAAM,KAAI,IAAKI,IAAI,CAACE,GAAG,CAAC,IAAI,CAACC,eAAc,GAAI,IAAI,CAACC,cAAc,IAAI,CAAC,EAAE;UAC1F,MAAMC,WAAU,GAAI,IAAI,CAACF,eAAc,IAAK,IAAI,CAACC,cAAa,GAAI,IAAI,CAACD,eAAc,GAAI,IAAI,CAAC,CAAC;UAC/F,IAAI,CAACL,MAAM,CAACC,MAAM,CAAC,sBAAsB,EAAEM,WAAW;QACxD;QACA,IAAI,IAAI,CAACT,WAAU,KAAM,KAAI,IAAKI,IAAI,CAACE,GAAG,CAAC,IAAI,CAACI,YAAW,GAAI,IAAI,CAACC,WAAW,IAAI,GAAG,EAAE;UACtF,MAAMC,QAAO,GAAI,IAAI,CAACF,YAAW,IAAK,IAAI,CAACC,WAAU,GAAI,IAAI,CAACD,YAAW,GAAI,GAAE,GAAI,CAAC,GAAG;UACvF,IAAI,CAACR,MAAM,CAACC,MAAM,CAAC,mBAAmB,EAAES,QAAQ;QAClD;MACF,CAAC,EAAE,IAAI;;MAEP;MACAb,WAAW,CAAC,MAAM;QAChB,IAAI,IAAI,CAACC,WAAU,KAAM,KAAI,IAAK,IAAI,CAACa,YAAW,GAAI,GAAG,EAAE;UACzD,IAAI,CAACX,MAAM,CAACC,MAAM,CAAC,mBAAmB,EAAEC,IAAI,CAACU,GAAG,CAAC,GAAG,EAAE,IAAI,CAACD,YAAW,GAAI,GAAG,CAAC;QAChF;MACF,CAAC,EAAE,IAAI;IACT;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}