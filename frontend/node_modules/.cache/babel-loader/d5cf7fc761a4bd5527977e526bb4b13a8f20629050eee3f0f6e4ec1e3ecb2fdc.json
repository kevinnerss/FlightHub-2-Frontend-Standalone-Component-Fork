{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"p-4 h-screen overflow-hidden\"\n};\nconst _hoisted_2 = {\n  class: \"grid-layout h-full\"\n};\nconst _hoisted_3 = {\n  class: \"grid-sidebar overflow-hidden\"\n};\nconst _hoisted_4 = {\n  class: \"grid-header\"\n};\nconst _hoisted_5 = {\n  class: \"grid-main\"\n};\nconst _hoisted_6 = {\n  class: \"grid-right flex flex-col gap-4 overflow-hidden\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_drone_route_list = _resolveComponent(\"drone-route-list\");\n  const _component_task_progress_bar = _resolveComponent(\"task-progress-bar\");\n  const _component_visualization_panel = _resolveComponent(\"visualization-panel\");\n  const _component_alarm_panel = _resolveComponent(\"alarm-panel\");\n  const _component_monitor_panel = _resolveComponent(\"monitor-panel\");\n  const _component_control_panel = _resolveComponent(\"control-panel\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" 左侧导航 \"), _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_drone_route_list, {\n    routes: _ctx.droneRoutes,\n    \"selected-route-id\": _ctx.selectedRoute?.id,\n    onRouteSelected: $options.handleRouteSelected\n  }, null, 8 /* PROPS */, [\"routes\", \"selected-route-id\", \"onRouteSelected\"])]), _createCommentVNode(\" 顶部进度条 \"), _createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_task_progress_bar, {\n    progress: _ctx.taskProgress,\n    \"current-task\": _ctx.currentTask,\n    \"remaining-time\": _ctx.remainingTime,\n    \"completed-tasks\": _ctx.completedTasks,\n    \"total-tasks\": _ctx.totalTasks\n  }, null, 8 /* PROPS */, [\"progress\", \"current-task\", \"remaining-time\", \"completed-tasks\", \"total-tasks\"])]), _createCommentVNode(\" 主内容区 - 3D可视化 \"), _createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_visualization_panel, {\n    \"selected-route\": _ctx.selectedRoute,\n    \"alarm-points\": _ctx.alarms,\n    onViewModeChanged: $options.handleViewModeChanged,\n    onLayersChanged: $options.handleLayersChanged\n  }, null, 8 /* PROPS */, [\"selected-route\", \"alarm-points\", \"onViewModeChanged\", \"onLayersChanged\"])]), _createCommentVNode(\" 右侧面板 \"), _createElementVNode(\"div\", _hoisted_6, [_createCommentVNode(\" 报警信息面板 \"), _createVNode(_component_alarm_panel, {\n    alarms: _ctx.alarms,\n    onAlarmProcessed: $options.handleAlarmProcessed,\n    class: \"flex-grow\"\n  }, null, 8 /* PROPS */, [\"alarms\", \"onAlarmProcessed\"]), _createCommentVNode(\" 实时监控面板 \"), _createVNode(_component_monitor_panel, {\n    \"video-stream-url\": _ctx.videoStreamUrl,\n    \"is-streaming\": _ctx.isStreaming,\n    \"drone-status\": _ctx.droneStatus,\n    \"battery-level\": _ctx.batteryLevel,\n    altitude: _ctx.currentAltitude,\n    speed: _ctx.currentSpeed,\n    onRefreshStream: $options.handleRefreshStream\n  }, null, 8 /* PROPS */, [\"video-stream-url\", \"is-streaming\", \"drone-status\", \"battery-level\", \"altitude\", \"speed\", \"onRefreshStream\"]), _createCommentVNode(\" 控制面板 \"), _createVNode(_component_control_panel, {\n    \"current-status\": _ctx.droneStatus,\n    \"target-altitude\": _ctx.targetAltitude,\n    \"target-speed\": _ctx.targetSpeed,\n    onControlAction: $options.handleControlAction,\n    onUpdateAltitude: $options.handleUpdateAltitude,\n    onUpdateSpeed: $options.handleUpdateSpeed,\n    onEmergencyStop: $options.handleEmergencyStop\n  }, null, 8 /* PROPS */, [\"current-status\", \"target-altitude\", \"target-speed\", \"onControlAction\", \"onUpdateAltitude\", \"onUpdateSpeed\", \"onEmergencyStop\"])])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createCommentVNode","_hoisted_3","_createVNode","_component_drone_route_list","routes","_ctx","droneRoutes","selectedRoute","id","onRouteSelected","$options","handleRouteSelected","_hoisted_4","_component_task_progress_bar","progress","taskProgress","currentTask","remainingTime","completedTasks","totalTasks","_hoisted_5","_component_visualization_panel","alarms","onViewModeChanged","handleViewModeChanged","onLayersChanged","handleLayersChanged","_hoisted_6","_component_alarm_panel","onAlarmProcessed","handleAlarmProcessed","_component_monitor_panel","videoStreamUrl","isStreaming","droneStatus","batteryLevel","altitude","currentAltitude","speed","currentSpeed","onRefreshStream","handleRefreshStream","_component_control_panel","targetAltitude","targetSpeed","onControlAction","handleControlAction","onUpdateAltitude","handleUpdateAltitude","onUpdateSpeed","handleUpdateSpeed","onEmergencyStop","handleEmergencyStop"],"sources":["D:\\projects\\FlightHub-2-Frontend-Standalone-Component\\frontend\\src\\views\\Dashboard.vue"],"sourcesContent":["<template>\n  <div class=\"p-4 h-screen overflow-hidden\">\n    <div class=\"grid-layout h-full\">\n      <!-- 左侧导航 -->\n      <div class=\"grid-sidebar overflow-hidden\">\n        <drone-route-list \n          :routes=\"droneRoutes\" \n          :selected-route-id=\"selectedRoute?.id\"\n          @route-selected=\"handleRouteSelected\"\n        />\n      </div>\n      \n      <!-- 顶部进度条 -->\n      <div class=\"grid-header\">\n        <task-progress-bar \n          :progress=\"taskProgress\" \n          :current-task=\"currentTask\" \n          :remaining-time=\"remainingTime\"\n          :completed-tasks=\"completedTasks\" \n          :total-tasks=\"totalTasks\"\n        />\n      </div>\n      \n      <!-- 主内容区 - 3D可视化 -->\n      <div class=\"grid-main\">\n        <visualization-panel \n          :selected-route=\"selectedRoute\"\n          :alarm-points=\"alarms\"\n          @view-mode-changed=\"handleViewModeChanged\"\n          @layers-changed=\"handleLayersChanged\"\n        />\n      </div>\n      \n      <!-- 右侧面板 -->\n      <div class=\"grid-right flex flex-col gap-4 overflow-hidden\">\n        <!-- 报警信息面板 -->\n        <alarm-panel \n          :alarms=\"alarms\" \n          @alarm-processed=\"handleAlarmProcessed\"\n          class=\"flex-grow\"\n        />\n        \n        <!-- 实时监控面板 -->\n        <monitor-panel \n          :video-stream-url=\"videoStreamUrl\"\n          :is-streaming=\"isStreaming\"\n          :drone-status=\"droneStatus\"\n          :battery-level=\"batteryLevel\"\n          :altitude=\"currentAltitude\"\n          :speed=\"currentSpeed\"\n          @refresh-stream=\"handleRefreshStream\"\n        />\n        \n        <!-- 控制面板 -->\n        <control-panel \n          :current-status=\"droneStatus\"\n          :target-altitude=\"targetAltitude\"\n          :target-speed=\"targetSpeed\"\n          @control-action=\"handleControlAction\"\n          @update-altitude=\"handleUpdateAltitude\"\n          @update-speed=\"handleUpdateSpeed\"\n          @emergency-stop=\"handleEmergencyStop\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapActions } from 'vuex'\nimport DroneRouteList from '../components/DroneRouteList.vue'\nimport TaskProgressBar from '../components/TaskProgressBar.vue'\nimport AlarmPanel from '../components/AlarmPanel.vue'\nimport MonitorPanel from '../components/MonitorPanel.vue'\nimport ControlPanel from '../components/ControlPanel.vue'\nimport VisualizationPanel from '../components/VisualizationPanel.vue'\n\nexport default {\n  name: 'Dashboard',\n  components: {\n    DroneRouteList,\n    TaskProgressBar,\n    AlarmPanel,\n    MonitorPanel,\n    ControlPanel,\n    VisualizationPanel\n  },\n  computed: {\n    ...mapState([\n      'droneRoutes',\n      'selectedRoute',\n      'taskProgress',\n      'currentTask',\n      'remainingTime',\n      'completedTasks',\n      'totalTasks',\n      'alarms',\n      'droneStatus',\n      'batteryLevel',\n      'currentAltitude',\n      'currentSpeed',\n      'targetAltitude',\n      'targetSpeed',\n      'videoStreamUrl',\n      'isStreaming'\n    ])\n  },\n  async mounted() {\n    // 初始化系统数据\n    await this.initializeSystem()\n    \n    // 启动数据模拟更新\n    this.startDataSimulation()\n  },\n  methods: {\n    ...mapActions([\n      'initializeSystem',\n      'selectRoute',\n      'processAlarm',\n      'controlDrone',\n      'updateTargetAltitude',\n      'updateTargetSpeed',\n      'emergencyStop',\n      'refreshStream'\n    ]),\n    \n    // 处理航线选择\n    handleRouteSelected(routeId) {\n      const route = this.droneRoutes.find(r => r.id === routeId)\n      this.selectRoute(route)\n    },\n    \n    // 处理报警\n    handleAlarmProcessed(alarmId) {\n      this.processAlarm(alarmId)\n    },\n    \n    // 处理控制动作\n    handleControlAction(action) {\n      this.controlDrone(action)\n    },\n    \n    // 处理高度更新\n    handleUpdateAltitude(altitude) {\n      this.updateTargetAltitude(altitude)\n    },\n    \n    // 处理速度更新\n    handleUpdateSpeed(speed) {\n      this.updateTargetSpeed(speed)\n    },\n    \n    // 处理紧急停止\n    handleEmergencyStop() {\n      if (confirm('确定执行紧急停止？这将立即中断所有飞行操作。')) {\n        this.emergencyStop()\n      }\n    },\n    \n    // 处理刷新视频流\n    handleRefreshStream() {\n      this.refreshStream()\n    },\n    \n    // 处理视图模式变更\n    handleViewModeChanged(viewMode) {\n      console.log('视图模式变更为:', viewMode)\n    },\n    \n    // 处理图层变更\n    handleLayersChanged(layers) {\n      console.log('图层设置变更:', layers)\n    },\n    \n    // 启动数据模拟\n    startDataSimulation() {\n      // 模拟电池电量逐渐下降\n      setInterval(() => {\n        if (this.droneStatus === '飞行中' && this.batteryLevel > 0) {\n          this.$store.commit('SET_BATTERY_LEVEL', Math.max(0, this.batteryLevel - 0.5))\n        }\n      }, 10000)\n      \n      // 模拟当前高度和目标高度逐渐接近\n      setInterval(() => {\n        if (this.droneStatus === '飞行中' && Math.abs(this.currentAltitude - this.targetAltitude) > 1) {\n          const newAltitude = this.currentAltitude + (this.targetAltitude > this.currentAltitude ? 1 : -1)\n          this.$store.commit('SET_CURRENT_ALTITUDE', newAltitude)\n        }\n        if (this.droneStatus === '飞行中' && Math.abs(this.currentSpeed - this.targetSpeed) > 0.5) {\n          const newSpeed = this.currentSpeed + (this.targetSpeed > this.currentSpeed ? 0.5 : -0.5)\n          this.$store.commit('SET_CURRENT_SPEED', newSpeed)\n        }\n      }, 2000)\n      \n      // 模拟任务进度更新\n      setInterval(() => {\n        if (this.droneStatus === '飞行中' && this.taskProgress < 100) {\n          this.$store.commit('SET_TASK_PROGRESS', Math.min(100, this.taskProgress + 0.5))\n        }\n      }, 5000)\n    }\n  }\n}\n</script>"],"mappings":";;EACOA,KAAK,EAAC;AAA8B;;EAClCA,KAAK,EAAC;AAAoB;;EAExBA,KAAK,EAAC;AAA8B;;EASpCA,KAAK,EAAC;AAAa;;EAWnBA,KAAK,EAAC;AAAW;;EAUjBA,KAAK,EAAC;AAAgD;;;;;;;;uBAjC/DC,mBAAA,CAgEM,OAhENC,UAgEM,GA/DJC,mBAAA,CA8DM,OA9DNC,UA8DM,GA7DJC,mBAAA,UAAa,EACbF,mBAAA,CAMM,OANNG,UAMM,GALJC,YAAA,CAIEC,2BAAA;IAHCC,MAAM,EAAEC,IAAA,CAAAC,WAAW;IACnB,mBAAiB,EAAED,IAAA,CAAAE,aAAa,EAAEC,EAAE;IACpCC,eAAc,EAAEC,QAAA,CAAAC;iFAIrBX,mBAAA,WAAc,EACdF,mBAAA,CAQM,OARNc,UAQM,GAPJV,YAAA,CAMEW,4BAAA;IALCC,QAAQ,EAAET,IAAA,CAAAU,YAAY;IACtB,cAAY,EAAEV,IAAA,CAAAW,WAAW;IACzB,gBAAc,EAAEX,IAAA,CAAAY,aAAa;IAC7B,iBAAe,EAAEZ,IAAA,CAAAa,cAAc;IAC/B,aAAW,EAAEb,IAAA,CAAAc;+GAIlBnB,mBAAA,kBAAqB,EACrBF,mBAAA,CAOM,OAPNsB,UAOM,GANJlB,YAAA,CAKEmB,8BAAA;IAJC,gBAAc,EAAEhB,IAAA,CAAAE,aAAa;IAC7B,cAAY,EAAEF,IAAA,CAAAiB,MAAM;IACpBC,iBAAiB,EAAEb,QAAA,CAAAc,qBAAqB;IACxCC,eAAc,EAAEf,QAAA,CAAAgB;yGAIrB1B,mBAAA,UAAa,EACbF,mBAAA,CA6BM,OA7BN6B,UA6BM,GA5BJ3B,mBAAA,YAAe,EACfE,YAAA,CAIE0B,sBAAA;IAHCN,MAAM,EAAEjB,IAAA,CAAAiB,MAAM;IACdO,gBAAe,EAAEnB,QAAA,CAAAoB,oBAAoB;IACtCnC,KAAK,EAAC;2DAGRK,mBAAA,YAAe,EACfE,YAAA,CAQE6B,wBAAA;IAPC,kBAAgB,EAAE1B,IAAA,CAAA2B,cAAc;IAChC,cAAY,EAAE3B,IAAA,CAAA4B,WAAW;IACzB,cAAY,EAAE5B,IAAA,CAAA6B,WAAW;IACzB,eAAa,EAAE7B,IAAA,CAAA8B,YAAY;IAC3BC,QAAQ,EAAE/B,IAAA,CAAAgC,eAAe;IACzBC,KAAK,EAAEjC,IAAA,CAAAkC,YAAY;IACnBC,eAAc,EAAE9B,QAAA,CAAA+B;0IAGnBzC,mBAAA,UAAa,EACbE,YAAA,CAQEwC,wBAAA;IAPC,gBAAc,EAAErC,IAAA,CAAA6B,WAAW;IAC3B,iBAAe,EAAE7B,IAAA,CAAAsC,cAAc;IAC/B,cAAY,EAAEtC,IAAA,CAAAuC,WAAW;IACzBC,eAAc,EAAEnC,QAAA,CAAAoC,mBAAmB;IACnCC,gBAAe,EAAErC,QAAA,CAAAsC,oBAAoB;IACrCC,aAAY,EAAEvC,QAAA,CAAAwC,iBAAiB;IAC/BC,eAAc,EAAEzC,QAAA,CAAA0C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}