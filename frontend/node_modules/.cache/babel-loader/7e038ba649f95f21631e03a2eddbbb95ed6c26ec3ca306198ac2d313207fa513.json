{"ast":null,"code":"import axios from 'axios';\n\n// 创建axios实例\nconst api = axios.create({\n  baseURL: '/api',\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// 请求拦截器\napi.interceptors.request.use(config => {\n  // 可以在这里添加token等认证信息\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// 响应拦截器\napi.interceptors.response.use(response => {\n  return response.data;\n}, error => {\n  console.error('API请求错误:', error);\n  return Promise.reject(error);\n});\n\n// 模拟数据 - 在实际项目中会被真实API替代\nconst mockData = {\n  routes: [{\n    id: 1,\n    name: '高压线路巡检',\n    status: 'completed',\n    length: 15.2,\n    duration: 45,\n    lastFlight: '2024-01-15 10:30:00',\n    checkpoints: 25\n  }, {\n    id: 2,\n    name: '变电站设备检查',\n    status: 'in_progress',\n    length: 3.8,\n    duration: 20,\n    lastFlight: '2024-01-15 14:15:00',\n    checkpoints: 12\n  }, {\n    id: 3,\n    name: '风电场巡检',\n    status: 'pending',\n    length: 22.5,\n    duration: 60,\n    lastFlight: '2024-01-14 16:45:00',\n    checkpoints: 36\n  }, {\n    id: 4,\n    name: '光伏电站检查',\n    status: 'pending',\n    length: 8.3,\n    duration: 30,\n    lastFlight: '2024-01-14 09:20:00',\n    checkpoints: 18\n  }, {\n    id: 5,\n    name: '输电线路走廊巡查',\n    status: 'completed',\n    length: 35.6,\n    duration: 90,\n    lastFlight: '2024-01-13 13:50:00',\n    checkpoints: 52\n  }],\n  taskData: {\n    progress: 65,\n    currentTask: {\n      name: '变电站设备检查',\n      id: 'T-20240115-001'\n    },\n    remainingTime: '12:45',\n    completedTasks: 8,\n    totalTasks: 12\n  },\n  alarms: [{\n    id: 1,\n    title: '电力线异常发热',\n    description: '在坐标(23.124, 113.235)处检测到电力线温度异常升高，可能存在线路老化或过载情况。',\n    timestamp: '2024-01-15T14:22:35',\n    location: '变电站A区域-东线路',\n    type: '温度异常',\n    severity: '高',\n    imageUrl: 'https://picsum.photos/800/600?random=1'\n  }, {\n    id: 2,\n    title: '绝缘子损伤',\n    description: '在铁塔#128处发现绝缘子表面有明显裂纹，需要进一步检查。',\n    timestamp: '2024-01-15T13:45:12',\n    location: '铁塔#128',\n    type: '设备损伤',\n    severity: '中',\n    imageUrl: 'https://picsum.photos/800/600?random=2'\n  }, {\n    id: 3,\n    title: '植被靠近',\n    description: '在110kV线路#45-#46段发现树木生长过盛，距离线路仅2.5米，存在安全隐患。',\n    timestamp: '2024-01-15T12:30:48',\n    location: '线路#45-#46',\n    type: '通道隐患',\n    severity: '低',\n    imageUrl: 'https://picsum.photos/800/600?random=3'\n  }],\n  droneStatus: {\n    status: '飞行中',\n    batteryLevel: 78,\n    altitude: 35,\n    speed: 8,\n    videoStreamUrl: 'https://picsum.photos/1280/720?random=10',\n    isStreaming: true\n  }\n};\n\n// API方法\nexport default {\n  // 获取航线列表\n  async getRoutes() {\n    try {\n      // 模拟API调用延迟\n      await new Promise(resolve => setTimeout(resolve, 500));\n      // 在实际项目中使用：return api.get('/routes')\n      return mockData.routes;\n    } catch (error) {\n      console.error('获取航线列表失败:', error);\n      return mockData.routes; // 出错时返回模拟数据\n    }\n  },\n  // 获取任务数据\n  async getTaskData() {\n    try {\n      await new Promise(resolve => setTimeout(resolve, 300));\n      // 在实际项目中使用：return api.get('/tasks/current')\n      return mockData.taskData;\n    } catch (error) {\n      console.error('获取任务数据失败:', error);\n      return mockData.taskData;\n    }\n  },\n  // 获取报警列表\n  async getAlarms() {\n    try {\n      await new Promise(resolve => setTimeout(resolve, 400));\n      // 在实际项目中使用：return api.get('/alarms')\n      return mockData.alarms;\n    } catch (error) {\n      console.error('获取报警列表失败:', error);\n      return mockData.alarms;\n    }\n  },\n  // 获取无人机状态\n  async getDroneStatus() {\n    try {\n      await new Promise(resolve => setTimeout(resolve, 200));\n      // 在实际项目中使用：return api.get('/drone/status')\n      return mockData.droneStatus;\n    } catch (error) {\n      console.error('获取无人机状态失败:', error);\n      return mockData.droneStatus;\n    }\n  },\n  // 处理报警\n  async processAlarm(alarmId) {\n    try {\n      // 在实际项目中使用：return api.put(`/alarms/${alarmId}/process`)\n      console.log(`处理报警 ${alarmId}`);\n      return {\n        success: true\n      };\n    } catch (error) {\n      console.error('处理报警失败:', error);\n      throw error;\n    }\n  },\n  // 控制无人机\n  async controlDrone(action) {\n    try {\n      // 在实际项目中使用：return api.post('/drone/control', { action })\n      console.log(`控制无人机: ${action}`);\n      return {\n        success: true\n      };\n    } catch (error) {\n      console.error('控制无人机失败:', error);\n      throw error;\n    }\n  },\n  // 更新高度\n  async updateAltitude(altitude) {\n    try {\n      // 在实际项目中使用：return api.put('/drone/altitude', { altitude })\n      console.log(`更新高度: ${altitude}m`);\n      return {\n        success: true\n      };\n    } catch (error) {\n      console.error('更新高度失败:', error);\n      throw error;\n    }\n  },\n  // 更新速度\n  async updateSpeed(speed) {\n    try {\n      // 在实际项目中使用：return api.put('/drone/speed', { speed })\n      console.log(`更新速度: ${speed}m/s`);\n      return {\n        success: true\n      };\n    } catch (error) {\n      console.error('更新速度失败:', error);\n      throw error;\n    }\n  },\n  // 紧急停止\n  async emergencyStop() {\n    try {\n      // 在实际项目中使用：return api.post('/drone/emergency-stop')\n      console.log('执行紧急停止');\n      return {\n        success: true\n      };\n    } catch (error) {\n      console.error('紧急停止失败:', error);\n      throw error;\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}