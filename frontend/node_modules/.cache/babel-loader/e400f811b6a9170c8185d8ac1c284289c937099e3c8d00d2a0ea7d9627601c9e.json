{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport { defineComponent, inject, computed, openBlock, createElementBlock, unref, normalizeClass, createCommentVNode, createBlock, withModifiers, withCtx, createElementVNode, createVNode, Fragment } from 'vue';\nimport { ElCheckbox } from '../../checkbox/index.mjs';\nimport { ElRadio } from '../../radio/index.mjs';\nimport { ElIcon } from '../../icon/index.mjs';\nimport { Check, Loading, ArrowRight } from '@element-plus/icons-vue';\nimport NodeContent from './node-content.mjs';\nimport { CASCADER_PANEL_INJECTION_KEY } from './types.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nconst __default__ = defineComponent({\n  name: \"ElCascaderNode\"\n});\nconst _sfc_main = /* @__PURE__ */defineComponent({\n  ...__default__,\n  props: {\n    node: {\n      type: Object,\n      required: true\n    },\n    menuId: String\n  },\n  emits: [\"expand\"],\n  setup(__props, {\n    emit\n  }) {\n    const props = __props;\n    const panel = inject(CASCADER_PANEL_INJECTION_KEY);\n    const ns = useNamespace(\"cascader-node\");\n    const isHoverMenu = computed(() => panel.isHoverMenu);\n    const multiple = computed(() => panel.config.multiple);\n    const checkStrictly = computed(() => panel.config.checkStrictly);\n    const showPrefix = computed(() => panel.config.showPrefix);\n    const checkedNodeId = computed(() => {\n      var _a;\n      return (_a = panel.checkedNodes[0]) == null ? void 0 : _a.uid;\n    });\n    const isDisabled = computed(() => props.node.isDisabled);\n    const isLeaf = computed(() => props.node.isLeaf);\n    const expandable = computed(() => checkStrictly.value && !isLeaf.value || !isDisabled.value);\n    const inExpandingPath = computed(() => isInPath(panel.expandingNode));\n    const inCheckedPath = computed(() => checkStrictly.value && panel.checkedNodes.some(isInPath));\n    const isInPath = node => {\n      var _a;\n      const {\n        level,\n        uid\n      } = props.node;\n      return ((_a = node == null ? void 0 : node.pathNodes[level - 1]) == null ? void 0 : _a.uid) === uid;\n    };\n    const doExpand = () => {\n      if (inExpandingPath.value) return;\n      panel.expandNode(props.node);\n    };\n    const doCheck = checked => {\n      const {\n        node\n      } = props;\n      if (checked === node.checked) return;\n      panel.handleCheckChange(node, checked);\n    };\n    const doLoad = () => {\n      panel.lazyLoad(props.node, () => {\n        if (!isLeaf.value) doExpand();\n      });\n    };\n    const handleHoverExpand = e => {\n      if (!isHoverMenu.value) return;\n      handleExpand();\n      !isLeaf.value && emit(\"expand\", e);\n    };\n    const handleExpand = () => {\n      const {\n        node\n      } = props;\n      if (!expandable.value || node.loading) return;\n      node.loaded ? doExpand() : doLoad();\n    };\n    const handleClick = () => {\n      if (isLeaf.value && !isDisabled.value && !checkStrictly.value && !multiple.value) {\n        handleCheck(true);\n      } else if ((panel.config.checkOnClickNode && (multiple.value || checkStrictly.value) || isLeaf.value && panel.config.checkOnClickLeaf) && !isDisabled.value) {\n        handleSelectCheck(!props.node.checked);\n      } else if (!isHoverMenu.value) {\n        handleExpand();\n      }\n    };\n    const handleSelectCheck = checked => {\n      if (checkStrictly.value) {\n        doCheck(checked);\n        if (props.node.loaded) {\n          doExpand();\n        }\n      } else {\n        handleCheck(checked);\n      }\n    };\n    const handleCheck = checked => {\n      if (!props.node.loaded) {\n        doLoad();\n      } else {\n        doCheck(checked);\n        !checkStrictly.value && doExpand();\n      }\n    };\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"li\", {\n        id: `${__props.menuId}-${__props.node.uid}`,\n        role: \"menuitem\",\n        \"aria-haspopup\": !unref(isLeaf),\n        \"aria-owns\": unref(isLeaf) ? void 0 : __props.menuId,\n        \"aria-expanded\": unref(inExpandingPath),\n        tabindex: unref(expandable) ? -1 : void 0,\n        class: normalizeClass([unref(ns).b(), unref(ns).is(\"selectable\", unref(checkStrictly)), unref(ns).is(\"active\", __props.node.checked), unref(ns).is(\"disabled\", !unref(expandable)), unref(inExpandingPath) && \"in-active-path\", unref(inCheckedPath) && \"in-checked-path\"]),\n        onMouseenter: handleHoverExpand,\n        onFocus: handleHoverExpand,\n        onClick: handleClick\n      }, [createCommentVNode(\" prefix \"), unref(multiple) && unref(showPrefix) ? (openBlock(), createBlock(unref(ElCheckbox), {\n        key: 0,\n        \"model-value\": __props.node.checked,\n        indeterminate: __props.node.indeterminate,\n        disabled: unref(isDisabled),\n        onClick: withModifiers(() => {}, [\"stop\"]),\n        \"onUpdate:modelValue\": handleSelectCheck\n      }, null, 8, [\"model-value\", \"indeterminate\", \"disabled\", \"onClick\"])) : unref(checkStrictly) && unref(showPrefix) ? (openBlock(), createBlock(unref(ElRadio), {\n        key: 1,\n        \"model-value\": unref(checkedNodeId),\n        label: __props.node.uid,\n        disabled: unref(isDisabled),\n        \"onUpdate:modelValue\": handleSelectCheck,\n        onClick: withModifiers(() => {}, [\"stop\"])\n      }, {\n        default: withCtx(() => [createCommentVNode(\"\\n        Add an empty element to avoid render label,\\n        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485\\n      \"), createElementVNode(\"span\")]),\n        _: 1\n      }, 8, [\"model-value\", \"label\", \"disabled\", \"onClick\"])) : unref(isLeaf) && __props.node.checked ? (openBlock(), createBlock(unref(ElIcon), {\n        key: 2,\n        class: normalizeClass(unref(ns).e(\"prefix\"))\n      }, {\n        default: withCtx(() => [createVNode(unref(Check))]),\n        _: 1\n      }, 8, [\"class\"])) : createCommentVNode(\"v-if\", true), createCommentVNode(\" content \"), createVNode(unref(NodeContent), {\n        node: __props.node\n      }, null, 8, [\"node\"]), createCommentVNode(\" postfix \"), !unref(isLeaf) ? (openBlock(), createElementBlock(Fragment, {\n        key: 3\n      }, [__props.node.loading ? (openBlock(), createBlock(unref(ElIcon), {\n        key: 0,\n        class: normalizeClass([unref(ns).is(\"loading\"), unref(ns).e(\"postfix\")])\n      }, {\n        default: withCtx(() => [createVNode(unref(Loading))]),\n        _: 1\n      }, 8, [\"class\"])) : (openBlock(), createBlock(unref(ElIcon), {\n        key: 1,\n        class: normalizeClass([\"arrow-right\", unref(ns).e(\"postfix\")])\n      }, {\n        default: withCtx(() => [createVNode(unref(ArrowRight))]),\n        _: 1\n      }, 8, [\"class\"]))], 64)) : createCommentVNode(\"v-if\", true)], 42, [\"id\", \"aria-haspopup\", \"aria-owns\", \"aria-expanded\", \"tabindex\"]);\n    };\n  }\n});\nvar ElCascaderNode = /* @__PURE__ */_export_sfc(_sfc_main, [[\"__file\", \"node.vue\"]]);\nexport { ElCascaderNode as default };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}