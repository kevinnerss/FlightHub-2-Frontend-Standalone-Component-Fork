{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  ref: \"container\",\n  class: \"dji-space-component-container\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"loading-placeholder\"\n};\nconst _hoisted_3 = {\n  key: 1,\n  class: \"error-placeholder\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [$data.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [...(_cache[0] || (_cache[0] = [_createElementVNode(\"p\", null, \"组件加载中...\", -1 /* CACHED */)]))])) : _createCommentVNode(\"v-if\", true), $data.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createElementVNode(\"p\", null, \"组件加载失败: \" + _toDisplayString($data.error), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true)], 512 /* NEED_PATCH */);\n}","map":{"version":3,"names":["ref","class","_createElementBlock","_hoisted_1","$data","loading","_hoisted_2","_cache","_createElementVNode","error","_hoisted_3","_toDisplayString"],"sources":["D:\\projects\\FlightHub-2-Frontend-Standalone-Component\\frontend\\src\\djispace-components\\DjiSpaceComponent.vue"],"sourcesContent":["<template>\r\n  <div ref=\"container\" class=\"dji-space-component-container\">\r\n    <div v-if=\"loading\" class=\"loading-placeholder\">\r\n      <p>组件加载中...</p>\r\n    </div>\r\n    <div v-if=\"error\" class=\"error-placeholder\">\r\n      <p>组件加载失败: {{ error }}</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'DjiSpaceComponent',\r\n  props: {\r\n    componentName: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    componentProps: {\r\n      type: Object,\r\n      default: () => ({})\r\n    },\r\n    config: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      error: null,\r\n      loaded: false\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initComponent()\r\n  },\r\n  beforeUnmount() {\r\n    // 清理组件\r\n    if (this.loaded && window.FH2 && this.$refs.container) {\r\n      this.$refs.container.innerHTML = ''\r\n    }\r\n  },\r\n  methods: {\r\n    async initComponent() {\r\n      this.loading = true\r\n      this.error = null\r\n      \r\n      try {\r\n        // 检查FH2是否存在\r\n        if (!window.FH2) {\r\n          throw new Error('FH2未正确加载，请检查paas.js是否正确引入')\r\n        }\r\n        \r\n        // 初始化配置\r\n        if (this.config) {\r\n          window.FH2.initConfig(this.config)\r\n        }\r\n        \r\n        // 等待DOM更新\r\n        await this.$nextTick()\r\n        \r\n        // 检查容器引用是否存在\r\n        if (!this.$refs.container) {\r\n          throw new Error('容器元素不存在')\r\n        }\r\n        \r\n        // 生成唯一的容器ID\r\n        const containerId = `dji-component-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\r\n        this.$refs.container.id = containerId\r\n        \r\n        // 检查容器元素是否存在\r\n        if (!document.getElementById(containerId)) {\r\n          throw new Error('容器元素未正确创建')\r\n        }\r\n        \r\n        // 根据组件名称加载对应组件\r\n        switch (this.componentName) {\r\n          case 'project':\r\n            window.FH2.loadProject(containerId)\r\n            break\r\n          case 'cockpit':\r\n            window.FH2.loadCockpit(containerId, this.componentProps)\r\n            break\r\n          case 'wayline':\r\n            window.FH2.loadWayline(containerId, this.componentProps)\r\n            break\r\n          case 'waylineCreation':\r\n            window.FH2.loadWaylineCreation(containerId)\r\n            break\r\n          default:\r\n            throw new Error(`不支持的组件名称: ${this.componentName}`)\r\n        }\r\n        \r\n        this.loaded = true\r\n      } catch (err) {\r\n        this.error = err.message\r\n        console.error('组件加载失败:', err)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.dji-space-component-container {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: relative;\r\n}\r\n\r\n.loading-placeholder,\r\n.error-placeholder {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n\r\n.loading-placeholder p,\r\n.error-placeholder p {\r\n  font-size: 16px;\r\n  color: #666;\r\n}\r\n</style>"],"mappings":";;EACOA,GAAG,EAAC,WAAW;EAACC,KAAK,EAAC;;;;EACLA,KAAK,EAAC;;;;EAGRA,KAAK,EAAC;;;uBAJ1BC,mBAAA,CAOM,OAPNC,UAOM,GANOC,KAAA,CAAAC,OAAO,I,cAAlBH,mBAAA,CAEM,OAFNI,UAEM,OAAAC,MAAA,QAAAA,MAAA,OADJC,mBAAA,CAAe,WAAZ,UAAQ,mB,2CAEFJ,KAAA,CAAAK,KAAK,I,cAAhBP,mBAAA,CAEM,OAFNQ,UAEM,GADJF,mBAAA,CAA0B,WAAvB,UAAQ,GAAAG,gBAAA,CAAGP,KAAA,CAAAK,KAAK,iB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}