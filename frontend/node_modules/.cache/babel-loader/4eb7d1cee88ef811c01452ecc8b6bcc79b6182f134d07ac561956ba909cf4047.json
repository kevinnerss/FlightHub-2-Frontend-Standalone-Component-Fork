{"ast":null,"code":"export default {\n  name: 'DigitalTwin',\n  data() {\n    return {\n      viewer: null,\n      tileset: null,\n      loading: false,\n      error: '',\n      wireframe: false,\n      scale: 1.0,\n      rotation: 0,\n      modelState: '未加载',\n      modelPath: '/models/Model_0/tileset.json',\n      // 默认模型路径\n      resizeObserver: null,\n      debugInfo: ''\n    };\n  },\n  async mounted() {\n    // 等待DOM更新完成后再初始化Cesium\n    this.$nextTick(async () => {\n      // 等待Cesium资源加载完成后再初始化\n      await this.initCesium();\n\n      // 初始化 ResizeObserver\n      this.initResizeObserver();\n\n      // 自动加载默认模型\n      await this.loadModel();\n    });\n  },\n  beforeUnmount() {\n    if (this.viewer) {\n      this.viewer.destroy();\n    }\n    // 清理 ResizeObserver\n    if (this.resizeObserver) {\n      this.resizeObserver.disconnect();\n    }\n    // 移除窗口大小调整事件监听\n    window.removeEventListener('resize', this.handleWindowResize);\n  },\n  methods: {\n    async initCesium() {\n      try {\n        // 动态导入Cesium\n        const Cesium = await import('cesium');\n\n        // 设置Cesium的access token为空（因为我们使用的是本地资源）\n        Cesium.Ion.defaultAccessToken = '';\n\n        // 确保容器元素存在且已正确渲染\n        const container = document.getElementById('cesiumContainer');\n        if (!container) {\n          throw new Error('找不到 cesiumContainer 元素');\n        }\n\n        // 明确设置容器尺寸\n        container.style.width = '100%';\n        container.style.height = '100%';\n        container.style.position = 'relative';\n\n        // 确保所有父容器也正确设置尺寸\n        let parent = container.parentElement;\n        while (parent) {\n          if (parent.style && !parent.style.height) {\n            parent.style.height = '100%';\n          }\n          parent = parent.parentElement;\n        }\n\n        // 初始化Cesium Viewer\n        this.viewer = new Cesium.Viewer('cesiumContainer', {\n          animation: false,\n          baseLayerPicker: false,\n          fullscreenButton: false,\n          vrButton: false,\n          geocoder: false,\n          homeButton: false,\n          infoBox: false,\n          sceneModePicker: false,\n          selectionIndicator: false,\n          timeline: false,\n          navigationHelpButton: false,\n          navigationInstructionsInitiallyVisible: false,\n          scene3DOnly: true,\n          shadows: true,\n          shouldAnimate: true,\n          creditContainer: document.createElement('div')\n        });\n\n        // 设置初始视角\n        this.viewer.camera.setView({\n          destination: Cesium.Cartesian3.fromDegrees(116.3913, 39.9075, 1000),\n          orientation: {\n            heading: Cesium.Math.toRadians(0),\n            pitch: Cesium.Math.toRadians(-30),\n            roll: 0.0\n          }\n        });\n      } catch (err) {\n        this.error = '初始化Cesium失败: ' + err.message;\n        console.error('Cesium initialization error:', err);\n      }\n    },\n    initResizeObserver() {\n      const container = document.getElementById('cesiumContainer');\n      if (!container) return;\n\n      // 创建 ResizeObserver 实例\n      this.resizeObserver = new ResizeObserver(entries => {\n        for (let entry of entries) {\n          if (entry.target === container && this.viewer) {\n            const {\n              width,\n              height\n            } = entry.contentRect;\n            console.log('Cesium容器大小变化:', width, 'x', height);\n\n            // 确保容器有实际尺寸\n            if (width > 0 && height > 0) {\n              // 强制设置容器尺寸（防止某些情况下的尺寸计算问题）\n              container.style.width = `${width}px`;\n              container.style.height = `${height}px`;\n\n              // 调整 Cesium Viewer 大小\n              this.viewer.resize();\n\n              // 延迟一帧再调整一次，确保尺寸完全生效\n              requestAnimationFrame(() => {\n                this.viewer.resize();\n              });\n            }\n          }\n        }\n      });\n\n      // 同时观察父容器，确保捕捉所有层级的大小变化\n      const parentContainer = container.parentElement;\n      if (parentContainer) {\n        this.resizeObserver.observe(parentContainer);\n      }\n\n      // 开始观察容器元素\n      this.resizeObserver.observe(container);\n\n      // 添加窗口调整大小事件监听\n      window.addEventListener('resize', this.handleWindowResize);\n    },\n    handleWindowResize() {\n      if (this.viewer) {\n        // 使用setTimeout延迟执行，确保DOM尺寸已更新\n        setTimeout(() => {\n          const container = document.getElementById('cesiumContainer');\n          if (container) {\n            // 强制刷新容器尺寸\n            container.style.width = '100%';\n            container.style.height = '100%';\n            this.viewer.resize();\n          }\n        }, 0);\n      }\n    },\n    checkContainerSizes() {\n      const container = document.getElementById('cesiumContainer');\n      const cardBody = container ? container.parentElement : null;\n      const card = cardBody ? cardBody.parentElement : null;\n      const main = card ? card.parentElement : null;\n      if (container) {\n        this.debugInfo = `Container: ${container.offsetWidth}x${container.offsetHeight}`;\n        console.log('容器尺寸:', {\n          container: {\n            width: container.offsetWidth,\n            height: container.offsetHeight\n          },\n          cardBody: cardBody ? {\n            width: cardBody.offsetWidth,\n            height: cardBody.offsetHeight\n          } : null,\n          card: card ? {\n            width: card.offsetWidth,\n            height: card.offsetHeight\n          } : null,\n          main: main ? {\n            width: main.offsetWidth,\n            height: main.offsetHeight\n          } : null\n        });\n      }\n    },\n    async loadModel() {\n      if (!this.viewer || !this.modelPath) return;\n      this.loading = true;\n      this.error = '';\n      try {\n        // 动态导入Cesium\n        const Cesium = await import('cesium');\n\n        // 如果已有模型，先移除\n        if (this.tileset) {\n          this.viewer.scene.primitives.remove(this.tileset);\n          this.tileset = null;\n        }\n\n        // 加载3D Tiles数据集\n        this.tileset = await Cesium.Cesium3DTileset.fromUrl(this.modelPath);\n        this.viewer.scene.primitives.add(this.tileset);\n\n        // 缩放到模型\n        if (this.tileset.readyPromise) {\n          this.tileset.readyPromise.then(() => {\n            this.modelState = '已加载';\n            this.flyToModel();\n          }).catch(error => {\n            this.error = '模型加载失败: ' + error.message;\n            this.modelState = '加载失败';\n            console.error('Tileset loading error:', error);\n          }).finally(() => {\n            this.loading = false;\n          });\n        } else {\n          // 如果没有readyPromise，直接设置状态\n          this.modelState = '已加载';\n          this.flyToModel();\n          this.loading = false;\n        }\n      } catch (err) {\n        this.error = '模型加载失败: ' + err.message;\n        this.modelState = '加载失败';\n        this.loading = false;\n        console.error('Model loading error:', err);\n      }\n    },\n    removeModel() {\n      if (this.tileset) {\n        this.viewer.scene.primitives.remove(this.tileset);\n        this.tileset = null;\n        this.modelState = '已移除';\n      }\n    },\n    flyToModel() {\n      if (this.viewer && this.tileset) {\n        this.viewer.flyTo(this.tileset);\n      }\n    },\n    async resetView() {\n      if (this.viewer) {\n        // 重置到初始视角\n        const Cesium = await import('cesium');\n        this.viewer.camera.setView({\n          destination: Cesium.Cartesian3.fromDegrees(116.3913, 39.9075, 1000),\n          orientation: {\n            heading: Cesium.Math.toRadians(0),\n            pitch: Cesium.Math.toRadians(-30),\n            roll: 0.0\n          }\n        });\n      }\n    },\n    toggleWireframe() {\n      if (!this.tileset) return;\n      this.wireframe = !this.wireframe;\n      this.tileset.debugWireframe = this.wireframe;\n    },\n    updateScale(value) {\n      if (!this.tileset) return;\n\n      // 应用缩放\n      console.log('更新模型缩放:', value);\n    },\n    updateRotation(value) {\n      if (!this.tileset) return;\n\n      // 应用旋转\n      console.log('更新模型旋转:', value);\n    }\n  }\n};","map":{"version":3,"names":["name","data","viewer","tileset","loading","error","wireframe","scale","rotation","modelState","modelPath","resizeObserver","debugInfo","mounted","$nextTick","initCesium","initResizeObserver","loadModel","beforeUnmount","destroy","disconnect","window","removeEventListener","handleWindowResize","methods","Cesium","Ion","defaultAccessToken","container","document","getElementById","Error","style","width","height","position","parent","parentElement","Viewer","animation","baseLayerPicker","fullscreenButton","vrButton","geocoder","homeButton","infoBox","sceneModePicker","selectionIndicator","timeline","navigationHelpButton","navigationInstructionsInitiallyVisible","scene3DOnly","shadows","shouldAnimate","creditContainer","createElement","camera","setView","destination","Cartesian3","fromDegrees","orientation","heading","Math","toRadians","pitch","roll","err","message","console","ResizeObserver","entries","entry","target","contentRect","log","resize","requestAnimationFrame","parentContainer","observe","addEventListener","setTimeout","checkContainerSizes","cardBody","card","main","offsetWidth","offsetHeight","scene","primitives","remove","Cesium3DTileset","fromUrl","add","readyPromise","then","flyToModel","catch","finally","removeModel","flyTo","resetView","toggleWireframe","debugWireframe","updateScale","value","updateRotation"],"sources":["D:\\projects\\FlightHub-2-Frontend-Standalone-Component\\frontend\\src\\views\\DigitalTwin.vue"],"sourcesContent":["<template>\n  <div class=\"digital-twin h-screen flex flex-col\">\n    <el-container class=\"flex-1 overflow-hidden\">\n      <!-- 顶部导航 -->\n      <el-header height=\"60px\" class=\"bg-white border-b flex items-center justify-between px-4 flex-shrink-0\">\n        <div class=\"flex items-center\">\n          <h1 class=\"text-xl font-bold\">数字孪生系统</h1>\n        </div>\n        <div class=\"flex items-center gap-2\">\n          <el-button @click=\"resetView\">重置视角</el-button>\n          <el-button @click=\"toggleWireframe\">{{ wireframe ? '实体模式' : '线框模式' }}</el-button>\n          <!-- 调试信息 -->\n          <div v-if=\"debugInfo\" class=\"text-xs bg-gray-200 p-1 rounded\">\n            {{ debugInfo }}\n          </div>\n        </div>\n      </el-header>\n      \n      <el-container class=\"p-4 gap-4 flex-1 overflow-hidden\">\n        <!-- 主内容区 - 3D模型视图 -->\n        <el-main class=\"p-0 flex-1 overflow-hidden\">\n          <el-card \n            shadow=\"hover\" \n            class=\"h-full border-0 flex flex-col\"\n            :body-style=\"{ \n              flex: '1',\n              display: 'flex',\n              flexDirection: 'column',\n              padding: '0'\n            }\"\n          >\n            <template #header>\n              <div class=\"flex items-center justify-between\">\n                <span class=\"text-lg font-medium\">3D模型视图</span>\n                <div class=\"flex items-center gap-2\">\n                  <el-input \n                    v-model=\"modelPath\" \n                    placeholder=\"输入模型路径，如: /models/Model_0/tileset.json\" \n                    size=\"small\" \n                    style=\"width: 350px\"\n                  />\n                  <el-button @click=\"loadModel\" size=\"small\">加载模型</el-button>\n                  <el-button @click=\"checkContainerSizes\" size=\"small\">检查尺寸</el-button>\n                </div>\n              </div>\n            </template>\n            \n            <div class=\"flex-1 relative\">\n              <div id=\"cesiumContainer\" ref=\"cesiumContainer\" class=\"absolute inset-0\">\n                <div v-if=\"loading\" class=\"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 z-10\">\n                  <el-spinner size=\"large\" />\n                  <span class=\"ml-2 text-white\">正在加载模型...</span>\n                </div>\n                <div v-if=\"error\" class=\"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 z-10\">\n                  <el-alert\n                    :title=\"error\"\n                    type=\"error\"\n                    show-icon\n                    class=\"w-96\"\n                  />\n                </div>\n              </div>\n            </div>\n          </el-card>\n        </el-main>\n        \n        <!-- 右侧面板 -->\n        <el-aside width=\"240px\" class=\"space-y-4 overflow-hidden\">\n          <!-- 模型控制面板 -->\n          <el-card shadow=\"hover\" class=\"border-0 h-full flex flex-col\">\n            <template #header>\n              <div class=\"flex items-center justify-between\">\n                <span class=\"text-base font-medium\">模型控制</span>\n              </div>\n            </template>\n            <div class=\"space-y-4 flex-grow overflow-y-auto\">\n              <div>\n                <label class=\"block text-sm font-medium mb-1\">模型缩放</label>\n                <el-slider \n                  v-model=\"scale\" \n                  :min=\"0.1\" \n                  :max=\"5\" \n                  :step=\"0.1\" \n                  @change=\"updateScale\"\n                  show-input\n                />\n              </div>\n              \n              <div>\n                <label class=\"block text-sm font-medium mb-1\">旋转角度</label>\n                <el-slider \n                  v-model=\"rotation\" \n                  :min=\"0\" \n                  :max=\"360\" \n                  @change=\"updateRotation\"\n                  show-input\n                />\n              </div>\n              \n              <div class=\"grid grid-cols-2 gap-2\">\n                <el-button @click=\"removeModel\">移除模型</el-button>\n                <el-button @click=\"flyToModel\">飞向模型</el-button>\n              </div>\n            </div>\n          </el-card>\n          \n          <!-- 模型信息面板 -->\n          <el-card shadow=\"hover\" class=\"border-0\">\n            <template #header>\n              <div class=\"flex items-center justify-between\">\n                <span class=\"text-base font-medium\">模型信息</span>\n              </div>\n            </template>\n            <div class=\"space-y-2 text-sm\">\n              <div class=\"flex justify-between\">\n                <span class=\"text-gray-500\">模型格式:</span>\n                <span>3D Tiles</span>\n              </div>\n              <div class=\"flex justify-between\">\n                <span class=\"text-gray-500\">模型状态:</span>\n                <span>{{ modelState }}</span>\n              </div>\n              <div class=\"flex justify-between\">\n                <span class=\"text-gray-500\">加载路径:</span>\n                <span class=\"text-xs\">{{ modelPath || '未指定' }}</span>\n              </div>\n            </div>\n          </el-card>\n          \n          <!-- 使用说明 -->\n          <el-card shadow=\"hover\" class=\"border-0\">\n            <template #header>\n              <div class=\"flex items-center justify-between\">\n                <span class=\"text-base font-medium\">使用说明</span>\n              </div>\n            </template>\n            <div class=\"text-xs text-gray-500 space-y-2\">\n              <p>1. 将3D Tiles数据集放入 <code>public/models/</code> 目录</p>\n              <p>2. 在上方输入框中输入模型路径</p>\n              <p>3. 点击\"加载模型\"按钮加载3D模型</p>\n              <p>4. 当前默认模型路径: <code>/models/Model_0/tileset.json</code></p>\n            </div>\n          </el-card>\n        </el-aside>\n      </el-container>\n    </el-container>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'DigitalTwin',\n  data() {\n    return {\n      viewer: null,\n      tileset: null,\n      loading: false,\n      error: '',\n      wireframe: false,\n      scale: 1.0,\n      rotation: 0,\n      modelState: '未加载',\n      modelPath: '/models/Model_0/tileset.json', // 默认模型路径\n      resizeObserver: null,\n      debugInfo: ''\n    }\n  },\n  async mounted() {\n    // 等待DOM更新完成后再初始化Cesium\n    this.$nextTick(async () => {\n      // 等待Cesium资源加载完成后再初始化\n      await this.initCesium()\n      \n      // 初始化 ResizeObserver\n      this.initResizeObserver()\n      \n      // 自动加载默认模型\n      await this.loadModel()\n    })\n  },\n  beforeUnmount() {\n    if (this.viewer) {\n      this.viewer.destroy()\n    }\n    // 清理 ResizeObserver\n    if (this.resizeObserver) {\n      this.resizeObserver.disconnect()\n    }\n    // 移除窗口大小调整事件监听\n    window.removeEventListener('resize', this.handleWindowResize)\n  },\n  methods: {\n    async initCesium() {\n      try {\n        // 动态导入Cesium\n        const Cesium = await import('cesium')\n        \n        // 设置Cesium的access token为空（因为我们使用的是本地资源）\n        Cesium.Ion.defaultAccessToken = ''\n        \n        // 确保容器元素存在且已正确渲染\n        const container = document.getElementById('cesiumContainer')\n        if (!container) {\n          throw new Error('找不到 cesiumContainer 元素')\n        }\n        \n        // 明确设置容器尺寸\n        container.style.width = '100%'\n        container.style.height = '100%'\n        container.style.position = 'relative'\n        \n        // 确保所有父容器也正确设置尺寸\n        let parent = container.parentElement\n        while (parent) {\n          if (parent.style && !parent.style.height) {\n            parent.style.height = '100%'\n          }\n          parent = parent.parentElement\n        }\n        \n        // 初始化Cesium Viewer\n        this.viewer = new Cesium.Viewer('cesiumContainer', {\n          animation: false,\n          baseLayerPicker: false,\n          fullscreenButton: false,\n          vrButton: false,\n          geocoder: false,\n          homeButton: false,\n          infoBox: false,\n          sceneModePicker: false,\n          selectionIndicator: false,\n          timeline: false,\n          navigationHelpButton: false,\n          navigationInstructionsInitiallyVisible: false,\n          scene3DOnly: true,\n          shadows: true,\n          shouldAnimate: true,\n          creditContainer: document.createElement('div')\n        })\n\n        // 设置初始视角\n        this.viewer.camera.setView({\n          destination: Cesium.Cartesian3.fromDegrees(116.3913, 39.9075, 1000),\n          orientation: {\n            heading: Cesium.Math.toRadians(0),\n            pitch: Cesium.Math.toRadians(-30),\n            roll: 0.0\n          }\n        })\n      } catch (err) {\n        this.error = '初始化Cesium失败: ' + err.message\n        console.error('Cesium initialization error:', err)\n      }\n    },\n    \n    initResizeObserver() {\n      const container = document.getElementById('cesiumContainer')\n      if (!container) return\n      \n      // 创建 ResizeObserver 实例\n      this.resizeObserver = new ResizeObserver(entries => {\n        for (let entry of entries) {\n          if (entry.target === container && this.viewer) {\n            const { width, height } = entry.contentRect\n            console.log('Cesium容器大小变化:', width, 'x', height)\n            \n            // 确保容器有实际尺寸\n            if (width > 0 && height > 0) {\n              // 强制设置容器尺寸（防止某些情况下的尺寸计算问题）\n              container.style.width = `${width}px`\n              container.style.height = `${height}px`\n              \n              // 调整 Cesium Viewer 大小\n              this.viewer.resize()\n              \n              // 延迟一帧再调整一次，确保尺寸完全生效\n              requestAnimationFrame(() => {\n                this.viewer.resize()\n              })\n            }\n          }\n        }\n      })\n      \n      // 同时观察父容器，确保捕捉所有层级的大小变化\n      const parentContainer = container.parentElement\n      if (parentContainer) {\n        this.resizeObserver.observe(parentContainer)\n      }\n      \n      // 开始观察容器元素\n      this.resizeObserver.observe(container)\n      \n      // 添加窗口调整大小事件监听\n      window.addEventListener('resize', this.handleWindowResize)\n    },\n    \n    handleWindowResize() {\n      if (this.viewer) {\n        // 使用setTimeout延迟执行，确保DOM尺寸已更新\n        setTimeout(() => {\n          const container = document.getElementById('cesiumContainer')\n          if (container) {\n            // 强制刷新容器尺寸\n            container.style.width = '100%'\n            container.style.height = '100%'\n            this.viewer.resize()\n          }\n        }, 0)\n      }\n    },\n    \n    checkContainerSizes() {\n      const container = document.getElementById('cesiumContainer');\n      const cardBody = container ? container.parentElement : null;\n      const card = cardBody ? cardBody.parentElement : null;\n      const main = card ? card.parentElement : null;\n      \n      if (container) {\n        this.debugInfo = `Container: ${container.offsetWidth}x${container.offsetHeight}`;\n        console.log('容器尺寸:', {\n          container: { width: container.offsetWidth, height: container.offsetHeight },\n          cardBody: cardBody ? { width: cardBody.offsetWidth, height: cardBody.offsetHeight } : null,\n          card: card ? { width: card.offsetWidth, height: card.offsetHeight } : null,\n          main: main ? { width: main.offsetWidth, height: main.offsetHeight } : null\n        });\n      }\n    },\n    \n    async loadModel() {\n      if (!this.viewer || !this.modelPath) return\n      \n      this.loading = true\n      this.error = ''\n      \n      try {\n        // 动态导入Cesium\n        const Cesium = await import('cesium')\n        \n        // 如果已有模型，先移除\n        if (this.tileset) {\n          this.viewer.scene.primitives.remove(this.tileset)\n          this.tileset = null\n        }\n        \n        // 加载3D Tiles数据集\n        this.tileset = await Cesium.Cesium3DTileset.fromUrl(this.modelPath)\n        \n        this.viewer.scene.primitives.add(this.tileset)\n        \n        // 缩放到模型\n        if (this.tileset.readyPromise) {\n          this.tileset.readyPromise.then(() => {\n            this.modelState = '已加载'\n            this.flyToModel()\n          }).catch(error => {\n            this.error = '模型加载失败: ' + error.message\n            this.modelState = '加载失败'\n            console.error('Tileset loading error:', error)\n          }).finally(() => {\n            this.loading = false\n          })\n        } else {\n          // 如果没有readyPromise，直接设置状态\n          this.modelState = '已加载'\n          this.flyToModel()\n          this.loading = false\n        }\n      } catch (err) {\n        this.error = '模型加载失败: ' + err.message\n        this.modelState = '加载失败'\n        this.loading = false\n        console.error('Model loading error:', err)\n      }\n    },\n    removeModel() {\n      if (this.tileset) {\n        this.viewer.scene.primitives.remove(this.tileset)\n        this.tileset = null\n        this.modelState = '已移除'\n      }\n    },\n    flyToModel() {\n      if (this.viewer && this.tileset) {\n        this.viewer.flyTo(this.tileset)\n      }\n    },\n    async resetView() {\n      if (this.viewer) {\n        // 重置到初始视角\n        const Cesium = await import('cesium')\n        this.viewer.camera.setView({\n          destination: Cesium.Cartesian3.fromDegrees(116.3913, 39.9075, 1000),\n          orientation: {\n            heading: Cesium.Math.toRadians(0),\n            pitch: Cesium.Math.toRadians(-30),\n            roll: 0.0\n          }\n        })\n      }\n    },\n    toggleWireframe() {\n      if (!this.tileset) return\n      \n      this.wireframe = !this.wireframe\n      this.tileset.debugWireframe = this.wireframe\n    },\n    updateScale(value) {\n      if (!this.tileset) return\n      \n      // 应用缩放\n      console.log('更新模型缩放:', value)\n    },\n    updateRotation(value) {\n      if (!this.tileset) return\n      \n      // 应用旋转\n      console.log('更新模型旋转:', value)\n    }\n  }\n}\n</script>\n\n<style scoped>\n.digital-twin {\n  width: 100%;\n  height: 100vh;\n  box-sizing: border-box;\n}\n\n#cesiumContainer {\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  overflow: hidden;\n  position: relative;\n}\n\n/* 确保所有父容器正确传递尺寸 */\n.el-card {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.el-card__body {\n  height: 100%;\n  padding: 0;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n\n.el-main {\n  padding: 0 !important;\n  height: 100%;\n}\n\n.el-container {\n  height: 100%;\n}\n\ncode {\n  background-color: #f1f1f1;\n  padding: 2px 4px;\n  border-radius: 3px;\n}\n</style>"],"mappings":"AAsJA,eAAe;EACbA,IAAI,EAAE,aAAa;EACnBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,MAAM,EAAE,IAAI;MACZC,OAAO,EAAE,IAAI;MACbC,OAAO,EAAE,KAAK;MACdC,KAAK,EAAE,EAAE;MACTC,SAAS,EAAE,KAAK;MAChBC,KAAK,EAAE,GAAG;MACVC,QAAQ,EAAE,CAAC;MACXC,UAAU,EAAE,KAAK;MACjBC,SAAS,EAAE,8BAA8B;MAAE;MAC3CC,cAAc,EAAE,IAAI;MACpBC,SAAS,EAAE;IACb;EACF,CAAC;EACD,MAAMC,OAAOA,CAAA,EAAG;IACd;IACA,IAAI,CAACC,SAAS,CAAC,YAAY;MACzB;MACA,MAAM,IAAI,CAACC,UAAU,CAAC;;MAEtB;MACA,IAAI,CAACC,kBAAkB,CAAC;;MAExB;MACA,MAAM,IAAI,CAACC,SAAS,CAAC;IACvB,CAAC;EACH,CAAC;EACDC,aAAaA,CAAA,EAAG;IACd,IAAI,IAAI,CAAChB,MAAM,EAAE;MACf,IAAI,CAACA,MAAM,CAACiB,OAAO,CAAC;IACtB;IACA;IACA,IAAI,IAAI,CAACR,cAAc,EAAE;MACvB,IAAI,CAACA,cAAc,CAACS,UAAU,CAAC;IACjC;IACA;IACAC,MAAM,CAACC,mBAAmB,CAAC,QAAQ,EAAE,IAAI,CAACC,kBAAkB;EAC9D,CAAC;EACDC,OAAO,EAAE;IACP,MAAMT,UAAUA,CAAA,EAAG;MACjB,IAAI;QACF;QACA,MAAMU,MAAK,GAAI,MAAM,MAAM,CAAC,QAAQ;;QAEpC;QACAA,MAAM,CAACC,GAAG,CAACC,kBAAiB,GAAI,EAAC;;QAEjC;QACA,MAAMC,SAAQ,GAAIC,QAAQ,CAACC,cAAc,CAAC,iBAAiB;QAC3D,IAAI,CAACF,SAAS,EAAE;UACd,MAAM,IAAIG,KAAK,CAAC,wBAAwB;QAC1C;;QAEA;QACAH,SAAS,CAACI,KAAK,CAACC,KAAI,GAAI,MAAK;QAC7BL,SAAS,CAACI,KAAK,CAACE,MAAK,GAAI,MAAK;QAC9BN,SAAS,CAACI,KAAK,CAACG,QAAO,GAAI,UAAS;;QAEpC;QACA,IAAIC,MAAK,GAAIR,SAAS,CAACS,aAAY;QACnC,OAAOD,MAAM,EAAE;UACb,IAAIA,MAAM,CAACJ,KAAI,IAAK,CAACI,MAAM,CAACJ,KAAK,CAACE,MAAM,EAAE;YACxCE,MAAM,CAACJ,KAAK,CAACE,MAAK,GAAI,MAAK;UAC7B;UACAE,MAAK,GAAIA,MAAM,CAACC,aAAY;QAC9B;;QAEA;QACA,IAAI,CAACnC,MAAK,GAAI,IAAIuB,MAAM,CAACa,MAAM,CAAC,iBAAiB,EAAE;UACjDC,SAAS,EAAE,KAAK;UAChBC,eAAe,EAAE,KAAK;UACtBC,gBAAgB,EAAE,KAAK;UACvBC,QAAQ,EAAE,KAAK;UACfC,QAAQ,EAAE,KAAK;UACfC,UAAU,EAAE,KAAK;UACjBC,OAAO,EAAE,KAAK;UACdC,eAAe,EAAE,KAAK;UACtBC,kBAAkB,EAAE,KAAK;UACzBC,QAAQ,EAAE,KAAK;UACfC,oBAAoB,EAAE,KAAK;UAC3BC,sCAAsC,EAAE,KAAK;UAC7CC,WAAW,EAAE,IAAI;UACjBC,OAAO,EAAE,IAAI;UACbC,aAAa,EAAE,IAAI;UACnBC,eAAe,EAAEzB,QAAQ,CAAC0B,aAAa,CAAC,KAAK;QAC/C,CAAC;;QAED;QACA,IAAI,CAACrD,MAAM,CAACsD,MAAM,CAACC,OAAO,CAAC;UACzBC,WAAW,EAAEjC,MAAM,CAACkC,UAAU,CAACC,WAAW,CAAC,QAAQ,EAAE,OAAO,EAAE,IAAI,CAAC;UACnEC,WAAW,EAAE;YACXC,OAAO,EAAErC,MAAM,CAACsC,IAAI,CAACC,SAAS,CAAC,CAAC,CAAC;YACjCC,KAAK,EAAExC,MAAM,CAACsC,IAAI,CAACC,SAAS,CAAC,CAAC,EAAE,CAAC;YACjCE,IAAI,EAAE;UACR;QACF,CAAC;MACH,EAAE,OAAOC,GAAG,EAAE;QACZ,IAAI,CAAC9D,KAAI,GAAI,eAAc,GAAI8D,GAAG,CAACC,OAAM;QACzCC,OAAO,CAAChE,KAAK,CAAC,8BAA8B,EAAE8D,GAAG;MACnD;IACF,CAAC;IAEDnD,kBAAkBA,CAAA,EAAG;MACnB,MAAMY,SAAQ,GAAIC,QAAQ,CAACC,cAAc,CAAC,iBAAiB;MAC3D,IAAI,CAACF,SAAS,EAAE;;MAEhB;MACA,IAAI,CAACjB,cAAa,GAAI,IAAI2D,cAAc,CAACC,OAAM,IAAK;QAClD,KAAK,IAAIC,KAAI,IAAKD,OAAO,EAAE;UACzB,IAAIC,KAAK,CAACC,MAAK,KAAM7C,SAAQ,IAAK,IAAI,CAAC1B,MAAM,EAAE;YAC7C,MAAM;cAAE+B,KAAK;cAAEC;YAAO,IAAIsC,KAAK,CAACE,WAAU;YAC1CL,OAAO,CAACM,GAAG,CAAC,eAAe,EAAE1C,KAAK,EAAE,GAAG,EAAEC,MAAM;;YAE/C;YACA,IAAID,KAAI,GAAI,KAAKC,MAAK,GAAI,CAAC,EAAE;cAC3B;cACAN,SAAS,CAACI,KAAK,CAACC,KAAI,GAAI,GAAGA,KAAK,IAAG;cACnCL,SAAS,CAACI,KAAK,CAACE,MAAK,GAAI,GAAGA,MAAM,IAAG;;cAErC;cACA,IAAI,CAAChC,MAAM,CAAC0E,MAAM,CAAC;;cAEnB;cACAC,qBAAqB,CAAC,MAAM;gBAC1B,IAAI,CAAC3E,MAAM,CAAC0E,MAAM,CAAC;cACrB,CAAC;YACH;UACF;QACF;MACF,CAAC;;MAED;MACA,MAAME,eAAc,GAAIlD,SAAS,CAACS,aAAY;MAC9C,IAAIyC,eAAe,EAAE;QACnB,IAAI,CAACnE,cAAc,CAACoE,OAAO,CAACD,eAAe;MAC7C;;MAEA;MACA,IAAI,CAACnE,cAAc,CAACoE,OAAO,CAACnD,SAAS;;MAErC;MACAP,MAAM,CAAC2D,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAACzD,kBAAkB;IAC3D,CAAC;IAEDA,kBAAkBA,CAAA,EAAG;MACnB,IAAI,IAAI,CAACrB,MAAM,EAAE;QACf;QACA+E,UAAU,CAAC,MAAM;UACf,MAAMrD,SAAQ,GAAIC,QAAQ,CAACC,cAAc,CAAC,iBAAiB;UAC3D,IAAIF,SAAS,EAAE;YACb;YACAA,SAAS,CAACI,KAAK,CAACC,KAAI,GAAI,MAAK;YAC7BL,SAAS,CAACI,KAAK,CAACE,MAAK,GAAI,MAAK;YAC9B,IAAI,CAAChC,MAAM,CAAC0E,MAAM,CAAC;UACrB;QACF,CAAC,EAAE,CAAC;MACN;IACF,CAAC;IAEDM,mBAAmBA,CAAA,EAAG;MACpB,MAAMtD,SAAQ,GAAIC,QAAQ,CAACC,cAAc,CAAC,iBAAiB,CAAC;MAC5D,MAAMqD,QAAO,GAAIvD,SAAQ,GAAIA,SAAS,CAACS,aAAY,GAAI,IAAI;MAC3D,MAAM+C,IAAG,GAAID,QAAO,GAAIA,QAAQ,CAAC9C,aAAY,GAAI,IAAI;MACrD,MAAMgD,IAAG,GAAID,IAAG,GAAIA,IAAI,CAAC/C,aAAY,GAAI,IAAI;MAE7C,IAAIT,SAAS,EAAE;QACb,IAAI,CAAChB,SAAQ,GAAI,cAAcgB,SAAS,CAAC0D,WAAW,IAAI1D,SAAS,CAAC2D,YAAY,EAAE;QAChFlB,OAAO,CAACM,GAAG,CAAC,OAAO,EAAE;UACnB/C,SAAS,EAAE;YAAEK,KAAK,EAAEL,SAAS,CAAC0D,WAAW;YAAEpD,MAAM,EAAEN,SAAS,CAAC2D;UAAa,CAAC;UAC3EJ,QAAQ,EAAEA,QAAO,GAAI;YAAElD,KAAK,EAAEkD,QAAQ,CAACG,WAAW;YAAEpD,MAAM,EAAEiD,QAAQ,CAACI;UAAa,IAAI,IAAI;UAC1FH,IAAI,EAAEA,IAAG,GAAI;YAAEnD,KAAK,EAAEmD,IAAI,CAACE,WAAW;YAAEpD,MAAM,EAAEkD,IAAI,CAACG;UAAa,IAAI,IAAI;UAC1EF,IAAI,EAAEA,IAAG,GAAI;YAAEpD,KAAK,EAAEoD,IAAI,CAACC,WAAW;YAAEpD,MAAM,EAAEmD,IAAI,CAACE;UAAa,IAAI;QACxE,CAAC,CAAC;MACJ;IACF,CAAC;IAED,MAAMtE,SAASA,CAAA,EAAG;MAChB,IAAI,CAAC,IAAI,CAACf,MAAK,IAAK,CAAC,IAAI,CAACQ,SAAS,EAAE;MAErC,IAAI,CAACN,OAAM,GAAI,IAAG;MAClB,IAAI,CAACC,KAAI,GAAI,EAAC;MAEd,IAAI;QACF;QACA,MAAMoB,MAAK,GAAI,MAAM,MAAM,CAAC,QAAQ;;QAEpC;QACA,IAAI,IAAI,CAACtB,OAAO,EAAE;UAChB,IAAI,CAACD,MAAM,CAACsF,KAAK,CAACC,UAAU,CAACC,MAAM,CAAC,IAAI,CAACvF,OAAO;UAChD,IAAI,CAACA,OAAM,GAAI,IAAG;QACpB;;QAEA;QACA,IAAI,CAACA,OAAM,GAAI,MAAMsB,MAAM,CAACkE,eAAe,CAACC,OAAO,CAAC,IAAI,CAAClF,SAAS;QAElE,IAAI,CAACR,MAAM,CAACsF,KAAK,CAACC,UAAU,CAACI,GAAG,CAAC,IAAI,CAAC1F,OAAO;;QAE7C;QACA,IAAI,IAAI,CAACA,OAAO,CAAC2F,YAAY,EAAE;UAC7B,IAAI,CAAC3F,OAAO,CAAC2F,YAAY,CAACC,IAAI,CAAC,MAAM;YACnC,IAAI,CAACtF,UAAS,GAAI,KAAI;YACtB,IAAI,CAACuF,UAAU,CAAC;UAClB,CAAC,CAAC,CAACC,KAAK,CAAC5F,KAAI,IAAK;YAChB,IAAI,CAACA,KAAI,GAAI,UAAS,GAAIA,KAAK,CAAC+D,OAAM;YACtC,IAAI,CAAC3D,UAAS,GAAI,MAAK;YACvB4D,OAAO,CAAChE,KAAK,CAAC,wBAAwB,EAAEA,KAAK;UAC/C,CAAC,CAAC,CAAC6F,OAAO,CAAC,MAAM;YACf,IAAI,CAAC9F,OAAM,GAAI,KAAI;UACrB,CAAC;QACH,OAAO;UACL;UACA,IAAI,CAACK,UAAS,GAAI,KAAI;UACtB,IAAI,CAACuF,UAAU,CAAC;UAChB,IAAI,CAAC5F,OAAM,GAAI,KAAI;QACrB;MACF,EAAE,OAAO+D,GAAG,EAAE;QACZ,IAAI,CAAC9D,KAAI,GAAI,UAAS,GAAI8D,GAAG,CAACC,OAAM;QACpC,IAAI,CAAC3D,UAAS,GAAI,MAAK;QACvB,IAAI,CAACL,OAAM,GAAI,KAAI;QACnBiE,OAAO,CAAChE,KAAK,CAAC,sBAAsB,EAAE8D,GAAG;MAC3C;IACF,CAAC;IACDgC,WAAWA,CAAA,EAAG;MACZ,IAAI,IAAI,CAAChG,OAAO,EAAE;QAChB,IAAI,CAACD,MAAM,CAACsF,KAAK,CAACC,UAAU,CAACC,MAAM,CAAC,IAAI,CAACvF,OAAO;QAChD,IAAI,CAACA,OAAM,GAAI,IAAG;QAClB,IAAI,CAACM,UAAS,GAAI,KAAI;MACxB;IACF,CAAC;IACDuF,UAAUA,CAAA,EAAG;MACX,IAAI,IAAI,CAAC9F,MAAK,IAAK,IAAI,CAACC,OAAO,EAAE;QAC/B,IAAI,CAACD,MAAM,CAACkG,KAAK,CAAC,IAAI,CAACjG,OAAO;MAChC;IACF,CAAC;IACD,MAAMkG,SAASA,CAAA,EAAG;MAChB,IAAI,IAAI,CAACnG,MAAM,EAAE;QACf;QACA,MAAMuB,MAAK,GAAI,MAAM,MAAM,CAAC,QAAQ;QACpC,IAAI,CAACvB,MAAM,CAACsD,MAAM,CAACC,OAAO,CAAC;UACzBC,WAAW,EAAEjC,MAAM,CAACkC,UAAU,CAACC,WAAW,CAAC,QAAQ,EAAE,OAAO,EAAE,IAAI,CAAC;UACnEC,WAAW,EAAE;YACXC,OAAO,EAAErC,MAAM,CAACsC,IAAI,CAACC,SAAS,CAAC,CAAC,CAAC;YACjCC,KAAK,EAAExC,MAAM,CAACsC,IAAI,CAACC,SAAS,CAAC,CAAC,EAAE,CAAC;YACjCE,IAAI,EAAE;UACR;QACF,CAAC;MACH;IACF,CAAC;IACDoC,eAAeA,CAAA,EAAG;MAChB,IAAI,CAAC,IAAI,CAACnG,OAAO,EAAE;MAEnB,IAAI,CAACG,SAAQ,GAAI,CAAC,IAAI,CAACA,SAAQ;MAC/B,IAAI,CAACH,OAAO,CAACoG,cAAa,GAAI,IAAI,CAACjG,SAAQ;IAC7C,CAAC;IACDkG,WAAWA,CAACC,KAAK,EAAE;MACjB,IAAI,CAAC,IAAI,CAACtG,OAAO,EAAE;;MAEnB;MACAkE,OAAO,CAACM,GAAG,CAAC,SAAS,EAAE8B,KAAK;IAC9B,CAAC;IACDC,cAAcA,CAACD,KAAK,EAAE;MACpB,IAAI,CAAC,IAAI,CAACtG,OAAO,EAAE;;MAEnB;MACAkE,OAAO,CAACM,GAAG,CAAC,SAAS,EAAE8B,KAAK;IAC9B;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}