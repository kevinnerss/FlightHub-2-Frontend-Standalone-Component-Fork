{"ast":null,"code":"import BoundingRectangle from \"../Core/BoundingRectangle.js\";\nimport defined from \"../Core/defined.js\";\nimport destroyObject from \"../Core/destroyObject.js\";\nimport PixelFormat from \"../Core/PixelFormat.js\";\nimport Framebuffer from \"../Renderer/Framebuffer.js\";\nimport PixelDatatype from \"../Renderer/PixelDatatype.js\";\nimport RenderState from \"../Renderer/RenderState.js\";\nimport Sampler from \"../Renderer/Sampler.js\";\nimport Texture from \"../Renderer/Texture.js\";\nimport BrdfLutGeneratorFS from \"../Shaders/BrdfLutGeneratorFS.js\";\n\n/**\n * @private\n */\nfunction BrdfLutGenerator() {\n  this._colorTexture = undefined;\n  this._drawCommand = undefined;\n}\nObject.defineProperties(BrdfLutGenerator.prototype, {\n  colorTexture: {\n    get: function () {\n      return this._colorTexture;\n    }\n  }\n});\nfunction createCommand(generator, context, framebuffer) {\n  const drawCommand = context.createViewportQuadCommand(BrdfLutGeneratorFS, {\n    framebuffer: framebuffer,\n    renderState: RenderState.fromCache({\n      viewport: new BoundingRectangle(0.0, 0.0, 256.0, 256.0)\n    })\n  });\n  generator._drawCommand = drawCommand;\n}\nBrdfLutGenerator.prototype.update = function (frameState) {\n  if (!defined(this._colorTexture)) {\n    const context = frameState.context;\n    const colorTexture = new Texture({\n      context: context,\n      width: 256,\n      height: 256,\n      pixelFormat: PixelFormat.RGBA,\n      pixelDatatype: PixelDatatype.UNSIGNED_BYTE,\n      sampler: Sampler.NEAREST\n    });\n    this._colorTexture = colorTexture;\n    const framebuffer = new Framebuffer({\n      context: context,\n      colorTextures: [colorTexture],\n      destroyAttachments: false\n    });\n    createCommand(this, context, framebuffer);\n    this._drawCommand.execute(context);\n    framebuffer.destroy();\n    this._drawCommand.shaderProgram = this._drawCommand.shaderProgram && this._drawCommand.shaderProgram.destroy();\n  }\n};\nBrdfLutGenerator.prototype.isDestroyed = function () {\n  return false;\n};\nBrdfLutGenerator.prototype.destroy = function () {\n  this._colorTexture = this._colorTexture && this._colorTexture.destroy();\n  return destroyObject(this);\n};\nexport default BrdfLutGenerator;","map":{"version":3,"names":["BoundingRectangle","defined","destroyObject","PixelFormat","Framebuffer","PixelDatatype","RenderState","Sampler","Texture","BrdfLutGeneratorFS","BrdfLutGenerator","_colorTexture","undefined","_drawCommand","Object","defineProperties","prototype","colorTexture","get","createCommand","generator","context","framebuffer","drawCommand","createViewportQuadCommand","renderState","fromCache","viewport","update","frameState","width","height","pixelFormat","RGBA","pixelDatatype","UNSIGNED_BYTE","sampler","NEAREST","colorTextures","destroyAttachments","execute","destroy","shaderProgram","isDestroyed"],"sources":["D:/projects/FlightHub-2-Frontend-Standalone-Component/frontend/node_modules/@cesium/engine/Source/Scene/BrdfLutGenerator.js"],"sourcesContent":["import BoundingRectangle from \"../Core/BoundingRectangle.js\";\nimport defined from \"../Core/defined.js\";\nimport destroyObject from \"../Core/destroyObject.js\";\nimport PixelFormat from \"../Core/PixelFormat.js\";\nimport Framebuffer from \"../Renderer/Framebuffer.js\";\nimport PixelDatatype from \"../Renderer/PixelDatatype.js\";\nimport RenderState from \"../Renderer/RenderState.js\";\nimport Sampler from \"../Renderer/Sampler.js\";\nimport Texture from \"../Renderer/Texture.js\";\nimport BrdfLutGeneratorFS from \"../Shaders/BrdfLutGeneratorFS.js\";\n\n/**\n * @private\n */\nfunction BrdfLutGenerator() {\n  this._colorTexture = undefined;\n  this._drawCommand = undefined;\n}\n\nObject.defineProperties(BrdfLutGenerator.prototype, {\n  colorTexture: {\n    get: function () {\n      return this._colorTexture;\n    },\n  },\n});\n\nfunction createCommand(generator, context, framebuffer) {\n  const drawCommand = context.createViewportQuadCommand(BrdfLutGeneratorFS, {\n    framebuffer: framebuffer,\n    renderState: RenderState.fromCache({\n      viewport: new BoundingRectangle(0.0, 0.0, 256.0, 256.0),\n    }),\n  });\n\n  generator._drawCommand = drawCommand;\n}\n\nBrdfLutGenerator.prototype.update = function (frameState) {\n  if (!defined(this._colorTexture)) {\n    const context = frameState.context;\n    const colorTexture = new Texture({\n      context: context,\n      width: 256,\n      height: 256,\n      pixelFormat: PixelFormat.RGBA,\n      pixelDatatype: PixelDatatype.UNSIGNED_BYTE,\n      sampler: Sampler.NEAREST,\n    });\n\n    this._colorTexture = colorTexture;\n    const framebuffer = new Framebuffer({\n      context: context,\n      colorTextures: [colorTexture],\n      destroyAttachments: false,\n    });\n\n    createCommand(this, context, framebuffer);\n    this._drawCommand.execute(context);\n    framebuffer.destroy();\n    this._drawCommand.shaderProgram =\n      this._drawCommand.shaderProgram &&\n      this._drawCommand.shaderProgram.destroy();\n  }\n};\n\nBrdfLutGenerator.prototype.isDestroyed = function () {\n  return false;\n};\n\nBrdfLutGenerator.prototype.destroy = function () {\n  this._colorTexture = this._colorTexture && this._colorTexture.destroy();\n  return destroyObject(this);\n};\nexport default BrdfLutGenerator;\n"],"mappings":"AAAA,OAAOA,iBAAiB,MAAM,8BAA8B;AAC5D,OAAOC,OAAO,MAAM,oBAAoB;AACxC,OAAOC,aAAa,MAAM,0BAA0B;AACpD,OAAOC,WAAW,MAAM,wBAAwB;AAChD,OAAOC,WAAW,MAAM,4BAA4B;AACpD,OAAOC,aAAa,MAAM,8BAA8B;AACxD,OAAOC,WAAW,MAAM,4BAA4B;AACpD,OAAOC,OAAO,MAAM,wBAAwB;AAC5C,OAAOC,OAAO,MAAM,wBAAwB;AAC5C,OAAOC,kBAAkB,MAAM,kCAAkC;;AAEjE;AACA;AACA;AACA,SAASC,gBAAgBA,CAAA,EAAG;EAC1B,IAAI,CAACC,aAAa,GAAGC,SAAS;EAC9B,IAAI,CAACC,YAAY,GAAGD,SAAS;AAC/B;AAEAE,MAAM,CAACC,gBAAgB,CAACL,gBAAgB,CAACM,SAAS,EAAE;EAClDC,YAAY,EAAE;IACZC,GAAG,EAAE,SAAAA,CAAA,EAAY;MACf,OAAO,IAAI,CAACP,aAAa;IAC3B;EACF;AACF,CAAC,CAAC;AAEF,SAASQ,aAAaA,CAACC,SAAS,EAAEC,OAAO,EAAEC,WAAW,EAAE;EACtD,MAAMC,WAAW,GAAGF,OAAO,CAACG,yBAAyB,CAACf,kBAAkB,EAAE;IACxEa,WAAW,EAAEA,WAAW;IACxBG,WAAW,EAAEnB,WAAW,CAACoB,SAAS,CAAC;MACjCC,QAAQ,EAAE,IAAI3B,iBAAiB,CAAC,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,KAAK;IACxD,CAAC;EACH,CAAC,CAAC;EAEFoB,SAAS,CAACP,YAAY,GAAGU,WAAW;AACtC;AAEAb,gBAAgB,CAACM,SAAS,CAACY,MAAM,GAAG,UAAUC,UAAU,EAAE;EACxD,IAAI,CAAC5B,OAAO,CAAC,IAAI,CAACU,aAAa,CAAC,EAAE;IAChC,MAAMU,OAAO,GAAGQ,UAAU,CAACR,OAAO;IAClC,MAAMJ,YAAY,GAAG,IAAIT,OAAO,CAAC;MAC/Ba,OAAO,EAAEA,OAAO;MAChBS,KAAK,EAAE,GAAG;MACVC,MAAM,EAAE,GAAG;MACXC,WAAW,EAAE7B,WAAW,CAAC8B,IAAI;MAC7BC,aAAa,EAAE7B,aAAa,CAAC8B,aAAa;MAC1CC,OAAO,EAAE7B,OAAO,CAAC8B;IACnB,CAAC,CAAC;IAEF,IAAI,CAAC1B,aAAa,GAAGM,YAAY;IACjC,MAAMK,WAAW,GAAG,IAAIlB,WAAW,CAAC;MAClCiB,OAAO,EAAEA,OAAO;MAChBiB,aAAa,EAAE,CAACrB,YAAY,CAAC;MAC7BsB,kBAAkB,EAAE;IACtB,CAAC,CAAC;IAEFpB,aAAa,CAAC,IAAI,EAAEE,OAAO,EAAEC,WAAW,CAAC;IACzC,IAAI,CAACT,YAAY,CAAC2B,OAAO,CAACnB,OAAO,CAAC;IAClCC,WAAW,CAACmB,OAAO,CAAC,CAAC;IACrB,IAAI,CAAC5B,YAAY,CAAC6B,aAAa,GAC7B,IAAI,CAAC7B,YAAY,CAAC6B,aAAa,IAC/B,IAAI,CAAC7B,YAAY,CAAC6B,aAAa,CAACD,OAAO,CAAC,CAAC;EAC7C;AACF,CAAC;AAED/B,gBAAgB,CAACM,SAAS,CAAC2B,WAAW,GAAG,YAAY;EACnD,OAAO,KAAK;AACd,CAAC;AAEDjC,gBAAgB,CAACM,SAAS,CAACyB,OAAO,GAAG,YAAY;EAC/C,IAAI,CAAC9B,aAAa,GAAG,IAAI,CAACA,aAAa,IAAI,IAAI,CAACA,aAAa,CAAC8B,OAAO,CAAC,CAAC;EACvE,OAAOvC,aAAa,CAAC,IAAI,CAAC;AAC5B,CAAC;AACD,eAAeQ,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}