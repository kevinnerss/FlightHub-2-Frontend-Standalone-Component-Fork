{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  ref: \"container\",\n  class: \"dji-space-component-container\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"loading-placeholder\"\n};\nconst _hoisted_3 = {\n  key: 1,\n  class: \"error-placeholder\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [$data.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [...(_cache[0] || (_cache[0] = [_createElementVNode(\"p\", null, \"组件加载中...\", -1 /* CACHED */)]))])) : _createCommentVNode(\"v-if\", true), $data.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createElementVNode(\"p\", null, \"组件加载失败: \" + _toDisplayString($data.error), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true)], 512 /* NEED_PATCH */);\n}","map":{"version":3,"names":["ref","class","_createElementBlock","_hoisted_1","$data","loading","_hoisted_2","_cache","_createElementVNode","error","_hoisted_3","_toDisplayString"],"sources":["D:\\projects\\FlightHub-2-Frontend-Standalone-Component\\frontend\\src\\djispace-components\\DjiSpaceComponent.vue"],"sourcesContent":["<template>\n  <div ref=\"container\" class=\"dji-space-component-container\">\n    <div v-if=\"loading\" class=\"loading-placeholder\">\n      <p>组件加载中...</p>\n    </div>\n    <div v-if=\"error\" class=\"error-placeholder\">\n      <p>组件加载失败: {{ error }}</p>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'DjiSpaceComponent',\n  props: {\n    componentName: {\n      type: String,\n      required: true\n    },\n    componentProps: {\n      type: Object,\n      default: () => ({})\n    },\n    config: {\n      type: Object,\n      required: true\n    }\n  },\n  data() {\n    return {\n      loading: false,\n      error: null,\n      loaded: false\n    }\n  },\n  mounted() {\n    this.initComponent()\n  },\n  beforeUnmount() {\n    // 清理组件\n    if (this.loaded && window.FH2 && this.$refs.container) {\n      this.$refs.container.innerHTML = ''\n    }\n  },\n  methods: {\n    async initComponent() {\n      this.loading = true\n      this.error = null\n      \n      try {\n        // 检查FH2是否存在\n        if (!window.FH2) {\n          throw new Error('FH2未正确加载，请检查paas.js是否正确引入')\n        }\n        \n        // 初始化配置\n        if (this.config) {\n          window.FH2.initConfig(this.config)\n        }\n        \n        // 等待DOM更新\n        await this.$nextTick()\n        \n        // 生成唯一的容器ID\n        const containerId = `dji-component-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\n        this.$refs.container.id = containerId\n        \n        // 根据组件名称加载对应组件\n        switch (this.componentName) {\n          case 'project':\n            window.FH2.loadProject(containerId)\n            break\n          case 'cockpit':\n            window.FH2.loadCockpit(containerId, this.componentProps)\n            break\n          case 'wayline':\n            window.FH2.loadWayline(containerId, this.componentProps)\n            break\n          case 'waylineCreation':\n            window.FH2.loadWaylineCreation(containerId)\n            break\n          default:\n            throw new Error(`不支持的组件名称: ${this.componentName}`)\n        }\n        \n        this.loaded = true\n      } catch (err) {\n        this.error = err.message\n        console.error('组件加载失败:', err)\n      } finally {\n        this.loading = false\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.dji-space-component-container {\n  width: 100%;\n  height: 100%;\n  position: relative;\n}\n\n.loading-placeholder,\n.error-placeholder {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  width: 100%;\n}\n\n.loading-placeholder p,\n.error-placeholder p {\n  font-size: 16px;\n  color: #666;\n}\n</style>"],"mappings":";;EACOA,GAAG,EAAC,WAAW;EAACC,KAAK,EAAC;;;;EACLA,KAAK,EAAC;;;;EAGRA,KAAK,EAAC;;;uBAJ1BC,mBAAA,CAOM,OAPNC,UAOM,GANOC,KAAA,CAAAC,OAAO,I,cAAlBH,mBAAA,CAEM,OAFNI,UAEM,OAAAC,MAAA,QAAAA,MAAA,OADJC,mBAAA,CAAe,WAAZ,UAAQ,mB,2CAEFJ,KAAA,CAAAK,KAAK,I,cAAhBP,mBAAA,CAEM,OAFNQ,UAEM,GADJF,mBAAA,CAA0B,WAAvB,UAAQ,GAAAG,gBAAA,CAAGP,KAAA,CAAAK,KAAK,iB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}