{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withCtx as _withCtx, resolveDirective as _resolveDirective, openBlock as _openBlock, createBlock as _createBlock, withDirectives as _withDirectives, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"wayline-list-container tech-border\"\n};\nconst _hoisted_2 = {\n  class: \"table-wrapper\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _directive_loading = _resolveDirective(\"loading\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[0] || (_cache[0] = _createElementVNode(\"div\", {\n    class: \"header-actions\"\n  }, [_createCommentVNode(\" <h2 class=\\\"title\\\">航线列表</h2> \")], -1 /* CACHED */)), _createCommentVNode(\" 航线列表 - 添加overflow-x控制 \"), _createElementVNode(\"div\", _hoisted_2, [_withDirectives((_openBlock(), _createBlock(_component_el_table, {\n    data: $data.waylines,\n    style: {\n      \"width\": \"100%\"\n    },\n    border: \"\",\n    \"empty-text\": \"暂无航线数据\",\n    fit: true,\n    \"max-height\": 300,\n    \"row-class-name\": $options.tableRowClassName,\n    onRowClick: $options.handleRowClick,\n    class: \"tech-table\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_table_column, {\n      prop: \"id\",\n      label: \"ID\",\n      \"min-width\": \"60\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"name\",\n      label: \"航线名称\",\n      \"min-width\": \"180\",\n      \"show-overflow-tooltip\": \"\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"estimated_duration\",\n      label: \"预计时间(秒)\",\n      \"min-width\": \"120\"\n    }, {\n      default: _withCtx(({\n        row\n      }) => [_createTextVNode(_toDisplayString(row?.estimated_duration || '-'), 1 /* TEXT */)]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"data\", \"row-class-name\", \"onRowClick\"])), [[_directive_loading, $data.loading]])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_createCommentVNode","_hoisted_2","_createBlock","_component_el_table","data","$data","waylines","style","border","fit","$options","tableRowClassName","onRowClick","handleRowClick","_createVNode","_component_el_table_column","prop","label","default","_withCtx","row","estimated_duration","loading"],"sources":["D:\\projects\\FlightHub-2-Frontend-Standalone-Component\\frontend\\src\\components\\WaylineList.vue"],"sourcesContent":["<template>\n  <div class=\"wayline-list-container tech-border\">\n    <div class=\"header-actions\">\n      <!-- <h2 class=\"title\">航线列表</h2> -->\n    </div>\n    \n    <!-- 航线列表 - 添加overflow-x控制 -->\n    <div class=\"table-wrapper\">\n      <el-table\n        v-loading=\"loading\"\n        :data=\"waylines\"\n        style=\"width: 100%\"\n        border\n        empty-text=\"暂无航线数据\"\n        :fit=\"true\"\n        :max-height=\"300\"\n        :row-class-name=\"tableRowClassName\"\n        @row-click=\"handleRowClick\"\n        class=\"tech-table\"\n      >\n      <el-table-column prop=\"id\" label=\"ID\" min-width=\"60\" />\n      <el-table-column prop=\"name\" label=\"航线名称\" min-width=\"180\" show-overflow-tooltip />\n      <el-table-column prop=\"estimated_duration\" label=\"预计时间(秒)\" min-width=\"120\">\n        <template #default=\"{row}\">\n          {{ row?.estimated_duration || '-' }}\n        </template>\n      </el-table-column>\n    </el-table>\n    </div>\n  </div>\n</template>\n\n<script>\nimport waylineApi from '../api/waylineApi'\n\nexport default {\n  name: 'WaylineList',\n  props: {\n    currentSelectedId: {\n      type: Number,\n      default: null\n    }\n  },\n  emits: ['wayline-selected'],\n  data() {\n    return {\n      waylines: [],\n      loading: false\n    }\n  },\n  async mounted() {\n    await this.loadWaylines()\n  },\n  methods: {\n    async loadWaylines() {\n      this.loading = true\n      try {\n        const response = await waylineApi.getWaylines({})\n        \n        // 转换数据格式，只保留需要的字段\n        this.waylines = (response?.results || []).map(wayline => ({\n          id: wayline.id,\n          name: wayline.name,\n          estimated_duration: wayline.estimated_duration\n        }))\n        \n        // 如果有航线数据且没有选中的航线，默认选择第一条\n        if (this.waylines.length > 0 && !this.currentSelectedId) {\n          this.$emit('wayline-selected', this.waylines[0])\n        }\n      } catch (error) {\n        this.$message.error('获取航线列表失败，显示模拟数据')\n        console.error('Load waylines error:', error)\n        \n        // 使用模拟数据，确保页面功能正常\n        let mockWaylines = [\n          {\n            id: 1,\n            wayline_id: 'WL001',\n            name: '电力巡检航线一',\n            description: '110kV输电线路常规巡检',\n            waypoints: [{lat: 39.9042, lng: 116.4074}, {lat: 39.9142, lng: 116.4174}],\n            length: 1250.5,\n            estimated_duration: 300,\n            status: 'ACTIVE',\n            created_by: 'admin',\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString()\n          },\n          {\n            id: 2,\n            wayline_id: 'WL002',\n            name: '桥梁检测航线',\n            description: '大跨度桥梁结构安全检测',\n            waypoints: [{lat: 39.9242, lng: 116.4274}, {lat: 39.9342, lng: 116.4374}],\n            length: 850.3,\n            estimated_duration: 180,\n            status: 'DRAFT',\n            created_by: 'user1',\n            created_at: new Date(Date.now() - 86400000).toISOString(),\n            updated_at: new Date(Date.now() - 86400000).toISOString()\n          },\n          {\n            id: 3,\n            wayline_id: 'WL003',\n            name: '河道巡查航线',\n            description: '城市河道水质监测与垃圾巡查',\n            waypoints: [{lat: 39.9442, lng: 116.4474}, {lat: 39.9542, lng: 116.4574}],\n            length: 2100.8,\n            estimated_duration: 420,\n            status: 'ARCHIVED',\n            created_by: 'admin',\n            created_at: new Date(Date.now() - 172800000).toISOString(),\n            updated_at: new Date(Date.now() - 172800000).toISOString()\n          }\n        ]\n        \n        // 当API调用失败时，在前端进行模拟过滤\n        if (this.searchQuery) {\n          const query = this.searchQuery.toLowerCase()\n          mockWaylines = mockWaylines.filter(wayline => \n            wayline.name.toLowerCase().includes(query) ||\n            wayline.wayline_id.toLowerCase().includes(query) ||\n            (wayline.description && wayline.description.toLowerCase().includes(query))\n          )\n        }\n        \n        if (this.statusFilter) {\n          mockWaylines = mockWaylines.filter(wayline => wayline.status === this.statusFilter)\n        }\n        \n        // 简化模拟数据，只保留需要的字段\n        this.waylines = mockWaylines.map(wayline => ({\n          id: wayline.id,\n          name: wayline.name,\n          estimated_duration: wayline.estimated_duration\n        }))\n        \n        // 如果有航线数据且没有选中的航线，默认选择第一条\n        if (this.waylines.length > 0 && !this.currentSelectedId) {\n          this.$emit('wayline-selected', this.waylines[0])\n        }\n      } finally {\n        this.loading = false\n      }\n    },\n    \n    // 行点击事件处理\n    handleRowClick(row) {\n      this.$emit('wayline-selected', row)\n    },\n    \n    // 为选中的行添加特殊样式\n    tableRowClassName({row}) {\n      return row.id === this.currentSelectedId ? 'selected-row' : ''\n    }\n  }\n}\n</script>\n\n<style scoped>\n.wayline-list-container {\n  padding: 10px;\n  background: #0c4a6e;\n  border-radius: 4px;\n  width: 100%;\n  max-width: 100%;\n  box-sizing: border-box;\n  color: #e0f2fe;\n  overflow: hidden; /* 防止容器溢出 */\n}\n\n/* 添加表格包装器，控制水平滚动 */\n.table-wrapper {\n  width: 100%;\n  overflow-x: auto;\n  overflow-y: hidden;\n  box-sizing: border-box;\n}\n\n.header-actions {\n  margin-bottom: 15px;\n}\n\n.title {\n  margin: 0;\n  color: #0ea5e9;\n  font-size: 16px;\n}\n\n/* 为选中的行添加特殊样式 */\n:deep(.el-table__row.selected-row) {\n  background-color: #075985 !important;\n}\n\n:deep(.el-table__row.selected-row:hover) {\n  background-color: #0369a1 !important;\n}\n\n/* Element Plus 表格暗黑金属风格覆盖 */\n:deep(.el-table) {\n  --el-table-header-bg-color: #0c4a6e;\n  --el-table-header-text-color: #7dd3fc;\n  --el-table-row-hover-bg-color: #075985;\n  --el-table-border-color: #0ea5e9;\n  --el-table-text-color-primary: #e0f2fe;\n  --el-table-bg-color: #0c4a6e;\n  --el-table-empty-text-color: #7dd3fc;\n  border: 1px solid #0ea5e9;\n  box-shadow: 0 0 10px rgba(14, 165, 233, 0.2);\n}\n\n:deep(.el-table__header-wrapper th) {\n  border-bottom: 1px solid #0ea5e9;\n  color: #7dd3fc;\n  font-weight: 500;\n}\n\n:deep(.el-table__body-wrapper td) {\n  border-bottom: 1px solid #0ea5e9;\n  color: #e0f2fe;\n}\n\n:deep(.el-table__body-wrapper tr:not(.selected-row)) {\n  background-color: #0c4a6e;\n}\n\n:deep(.el-table__body-wrapper tr:not(.selected-row):hover) {\n  background-color: #075985;\n}\n\n/* 科技感表格边框 */\n.tech-table {\n  border: 1px solid #0ea5e9;\n  box-shadow: 0 0 10px rgba(14, 165, 233, 0.2);\n}\n</style>"],"mappings":";;EACOA,KAAK,EAAC;AAAoC;;EAMxCA,KAAK,EAAC;AAAe;;;;;uBAN5BC,mBAAA,CA4BM,OA5BNC,UA4BM,G,0BA3BJC,mBAAA,CAEM;IAFDH,KAAK,EAAC;EAAgB,IACzBI,mBAAA,mCAAoC,C,qBAGtCA,mBAAA,2BAA8B,EAC9BD,mBAAA,CAqBM,OArBNE,UAqBM,G,+BApBJC,YAAA,CAmBSC,mBAAA;IAjBNC,IAAI,EAAEC,KAAA,CAAAC,QAAQ;IACfC,KAAmB,EAAnB;MAAA;IAAA,CAAmB;IACnBC,MAAM,EAAN,EAAM;IACN,YAAU,EAAC,QAAQ;IAClBC,GAAG,EAAE,IAAI;IACT,YAAU,EAAE,GAAG;IACf,gBAAc,EAAEC,QAAA,CAAAC,iBAAiB;IACjCC,UAAS,EAAEF,QAAA,CAAAG,cAAc;IAC1BjB,KAAK,EAAC;;sBAER,MAAuD,CAAvDkB,YAAA,CAAuDC,0BAAA;MAAtCC,IAAI,EAAC,IAAI;MAACC,KAAK,EAAC,IAAI;MAAC,WAAS,EAAC;QAChDH,YAAA,CAAkFC,0BAAA;MAAjEC,IAAI,EAAC,MAAM;MAACC,KAAK,EAAC,MAAM;MAAC,WAAS,EAAC,KAAK;MAAC,uBAAqB,EAArB;QAC1DH,YAAA,CAIkBC,0BAAA;MAJDC,IAAI,EAAC,oBAAoB;MAACC,KAAK,EAAC,SAAS;MAAC,WAAS,EAAC;;MACxDC,OAAO,EAAAC,QAAA,CAChB,CAAoC;QADjBC;MAAG,O,kCACnBA,GAAG,EAAEC,kBAAkB,wB;;;;sFAfjBhB,KAAA,CAAAiB,OAAO,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}