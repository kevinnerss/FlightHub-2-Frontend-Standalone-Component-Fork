{"ast":null,"code":"import { defineComponent, getCurrentInstance, inject, ref, computed, openBlock, createBlock, unref, normalizeClass, withCtx, createElementBlock, Fragment, renderList, createVNode, createTextVNode, toDisplayString, renderSlot, createCommentVNode } from 'vue';\nimport { ElScrollbar } from '../../scrollbar/index.mjs';\nimport { Loading } from '@element-plus/icons-vue';\nimport { ElIcon } from '../../icon/index.mjs';\nimport ElCascaderNode from './node2.mjs';\nimport { CASCADER_PANEL_INJECTION_KEY } from './types.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { useLocale } from '../../../hooks/use-locale/index.mjs';\nimport { useId } from '../../../hooks/use-id/index.mjs';\nconst __default__ = defineComponent({\n  name: \"ElCascaderMenu\"\n});\nconst _sfc_main = /* @__PURE__ */defineComponent({\n  ...__default__,\n  props: {\n    nodes: {\n      type: Array,\n      required: true\n    },\n    index: {\n      type: Number,\n      required: true\n    }\n  },\n  setup(__props) {\n    const props = __props;\n    const instance = getCurrentInstance();\n    const ns = useNamespace(\"cascader-menu\");\n    const {\n      t\n    } = useLocale();\n    const id = useId();\n    let activeNode;\n    let hoverTimer;\n    const panel = inject(CASCADER_PANEL_INJECTION_KEY);\n    const hoverZone = ref();\n    const isEmpty = computed(() => !props.nodes.length);\n    const isLoading = computed(() => !panel.initialLoaded);\n    const menuId = computed(() => `${id.value}-${props.index}`);\n    const handleExpand = e => {\n      activeNode = e.target;\n    };\n    const handleMouseMove = e => {\n      if (!panel.isHoverMenu || !activeNode || !hoverZone.value) return;\n      if (activeNode.contains(e.target)) {\n        clearHoverTimer();\n        const el = instance.vnode.el;\n        const {\n          left\n        } = el.getBoundingClientRect();\n        const {\n          offsetWidth,\n          offsetHeight\n        } = el;\n        const startX = e.clientX - left;\n        const top = activeNode.offsetTop;\n        const bottom = top + activeNode.offsetHeight;\n        hoverZone.value.innerHTML = `\n          <path style=\"pointer-events: auto;\" fill=\"transparent\" d=\"M${startX} ${top} L${offsetWidth} 0 V${top} Z\" />\n          <path style=\"pointer-events: auto;\" fill=\"transparent\" d=\"M${startX} ${bottom} L${offsetWidth} ${offsetHeight} V${bottom} Z\" />\n        `;\n      } else if (!hoverTimer) {\n        hoverTimer = window.setTimeout(clearHoverZone, panel.config.hoverThreshold);\n      }\n    };\n    const clearHoverTimer = () => {\n      if (!hoverTimer) return;\n      clearTimeout(hoverTimer);\n      hoverTimer = void 0;\n    };\n    const clearHoverZone = () => {\n      if (!hoverZone.value) return;\n      hoverZone.value.innerHTML = \"\";\n      clearHoverTimer();\n    };\n    return (_ctx, _cache) => {\n      return openBlock(), createBlock(unref(ElScrollbar), {\n        key: unref(menuId),\n        tag: \"ul\",\n        role: \"menu\",\n        class: normalizeClass(unref(ns).b()),\n        \"wrap-class\": unref(ns).e(\"wrap\"),\n        \"view-class\": [unref(ns).e(\"list\"), unref(ns).is(\"empty\", unref(isEmpty))],\n        onMousemove: handleMouseMove,\n        onMouseleave: clearHoverZone\n      }, {\n        default: withCtx(() => {\n          var _a;\n          return [(openBlock(true), createElementBlock(Fragment, null, renderList(__props.nodes, node => {\n            return openBlock(), createBlock(ElCascaderNode, {\n              key: node.uid,\n              node,\n              \"menu-id\": unref(menuId),\n              onExpand: handleExpand\n            }, null, 8, [\"node\", \"menu-id\"]);\n          }), 128)), unref(isLoading) ? (openBlock(), createElementBlock(\"div\", {\n            key: 0,\n            class: normalizeClass(unref(ns).e(\"empty-text\"))\n          }, [createVNode(unref(ElIcon), {\n            size: \"14\",\n            class: normalizeClass(unref(ns).is(\"loading\"))\n          }, {\n            default: withCtx(() => [createVNode(unref(Loading))]),\n            _: 1\n          }, 8, [\"class\"]), createTextVNode(\" \" + toDisplayString(unref(t)(\"el.cascader.loading\")), 1)], 2)) : unref(isEmpty) ? (openBlock(), createElementBlock(\"div\", {\n            key: 1,\n            class: normalizeClass(unref(ns).e(\"empty-text\"))\n          }, [renderSlot(_ctx.$slots, \"empty\", {}, () => [createTextVNode(toDisplayString(unref(t)(\"el.cascader.noData\")), 1)])], 2)) : ((_a = unref(panel)) == null ? void 0 : _a.isHoverMenu) ? (openBlock(), createElementBlock(Fragment, {\n            key: 2\n          }, [createCommentVNode(\" eslint-disable-next-line vue/html-self-closing \"), (openBlock(), createElementBlock(\"svg\", {\n            ref_key: \"hoverZone\",\n            ref: hoverZone,\n            class: normalizeClass(unref(ns).e(\"hover-zone\"))\n          }, null, 2))], 2112)) : createCommentVNode(\"v-if\", true)];\n        }),\n        _: 3\n      }, 8, [\"class\", \"wrap-class\", \"view-class\"]);\n    };\n  }\n});\nvar ElCascaderMenu = /* @__PURE__ */_export_sfc(_sfc_main, [[\"__file\", \"menu.vue\"]]);\nexport { ElCascaderMenu as default };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}