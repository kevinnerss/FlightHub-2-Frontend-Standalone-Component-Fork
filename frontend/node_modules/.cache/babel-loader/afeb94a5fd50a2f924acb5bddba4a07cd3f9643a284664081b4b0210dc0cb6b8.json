{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport waylineApi from '../api/waylineApi';\nexport default {\n  name: 'WaylineList',\n  props: {\n    currentSelectedId: {\n      type: Number,\n      default: null\n    }\n  },\n  emits: ['wayline-selected'],\n  data() {\n    return {\n      waylines: [],\n      loading: false\n    };\n  },\n  async mounted() {\n    await this.loadWaylines();\n  },\n  methods: {\n    async loadWaylines() {\n      this.loading = true;\n      try {\n        const response = await waylineApi.getWaylines({});\n\n        // 转换数据格式，只保留需要的字段\n        this.waylines = (response?.results || []).map(wayline => ({\n          id: wayline.id,\n          name: wayline.name,\n          estimated_duration: wayline.estimated_duration\n        }));\n\n        // 如果有航线数据且没有选中的航线，默认选择第一条\n        if (this.waylines.length > 0 && !this.currentSelectedId) {\n          this.$emit('wayline-selected', this.waylines[0]);\n        }\n      } catch (error) {\n        this.$message.error('获取航线列表失败，显示模拟数据');\n        console.error('Load waylines error:', error);\n\n        // 使用模拟数据，确保页面功能正常\n        let mockWaylines = [{\n          id: 1,\n          wayline_id: 'WL001',\n          name: '电力巡检航线一',\n          description: '110kV输电线路常规巡检',\n          waypoints: [{\n            lat: 39.9042,\n            lng: 116.4074\n          }, {\n            lat: 39.9142,\n            lng: 116.4174\n          }],\n          length: 1250.5,\n          estimated_duration: 300,\n          status: 'ACTIVE',\n          created_by: 'admin',\n          created_at: new Date().toISOString(),\n          updated_at: new Date().toISOString()\n        }, {\n          id: 2,\n          wayline_id: 'WL002',\n          name: '桥梁检测航线',\n          description: '大跨度桥梁结构安全检测',\n          waypoints: [{\n            lat: 39.9242,\n            lng: 116.4274\n          }, {\n            lat: 39.9342,\n            lng: 116.4374\n          }],\n          length: 850.3,\n          estimated_duration: 180,\n          status: 'DRAFT',\n          created_by: 'user1',\n          created_at: new Date(Date.now() - 86400000).toISOString(),\n          updated_at: new Date(Date.now() - 86400000).toISOString()\n        }, {\n          id: 3,\n          wayline_id: 'WL003',\n          name: '河道巡查航线',\n          description: '城市河道水质监测与垃圾巡查',\n          waypoints: [{\n            lat: 39.9442,\n            lng: 116.4474\n          }, {\n            lat: 39.9542,\n            lng: 116.4574\n          }],\n          length: 2100.8,\n          estimated_duration: 420,\n          status: 'ARCHIVED',\n          created_by: 'admin',\n          created_at: new Date(Date.now() - 172800000).toISOString(),\n          updated_at: new Date(Date.now() - 172800000).toISOString()\n        }];\n\n        // 当API调用失败时，在前端进行模拟过滤\n        if (this.searchQuery) {\n          const query = this.searchQuery.toLowerCase();\n          mockWaylines = mockWaylines.filter(wayline => wayline.name.toLowerCase().includes(query) || wayline.wayline_id.toLowerCase().includes(query) || wayline.description && wayline.description.toLowerCase().includes(query));\n        }\n        if (this.statusFilter) {\n          mockWaylines = mockWaylines.filter(wayline => wayline.status === this.statusFilter);\n        }\n\n        // 简化模拟数据，只保留需要的字段\n        this.waylines = mockWaylines.map(wayline => ({\n          id: wayline.id,\n          name: wayline.name,\n          estimated_duration: wayline.estimated_duration\n        }));\n\n        // 如果有航线数据且没有选中的航线，默认选择第一条\n        if (this.waylines.length > 0 && !this.currentSelectedId) {\n          this.$emit('wayline-selected', this.waylines[0]);\n        }\n      } finally {\n        this.loading = false;\n      }\n    },\n    // 行点击事件处理\n    handleRowClick(row) {\n      this.$emit('wayline-selected', row);\n    },\n    // 为选中的行添加特殊样式\n    tableRowClassName({\n      row\n    }) {\n      return row.id === this.currentSelectedId ? 'selected-row' : '';\n    }\n  }\n};","map":{"version":3,"names":["waylineApi","name","props","currentSelectedId","type","Number","default","emits","data","waylines","loading","mounted","loadWaylines","methods","response","getWaylines","results","map","wayline","id","estimated_duration","length","$emit","error","$message","console","mockWaylines","wayline_id","description","waypoints","lat","lng","status","created_by","created_at","Date","toISOString","updated_at","now","searchQuery","query","toLowerCase","filter","includes","statusFilter","handleRowClick","row","tableRowClassName"],"sources":["D:\\projects\\FlightHub-2-Frontend-Standalone-Component\\frontend\\src\\components\\WaylineList.vue"],"sourcesContent":["<template>\n  <div class=\"wayline-list-container\">\n    <div class=\"header-actions\">\n      <!-- <h2 class=\"title\">航线列表</h2> -->\n    </div>\n    \n    <!-- 航线列表 -->\n    <el-table\n      v-loading=\"loading\"\n      :data=\"waylines\"\n      style=\"width: 100%\"\n      border\n      empty-text=\"暂无航线数据\"\n      :fit=\"true\"\n      :row-class-name=\"tableRowClassName\"\n      @row-click=\"handleRowClick\"\n    >\n      <el-table-column prop=\"id\" label=\"ID\" min-width=\"60\" />\n      <el-table-column prop=\"name\" label=\"航线名称\" min-width=\"180\" show-overflow-tooltip />\n      <el-table-column prop=\"estimated_duration\" label=\"预计时间(秒)\" min-width=\"120\">\n        <template #default=\"{row}\">\n          {{ row?.estimated_duration || '-' }}\n        </template>\n      </el-table-column>\n    </el-table>\n  </div>\n</template>\n\n<script>\nimport waylineApi from '../api/waylineApi'\n\nexport default {\n  name: 'WaylineList',\n  props: {\n    currentSelectedId: {\n      type: Number,\n      default: null\n    }\n  },\n  emits: ['wayline-selected'],\n  data() {\n    return {\n      waylines: [],\n      loading: false\n    }\n  },\n  async mounted() {\n    await this.loadWaylines()\n  },\n  methods: {\n    async loadWaylines() {\n      this.loading = true\n      try {\n        const response = await waylineApi.getWaylines({})\n        \n        // 转换数据格式，只保留需要的字段\n        this.waylines = (response?.results || []).map(wayline => ({\n          id: wayline.id,\n          name: wayline.name,\n          estimated_duration: wayline.estimated_duration\n        }))\n        \n        // 如果有航线数据且没有选中的航线，默认选择第一条\n        if (this.waylines.length > 0 && !this.currentSelectedId) {\n          this.$emit('wayline-selected', this.waylines[0])\n        }\n      } catch (error) {\n        this.$message.error('获取航线列表失败，显示模拟数据')\n        console.error('Load waylines error:', error)\n        \n        // 使用模拟数据，确保页面功能正常\n        let mockWaylines = [\n          {\n            id: 1,\n            wayline_id: 'WL001',\n            name: '电力巡检航线一',\n            description: '110kV输电线路常规巡检',\n            waypoints: [{lat: 39.9042, lng: 116.4074}, {lat: 39.9142, lng: 116.4174}],\n            length: 1250.5,\n            estimated_duration: 300,\n            status: 'ACTIVE',\n            created_by: 'admin',\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString()\n          },\n          {\n            id: 2,\n            wayline_id: 'WL002',\n            name: '桥梁检测航线',\n            description: '大跨度桥梁结构安全检测',\n            waypoints: [{lat: 39.9242, lng: 116.4274}, {lat: 39.9342, lng: 116.4374}],\n            length: 850.3,\n            estimated_duration: 180,\n            status: 'DRAFT',\n            created_by: 'user1',\n            created_at: new Date(Date.now() - 86400000).toISOString(),\n            updated_at: new Date(Date.now() - 86400000).toISOString()\n          },\n          {\n            id: 3,\n            wayline_id: 'WL003',\n            name: '河道巡查航线',\n            description: '城市河道水质监测与垃圾巡查',\n            waypoints: [{lat: 39.9442, lng: 116.4474}, {lat: 39.9542, lng: 116.4574}],\n            length: 2100.8,\n            estimated_duration: 420,\n            status: 'ARCHIVED',\n            created_by: 'admin',\n            created_at: new Date(Date.now() - 172800000).toISOString(),\n            updated_at: new Date(Date.now() - 172800000).toISOString()\n          }\n        ]\n        \n        // 当API调用失败时，在前端进行模拟过滤\n        if (this.searchQuery) {\n          const query = this.searchQuery.toLowerCase()\n          mockWaylines = mockWaylines.filter(wayline => \n            wayline.name.toLowerCase().includes(query) ||\n            wayline.wayline_id.toLowerCase().includes(query) ||\n            (wayline.description && wayline.description.toLowerCase().includes(query))\n          )\n        }\n        \n        if (this.statusFilter) {\n          mockWaylines = mockWaylines.filter(wayline => wayline.status === this.statusFilter)\n        }\n        \n        // 简化模拟数据，只保留需要的字段\n        this.waylines = mockWaylines.map(wayline => ({\n          id: wayline.id,\n          name: wayline.name,\n          estimated_duration: wayline.estimated_duration\n        }))\n        \n        // 如果有航线数据且没有选中的航线，默认选择第一条\n        if (this.waylines.length > 0 && !this.currentSelectedId) {\n          this.$emit('wayline-selected', this.waylines[0])\n        }\n      } finally {\n        this.loading = false\n      }\n    },\n    \n    // 行点击事件处理\n    handleRowClick(row) {\n      this.$emit('wayline-selected', row)\n    },\n    \n    // 为选中的行添加特殊样式\n    tableRowClassName({row}) {\n      return row.id === this.currentSelectedId ? 'selected-row' : ''\n    }\n  }\n}\n</script>\n\n<style scoped>\n.wayline-list-container {\n  padding: 10px;\n  background: #fff;\n  border-radius: 4px;\n  width: 100%;\n  max-width: 100%;\n  box-sizing: border-box;\n}\n\n.header-actions {\n  margin-bottom: 15px;\n}\n\n.title {\n  margin: 0;\n  color: #303133;\n  font-size: 16px;\n}\n\n/* 为选中的行添加特殊样式 */\n:deep(.el-table__row.selected-row) {\n  background-color: #e6f7ff !important;\n}\n\n:deep(.el-table__row.selected-row:hover) {\n  background-color: #bae7ff !important;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}