{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport { computed, ref, watch, onBeforeUnmount } from 'vue';\nimport { useWindowSize, clamp, useEventListener } from '@vueuse/core';\nimport { addUnit } from '../../../../utils/dom/style.mjs';\nfunction useResizable(props, target) {\n  const {\n    width,\n    height\n  } = useWindowSize();\n  const isHorizontal = computed(() => [\"ltr\", \"rtl\"].includes(props.direction));\n  const sign = computed(() => [\"ltr\", \"ttb\"].includes(props.direction) ? 1 : -1);\n  const windowSize = computed(() => isHorizontal.value ? width.value : height.value);\n  const getSize = computed(() => {\n    return clamp(startSize.value + sign.value * offset.value, 4, windowSize.value);\n  });\n  const startSize = ref(0);\n  const offset = ref(0);\n  const isResizing = ref(false);\n  const hasStartedDragging = ref(false);\n  let startPos = [];\n  let cleanups = [];\n  const getActualSize = () => {\n    var _a;\n    const drawerEl = (_a = target.value) == null ? void 0 : _a.closest('[aria-modal=\"true\"]');\n    if (drawerEl) {\n      return isHorizontal.value ? drawerEl.offsetWidth : drawerEl.offsetHeight;\n    }\n    return 100;\n  };\n  watch(() => [props.size, props.resizable], () => {\n    hasStartedDragging.value = false;\n    startSize.value = 0;\n    offset.value = 0;\n    onMouseUp();\n  });\n  const onMousedown = e => {\n    if (!props.resizable) return;\n    if (!hasStartedDragging.value) {\n      startSize.value = getActualSize();\n      hasStartedDragging.value = true;\n    }\n    startPos = [e.pageX, e.pageY];\n    isResizing.value = true;\n    cleanups.push(useEventListener(window, \"mouseup\", onMouseUp), useEventListener(window, \"mousemove\", onMouseMove));\n  };\n  const onMouseMove = e => {\n    const {\n      pageX,\n      pageY\n    } = e;\n    const offsetX = pageX - startPos[0];\n    const offsetY = pageY - startPos[1];\n    offset.value = isHorizontal.value ? offsetX : offsetY;\n  };\n  const onMouseUp = () => {\n    startPos = [];\n    startSize.value = getSize.value;\n    offset.value = 0;\n    isResizing.value = false;\n    cleanups.forEach(cleanup2 => cleanup2 == null ? void 0 : cleanup2());\n    cleanups = [];\n  };\n  const cleanup = useEventListener(target, \"mousedown\", onMousedown);\n  onBeforeUnmount(() => {\n    cleanup();\n    onMouseUp();\n  });\n  return {\n    size: computed(() => {\n      return hasStartedDragging.value ? `${getSize.value}px` : addUnit(props.size);\n    }),\n    isResizing,\n    isHorizontal\n  };\n}\nexport { useResizable };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}