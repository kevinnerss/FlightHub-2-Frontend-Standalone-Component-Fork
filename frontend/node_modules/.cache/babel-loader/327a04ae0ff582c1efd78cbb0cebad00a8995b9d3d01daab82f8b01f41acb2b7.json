{"ast":null,"code":"import { defineComponent, ref, inject, onMounted, nextTick, watch, provide, computed, openBlock, createElementBlock, normalizeClass, unref, createElementVNode, createVNode, createBlock, createCommentVNode, renderSlot } from 'vue';\nimport { ElInput } from '../../input/index.mjs';\nimport AlphaSlider from './components/alpha-slider.mjs';\nimport HueSlider from './components/hue-slider.mjs';\nimport Predefine from './components/predefine.mjs';\nimport SvPanel from './components/sv-panel.mjs';\nimport { colorPickerPanelProps, colorPickerPanelEmits, ROOT_COMMON_COLOR_INJECTION_KEY, colorPickerPanelContextKey } from './color-picker-panel.mjs';\nimport { useCommonColor } from './composables/use-common-color.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { useFormDisabled } from '../../form/src/hooks/use-form-common-props.mjs';\nimport { UPDATE_MODEL_EVENT } from '../../../constants/event.mjs';\nconst __default__ = defineComponent({\n  name: \"ElColorPickerPanel\"\n});\nconst _sfc_main = /* @__PURE__ */defineComponent({\n  ...__default__,\n  props: colorPickerPanelProps,\n  emits: colorPickerPanelEmits,\n  setup(__props, {\n    expose,\n    emit\n  }) {\n    const props = __props;\n    const ns = useNamespace(\"color-picker-panel\");\n    const disabled = useFormDisabled();\n    const hueRef = ref();\n    const svRef = ref();\n    const alphaRef = ref();\n    const inputRef = ref();\n    const customInput = ref(\"\");\n    const {\n      color\n    } = inject(ROOT_COMMON_COLOR_INJECTION_KEY, () => useCommonColor(props, emit), true);\n    function handleConfirm() {\n      color.fromString(customInput.value);\n      if (color.value !== customInput.value) {\n        customInput.value = color.value;\n      }\n    }\n    function update() {\n      var _a, _b, _c;\n      (_a = hueRef.value) == null ? void 0 : _a.update();\n      (_b = svRef.value) == null ? void 0 : _b.update();\n      (_c = alphaRef.value) == null ? void 0 : _c.update();\n    }\n    onMounted(() => {\n      if (props.modelValue) {\n        customInput.value = color.value;\n      }\n      nextTick(update);\n    });\n    watch(() => props.modelValue, newVal => {\n      if (newVal !== color.value) {\n        newVal ? color.fromString(newVal) : color.clear();\n      }\n    });\n    watch(() => color.value, val => {\n      emit(UPDATE_MODEL_EVENT, val);\n      customInput.value = val;\n    });\n    provide(colorPickerPanelContextKey, {\n      currentColor: computed(() => color.value)\n    });\n    expose({\n      color,\n      inputRef,\n      update\n    });\n    return (_ctx, _cache) => {\n      return openBlock(), createElementBlock(\"div\", {\n        class: normalizeClass([unref(ns).b(), unref(ns).is(\"disabled\", unref(disabled)), unref(ns).is(\"border\", _ctx.border)])\n      }, [createElementVNode(\"div\", {\n        class: normalizeClass(unref(ns).e(\"wrapper\"))\n      }, [createVNode(HueSlider, {\n        ref_key: \"hueRef\",\n        ref: hueRef,\n        class: \"hue-slider\",\n        color: unref(color),\n        vertical: \"\",\n        disabled: unref(disabled)\n      }, null, 8, [\"color\", \"disabled\"]), createVNode(SvPanel, {\n        ref_key: \"svRef\",\n        ref: svRef,\n        color: unref(color),\n        disabled: unref(disabled)\n      }, null, 8, [\"color\", \"disabled\"])], 2), _ctx.showAlpha ? (openBlock(), createBlock(AlphaSlider, {\n        key: 0,\n        ref_key: \"alphaRef\",\n        ref: alphaRef,\n        color: unref(color),\n        disabled: unref(disabled)\n      }, null, 8, [\"color\", \"disabled\"])) : createCommentVNode(\"v-if\", true), _ctx.predefine ? (openBlock(), createBlock(Predefine, {\n        key: 1,\n        ref: \"predefine\",\n        \"enable-alpha\": _ctx.showAlpha,\n        color: unref(color),\n        colors: _ctx.predefine,\n        disabled: unref(disabled)\n      }, null, 8, [\"enable-alpha\", \"color\", \"colors\", \"disabled\"])) : createCommentVNode(\"v-if\", true), createElementVNode(\"div\", {\n        class: normalizeClass(unref(ns).e(\"footer\"))\n      }, [createVNode(unref(ElInput), {\n        ref_key: \"inputRef\",\n        ref: inputRef,\n        modelValue: customInput.value,\n        \"onUpdate:modelValue\": $event => customInput.value = $event,\n        \"validate-event\": false,\n        size: \"small\",\n        disabled: unref(disabled),\n        onChange: handleConfirm\n      }, null, 8, [\"modelValue\", \"onUpdate:modelValue\", \"disabled\"]), renderSlot(_ctx.$slots, \"footer\")], 2)], 2);\n    };\n  }\n});\nvar ColorPickerPanel = /* @__PURE__ */_export_sfc(_sfc_main, [[\"__file\", \"color-picker-panel.vue\"]]);\nexport { ColorPickerPanel as default };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}