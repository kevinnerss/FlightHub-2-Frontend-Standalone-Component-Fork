{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.every.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport { getCurrentInstance, inject, ref, computed } from 'vue';\nimport { isEqual } from 'lodash-unified';\nimport { buildProps, definePropType } from '../../utils/vue/props/runtime.mjs';\nimport { isFunction, isArray } from '@vue/shared';\nconst emptyValuesContextKey = Symbol(\"emptyValuesContextKey\");\nconst SCOPE = \"use-empty-values\";\nconst DEFAULT_EMPTY_VALUES = [\"\", void 0, null];\nconst DEFAULT_VALUE_ON_CLEAR = void 0;\nconst useEmptyValuesProps = buildProps({\n  emptyValues: Array,\n  valueOnClear: {\n    type: definePropType([String, Number, Boolean, Function]),\n    default: void 0,\n    validator: val => {\n      val = isFunction(val) ? val() : val;\n      if (isArray(val)) {\n        return val.every(item => !item);\n      }\n      return !val;\n    }\n  }\n});\nconst useEmptyValues = (props, defaultValue) => {\n  const config = getCurrentInstance() ? inject(emptyValuesContextKey, ref({})) : ref({});\n  const emptyValues = computed(() => props.emptyValues || config.value.emptyValues || DEFAULT_EMPTY_VALUES);\n  const valueOnClear = computed(() => {\n    if (isFunction(props.valueOnClear)) {\n      return props.valueOnClear();\n    } else if (props.valueOnClear !== void 0) {\n      return props.valueOnClear;\n    } else if (isFunction(config.value.valueOnClear)) {\n      return config.value.valueOnClear();\n    } else if (config.value.valueOnClear !== void 0) {\n      return config.value.valueOnClear;\n    }\n    return defaultValue !== void 0 ? defaultValue : DEFAULT_VALUE_ON_CLEAR;\n  });\n  const isEmptyValue = value => {\n    let result = true;\n    if (isArray(value)) {\n      result = emptyValues.value.some(emptyValue => {\n        return isEqual(value, emptyValue);\n      });\n    } else {\n      result = emptyValues.value.includes(value);\n    }\n    return result;\n  };\n  if (!isEmptyValue(valueOnClear.value)) ;\n  return {\n    emptyValues,\n    valueOnClear,\n    isEmptyValue\n  };\n};\nexport { DEFAULT_EMPTY_VALUES, DEFAULT_VALUE_ON_CLEAR, SCOPE, emptyValuesContextKey, useEmptyValues, useEmptyValuesProps };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}