{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"user-management-container\"\n};\nconst _hoisted_2 = {\n  class: \"page-header\"\n};\nconst _hoisted_3 = {\n  class: \"search-filter\"\n};\nconst _hoisted_4 = {\n  class: \"user-table-wrapper\"\n};\nconst _hoisted_5 = {\n  key: 0\n};\nconst _hoisted_6 = {\n  key: 1,\n  class: \"admin-actions\"\n};\nconst _hoisted_7 = {\n  key: 0,\n  class: \"password-tip\"\n};\nconst _hoisted_8 = {\n  class: \"delete-confirm-content\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_tag = _resolveComponent(\"el-tag\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_pagination = _resolveComponent(\"el-pagination\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_option = _resolveComponent(\"el-option\");\n  const _component_el_select = _resolveComponent(\"el-select\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[9] || (_cache[9] = _createElementVNode(\"h1\", {\n    class: \"page-title\"\n  }, \"人员管理\", -1 /* CACHED */)), _createVNode(_component_el_button, {\n    type: \"primary\",\n    onClick: $setup.showAddUserDialog,\n    class: \"add-user-btn\"\n  }, {\n    default: _withCtx(() => [...(_cache[8] || (_cache[8] = [_createTextVNode(\" 添加用户 \", -1 /* CACHED */)]))]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onClick\"])]), _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_el_input, {\n    modelValue: $setup.searchQuery,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.searchQuery = $event),\n    placeholder: \"搜索账号或姓名\",\n    \"prefix-icon\": \"el-icon-search\",\n    clearable: \"\",\n    class: \"search-input\",\n    onInput: $setup.handleSearch\n  }, null, 8 /* PROPS */, [\"modelValue\", \"onInput\"])]), _createElementVNode(\"div\", _hoisted_4, [_createVNode(_component_el_table, {\n    data: $setup.allUsers,\n    style: {\n      \"width\": \"100%\"\n    },\n    stripe: \"\",\n    border: \"\",\n    class: \"user-table\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_table_column, {\n      prop: \"id\",\n      label: \"ID\",\n      width: \"80\",\n      align: \"center\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"username\",\n      label: \"账号\",\n      width: \"180\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"name\",\n      label: \"姓名\",\n      width: \"180\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"role\",\n      label: \"角色\",\n      width: \"120\",\n      align: \"center\"\n    }, {\n      default: _withCtx(({\n        row\n      }) => [_createVNode(_component_el_tag, {\n        type: row.role === 'admin' ? 'primary' : 'success',\n        effect: \"dark\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString(row.role === 'admin' ? '管理员' : '普通用户'), 1 /* TEXT */)]),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"type\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_table_column, {\n      prop: \"createdAt\",\n      label: \"创建时间\",\n      width: \"220\",\n      align: \"center\"\n    }, {\n      default: _withCtx(({\n        row: {\n          createdAt\n        }\n      }) => [_createTextVNode(_toDisplayString($setup.formatDate(createdAt)), 1 /* TEXT */)]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_table_column, {\n      label: \"操作\",\n      width: \"180\",\n      align: \"center\",\n      fixed: \"right\"\n    }, {\n      default: _withCtx(({\n        row\n      }) => [row.username !== 'admin' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createVNode(_component_el_button, {\n        type: \"primary\",\n        size: \"small\",\n        onClick: $event => $setup.showEditUserDialog(row),\n        plain: \"\",\n        disabled: row.username === 'admin'\n      }, {\n        default: _withCtx(() => [...(_cache[10] || (_cache[10] = [_createTextVNode(\" 编辑 \", -1 /* CACHED */)]))]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"onClick\", \"disabled\"]), _createVNode(_component_el_button, {\n        type: \"danger\",\n        size: \"small\",\n        onClick: $event => $setup.confirmDeleteUser(row),\n        disabled: row.username === 'admin'\n      }, {\n        default: _withCtx(() => [...(_cache[11] || (_cache[11] = [_createTextVNode(\" 删除 \", -1 /* CACHED */)]))]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"onClick\", \"disabled\"])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [...(_cache[12] || (_cache[12] = [_createElementVNode(\"span\", {\n        class: \"disabled-tip\"\n      }, \"系统管理员\", -1 /* CACHED */)]))]))]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"data\"]), _createCommentVNode(\" 分页组件 \"), _createVNode(_component_el_pagination, {\n    \"current-page\": $setup.currentPage,\n    \"page-size\": $setup.pageSize,\n    \"page-sizes\": [5, 10, 20, 50],\n    total: $setup.totalUsers,\n    layout: \"total, sizes, prev, pager, next, jumper\",\n    onSizeChange: $setup.handleSizeChange,\n    onCurrentChange: $setup.handlePageChange,\n    class: \"pagination\"\n  }, null, 8 /* PROPS */, [\"current-page\", \"page-size\", \"total\", \"onSizeChange\", \"onCurrentChange\"])]), _createCommentVNode(\" 添加/编辑用户对话框 \"), _createVNode(_component_el_dialog, {\n    modelValue: $setup.dialogVisible,\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $setup.dialogVisible = $event),\n    title: $setup.dialogTitle,\n    width: \"500px\",\n    \"close-on-click-modal\": false,\n    \"close-on-press-escape\": false\n  }, {\n    footer: _withCtx(() => [_createVNode(_component_el_button, {\n      onClick: $setup.closeDialog\n    }, {\n      default: _withCtx(() => [...(_cache[13] || (_cache[13] = [_createTextVNode(\"取消\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: $setup.submitForm,\n      loading: $setup.isSubmitting\n    }, {\n      default: _withCtx(() => [...(_cache[14] || (_cache[14] = [_createTextVNode(\" 确定 \", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\", \"loading\"])]),\n    default: _withCtx(() => [_createVNode(_component_el_form, {\n      model: $setup.formData,\n      rules: $setup.rules,\n      ref: \"userFormRef\",\n      \"label-width\": \"100px\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_form_item, {\n        label: \"账号\",\n        prop: \"username\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $setup.formData.username,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.formData.username = $event),\n          placeholder: \"请输入账号\",\n          disabled: $setup.editingUserId !== null\n        }, null, 8 /* PROPS */, [\"modelValue\", \"disabled\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"姓名\",\n        prop: \"name\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $setup.formData.name,\n          \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.formData.name = $event),\n          placeholder: \"请输入姓名\"\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"密码\",\n        prop: \"password\",\n        required: $setup.editingUserId === null\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $setup.formData.password,\n          \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.formData.password = $event),\n          type: \"password\",\n          placeholder: \"请输入密码\",\n          \"show-password\": \"\"\n        }, null, 8 /* PROPS */, [\"modelValue\"]), $setup.editingUserId !== null ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, \" （不修改密码请留空） \")) : _createCommentVNode(\"v-if\", true)]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"required\"]), _createVNode(_component_el_form_item, {\n        label: \"角色\",\n        prop: \"role\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_select, {\n          modelValue: $setup.formData.role,\n          \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.formData.role = $event),\n          placeholder: \"请选择角色\",\n          style: {\n            \"width\": \"100%\"\n          }\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_option, {\n            label: \"普通用户\",\n            value: \"user\"\n          }), _createVNode(_component_el_option, {\n            label: \"管理员\",\n            value: \"admin\"\n          })]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"model\", \"rules\"])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\", \"title\"]), _createCommentVNode(\" 删除确认对话框 \"), _createVNode(_component_el_dialog, {\n    modelValue: $setup.deleteDialogVisible,\n    \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => $setup.deleteDialogVisible = $event),\n    title: \"确认删除\",\n    width: \"400px\",\n    \"close-on-click-modal\": false,\n    \"close-on-press-escape\": false\n  }, {\n    footer: _withCtx(() => [_createVNode(_component_el_button, {\n      onClick: _cache[6] || (_cache[6] = $event => $setup.deleteDialogVisible = false)\n    }, {\n      default: _withCtx(() => [...(_cache[18] || (_cache[18] = [_createTextVNode(\"取消\", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_button, {\n      type: \"danger\",\n      onClick: $setup.deleteUser,\n      loading: $setup.isDeleting\n    }, {\n      default: _withCtx(() => [...(_cache[19] || (_cache[19] = [_createTextVNode(\" 确认删除 \", -1 /* CACHED */)]))]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\", \"loading\"])]),\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"p\", null, [_cache[15] || (_cache[15] = _createTextVNode(\"确定要删除用户 \", -1 /* CACHED */)), _createElementVNode(\"strong\", null, _toDisplayString($setup.selectedUserName), 1 /* TEXT */), _cache[16] || (_cache[16] = _createTextVNode(\" 吗？\", -1 /* CACHED */))]), _cache[17] || (_cache[17] = _createElementVNode(\"p\", {\n      class: \"delete-warning\"\n    }, \"此操作不可撤销，请谨慎操作！\", -1 /* CACHED */))])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_el_button","type","onClick","$setup","showAddUserDialog","_cache","_hoisted_3","_component_el_input","searchQuery","$event","placeholder","clearable","onInput","handleSearch","_hoisted_4","_component_el_table","data","allUsers","style","stripe","border","_component_el_table_column","prop","label","width","align","default","_withCtx","row","_component_el_tag","role","effect","createdAt","formatDate","fixed","username","_hoisted_5","size","showEditUserDialog","plain","disabled","confirmDeleteUser","_hoisted_6","_createCommentVNode","_component_el_pagination","currentPage","pageSize","total","totalUsers","layout","onSizeChange","handleSizeChange","onCurrentChange","handlePageChange","_component_el_dialog","dialogVisible","title","dialogTitle","footer","closeDialog","submitForm","loading","isSubmitting","_component_el_form","model","formData","rules","ref","_component_el_form_item","editingUserId","name","required","password","_hoisted_7","_component_el_select","_component_el_option","value","deleteDialogVisible","deleteUser","isDeleting","_hoisted_8","_toDisplayString","selectedUserName"],"sources":["D:\\projects\\FlightHub-2-Frontend-Standalone-Component\\frontend\\src\\views\\UserManagement.vue"],"sourcesContent":["<template>\n  <div class=\"user-management-container\">\n    <div class=\"page-header\">\n      <h1 class=\"page-title\">人员管理</h1>\n      <el-button \n        type=\"primary\" \n        @click=\"showAddUserDialog\" \n        class=\"add-user-btn\"\n      >\n        添加用户\n      </el-button>\n    </div>\n\n    <div class=\"search-filter\">\n      <el-input \n        v-model=\"searchQuery\" \n        placeholder=\"搜索账号或姓名\" \n        prefix-icon=\"el-icon-search\"\n        clearable\n        class=\"search-input\"\n        @input=\"handleSearch\"\n      ></el-input>\n    </div>\n\n    <div class=\"user-table-wrapper\">\n      <el-table \n        :data=\"allUsers\" \n        style=\"width: 100%\"\n        stripe\n        border\n        class=\"user-table\"\n      >\n        <el-table-column \n          prop=\"id\" \n          label=\"ID\" \n          width=\"80\"\n          align=\"center\"\n        ></el-table-column>\n        <el-table-column \n          prop=\"username\" \n          label=\"账号\" \n          width=\"180\"\n        ></el-table-column>\n        <el-table-column \n          prop=\"name\" \n          label=\"姓名\" \n          width=\"180\"\n        ></el-table-column>\n        <el-table-column \n          prop=\"role\" \n          label=\"角色\" \n          width=\"120\"\n          align=\"center\"\n        >\n          <template #default=\"{ row }\">\n            <el-tag \n              :type=\"row.role === 'admin' ? 'primary' : 'success'\"\n              effect=\"dark\"\n            >\n              {{ row.role === 'admin' ? '管理员' : '普通用户' }}\n            </el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column \n          prop=\"createdAt\" \n          label=\"创建时间\" \n          width=\"220\"\n          align=\"center\"\n        >\n          <template #default=\"{ row: { createdAt } }\">\n            {{ formatDate(createdAt) }}\n          </template>\n        </el-table-column>\n        <el-table-column \n          label=\"操作\" \n          width=\"180\"\n          align=\"center\"\n          fixed=\"right\"\n        >\n          <template #default=\"{ row }\">\n              <div v-if=\"row.username !== 'admin'\">\n                <el-button \n                  type=\"primary\" \n                  size=\"small\" \n                  @click=\"showEditUserDialog(row)\"\n                  plain\n                  :disabled=\"row.username === 'admin'\"\n                >\n                  编辑\n                </el-button>\n                <el-button \n                  type=\"danger\" \n                  size=\"small\" \n                  @click=\"confirmDeleteUser(row)\"\n                  :disabled=\"row.username === 'admin'\"\n                >\n                  删除\n                </el-button>\n              </div>\n              <div v-else class=\"admin-actions\">\n                <span class=\"disabled-tip\">系统管理员</span>\n              </div>\n            </template>\n        </el-table-column>\n      </el-table>\n      \n      <!-- 分页组件 -->\n      <el-pagination\n        :current-page=\"currentPage\"\n        :page-size=\"pageSize\"\n        :page-sizes=\"[5, 10, 20, 50]\"\n        :total=\"totalUsers\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handlePageChange\"\n        class=\"pagination\"\n      ></el-pagination>\n    </div>\n\n    <!-- 添加/编辑用户对话框 -->\n    <el-dialog \n      v-model=\"dialogVisible\" \n      :title=\"dialogTitle\" \n      width=\"500px\"\n      :close-on-click-modal=\"false\"\n      :close-on-press-escape=\"false\"\n    >\n      <el-form \n        :model=\"formData\" \n        :rules=\"rules\" \n        ref=\"userFormRef\"\n        label-width=\"100px\"\n      >\n        <el-form-item label=\"账号\" prop=\"username\">\n          <el-input \n            v-model=\"formData.username\" \n            placeholder=\"请输入账号\"\n            :disabled=\"editingUserId !== null\"\n          ></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"姓名\" prop=\"name\">\n          <el-input \n            v-model=\"formData.name\" \n            placeholder=\"请输入姓名\"\n          ></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"密码\" prop=\"password\"\n          :required=\"editingUserId === null\"\n        >\n          <el-input \n            v-model=\"formData.password\" \n            type=\"password\" \n            placeholder=\"请输入密码\"\n            show-password\n          ></el-input>\n          <div v-if=\"editingUserId !== null\" class=\"password-tip\">\n            （不修改密码请留空）\n          </div>\n        </el-form-item>\n\n        <el-form-item label=\"角色\" prop=\"role\">\n          <el-select \n            v-model=\"formData.role\" \n            placeholder=\"请选择角色\"\n            style=\"width: 100%\"\n          >\n            <el-option \n              label=\"普通用户\" \n              value=\"user\"\n            ></el-option>\n            <el-option \n              label=\"管理员\" \n              value=\"admin\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n      </el-form>\n\n      <template #footer>\n        <el-button @click=\"closeDialog\">取消</el-button>\n        <el-button \n          type=\"primary\" \n          @click=\"submitForm\"\n          :loading=\"isSubmitting\"\n        >\n          确定\n        </el-button>\n      </template>\n    </el-dialog>\n\n    <!-- 删除确认对话框 -->\n    <el-dialog \n      v-model=\"deleteDialogVisible\" \n      title=\"确认删除\" \n      width=\"400px\"\n      :close-on-click-modal=\"false\"\n      :close-on-press-escape=\"false\"\n    >\n      <div class=\"delete-confirm-content\">\n        <p>确定要删除用户 <strong>{{ selectedUserName }}</strong> 吗？</p>\n        <p class=\"delete-warning\">此操作不可撤销，请谨慎操作！</p>\n      </div>\n\n      <template #footer>\n        <el-button @click=\"deleteDialogVisible = false\">取消</el-button>\n        <el-button \n          type=\"danger\" \n          @click=\"deleteUser\"\n          :loading=\"isDeleting\"\n        >\n          确认删除\n        </el-button>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { ref, computed, onMounted } from 'vue'\nimport { useStore } from 'vuex'\nimport { ElMessage } from 'element-plus'\n\nexport default {\n  name: 'UserManagement',\n  components: {\n  },\n  setup() {\n    const store = useStore()\n    const userFormRef = ref(null)\n    \n    onMounted(() => {\n      loadUsers()\n    })\n    \n    // 响应式数据\n    const searchQuery = ref('')\n    const dialogVisible = ref(false)\n    const deleteDialogVisible = ref(false)\n    const editingUserId = ref(null)\n    const selectedUserName = ref('')\n    const selectedUserId = ref(null)\n    const isSubmitting = ref(false)\n    const isDeleting = ref(false)\n    \n    const formData = ref({\n      username: '',\n      name: '',\n      password: '',\n      role: 'user'\n    })\n    \n    const rules = {\n      username: [\n        { required: true, message: '请输入账号', trigger: 'blur' },\n        { min: 3, max: 20, message: '账号长度在 3 到 20 个字符', trigger: 'blur' }\n      ],\n      name: [\n        { required: true, message: '请输入姓名', trigger: 'blur' },\n        { min: 2, max: 50, message: '姓名长度在 2 到 50 个字符', trigger: 'blur' }\n      ],\n      password: [\n        { \n          validator: (rule, value, callback) => {\n            // 添加时密码必填，编辑时可以为空\n            if (editingUserId.value === null && !value) {\n              callback(new Error('请输入密码'))\n            } else if (value && (value.length < 6 || value.length > 20)) {\n              callback(new Error('密码长度在 6 到 20 个字符'))\n            } else {\n              callback()\n            }\n          }, \n          trigger: 'blur'\n        }\n      ],\n      role: [\n        { required: true, message: '请选择角色', trigger: 'change' }\n      ]\n    }\n    \n    // 计算属性\n    const allUsers = computed(() => store.getters.allUsers)\n    const currentPage = computed({\n      get: () => store.state.currentPage,\n      set: (value) => value\n    })\n    const pageSize = computed({\n      get: () => store.state.pageSize,\n      set: (value) => value\n    })\n    const totalUsers = computed(() => store.state.totalUsers)\n    \n    const dialogTitle = computed(() => {\n      return editingUserId.value ? '编辑用户' : '添加用户'\n    })\n    \n    // 加载用户列表\n    const loadUsers = async () => {\n      try {\n        await store.dispatch('fetchUsers', {\n          page: currentPage.value,\n          page_size: pageSize.value,\n          search: searchQuery.value\n        })\n      } catch (error) {\n        console.error('加载用户失败:', error)\n        ElMessage.error('加载用户列表失败')\n      }\n    }\n    \n    // 分页事件处理\n    const handlePageChange = () => {\n      loadUsers()\n    }\n    \n    const handleSizeChange = () => {\n      loadUsers()\n    }\n    \n    // 搜索功能 - 使用防抖\n    let searchTimeout = null\n    const handleSearch = () => {\n      if (searchTimeout) clearTimeout(searchTimeout)\n      searchTimeout = setTimeout(() => {\n        // 搜索时重置到第一页\n        store.commit('SET_PAGINATION_INFO', { currentPage: 1 })\n        loadUsers()\n      }, 300)\n    }\n    \n    // 方法\n    const formatDate = (dateString) => {\n      const date = new Date(dateString)\n      return date.toLocaleString('zh-CN', {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n        hour: '2-digit',\n        minute: '2-digit',\n        second: '2-digit'\n      })\n    }\n    \n    const showAddUserDialog = () => {\n      resetForm()\n      editingUserId.value = null\n      dialogVisible.value = true\n    }\n    \n    const showEditUserDialog = (user) => {\n      editingUserId.value = user.id\n      formData.value = {\n        username: user.username,\n        name: user.name,\n        password: '', // 编辑时密码为空\n        role: user.role\n      }\n      dialogVisible.value = true\n    }\n    \n    const confirmDeleteUser = (user) => {\n      selectedUserId.value = user.id\n      selectedUserName.value = user.name\n      deleteDialogVisible.value = true\n    }\n    \n    const closeDialog = () => {\n      dialogVisible.value = false\n      resetForm()\n    }\n    \n    const resetForm = () => {\n      formData.value = {\n        username: '',\n        name: '',\n        password: '',\n        role: 'user'\n      }\n      editingUserId.value = null\n    }\n    \n    const submitForm = async () => {\n      try {\n        isSubmitting.value = true\n        \n        if (editingUserId.value) {\n          // 编辑用户\n          const form = { ...formData.value }\n          // 如果密码为空，不更新密码\n          if (!form.password) {\n            delete form.password\n          }\n          \n          await store.dispatch('updateUser', { id: editingUserId.value, ...form })\n          ElMessage.success('用户编辑成功')\n          // 重新加载当前页面数据\n          await loadUsers()\n        } else {\n          // 添加用户\n          // 检查用户名是否已存在\n          const existingUser = allUsers.value.find(\n            user => user.username === formData.value.username\n          )\n          \n          if (existingUser) {\n            ElMessage.error('账号已存在，请选择其他账号')\n            return\n          }\n          \n          await store.dispatch('addUser', formData.value)\n          ElMessage.success('用户添加成功')\n          // 重新加载当前页面数据\n          await loadUsers()\n        }\n        \n        dialogVisible.value = false\n        resetForm()\n      } catch (error) {\n        console.error('操作失败:', error)\n        ElMessage.error(error.message || '操作失败，请重试')\n      } finally {\n        isSubmitting.value = false\n      }\n    }\n    \n    const deleteUser = async () => {\n      try {\n        isDeleting.value = true\n        \n        // 确保不能删除admin用户\n        const user = allUsers.value.find(u => u.id === selectedUserId.value)\n        if (user && user.username === 'admin') {\n          ElMessage.error('不能删除系统管理员用户')\n          return\n        }\n        \n        await store.dispatch('deleteUser', selectedUserId.value)\n        ElMessage.success('用户删除成功')\n        deleteDialogVisible.value = false\n        // 重新加载当前页面数据\n        await loadUsers()\n      } catch (error) {\n        console.error('删除失败:', error)\n        ElMessage.error(error.message || '删除失败，请重试')\n      } finally {\n        isDeleting.value = false\n      }\n    }\n    \n    return {\n      searchQuery,\n      dialogVisible,\n      deleteDialogVisible,\n      selectedUserName,\n      selectedUserId,\n      isSubmitting,\n      isDeleting,\n      formData,\n      rules,\n      allUsers,\n      currentPage,\n      pageSize,\n      totalUsers,\n      dialogTitle,\n      editingUserId,\n      userFormRef,\n      formatDate,\n      showAddUserDialog,\n      showEditUserDialog,\n      confirmDeleteUser,\n      closeDialog,\n      submitForm,\n      deleteUser,\n      handlePageChange,\n      handleSizeChange,\n      handleSearch\n    }\n  }\n}\n</script>\n\n<style scoped>\n.user-management-container {\n  padding: 20px;\n  background-color: #0f172a;\n  min-height: 100vh;\n}\n\n.page-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 30px;\n  padding-bottom: 15px;\n  border-bottom: 1px solid #1e293b;\n}\n\n.page-title {\n  color: #e0f2fe;\n  font-size: 24px;\n  font-weight: 600;\n  margin: 0;\n}\n\n.add-user-btn {\n  background: linear-gradient(90deg, #0ea5e9 0%, #0891b2 100%);\n  border: none;\n}\n\n.add-user-btn:hover {\n  background: linear-gradient(90deg, #0ea5e9 0%, #0284c7 100%);\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(14, 165, 233, 0.3);\n}\n\n.search-filter {\n  margin-bottom: 20px;\n}\n\n.search-input {\n  width: 100%;\n  max-width: 400px;\n}\n\n.search-input .el-input__wrapper {\n  background-color: #1e293b;\n  border-color: #0ea5e9;\n}\n\n.search-input .el-input__wrapper:hover {\n  border-color: #7dd3fc;\n  box-shadow: 0 0 0 1px rgba(125, 211, 252, 0.2);\n}\n\n.search-input .el-input__wrapper.is-focus {\n  border-color: #7dd3fc;\n  box-shadow: 0 0 0 1px rgba(125, 211, 252, 0.2);\n}\n\n.search-input .el-input__inner {\n  color: #e0f2fe;\n  background-color: transparent;\n}\n\n.search-input .el-input__prefix-inner .el-icon {\n  color: #7dd3fc;\n}\n\n.user-table-wrapper {\n  background-color: #1e293b;\n  border-radius: 8px;\n  padding: 20px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n}\n\n.user-table {\n  background-color: transparent;\n  color: #e0f2fe;\n}\n\n.user-table .el-table__header-wrapper th {\n  background-color: #0c4a6e;\n  color: #e0f2fe;\n  font-weight: 600;\n  border-bottom: 1px solid #1e40af;\n}\n\n.user-table .el-table__body-wrapper tr {\n  background-color: #1e293b;\n  transition: all 0.3s ease;\n}\n\n.user-table .el-table__body-wrapper tr:hover > td {\n  background-color: #0c4a6e;\n  color: #e0f2fe;\n}\n\n.user-table .el-table__body-wrapper tr.el-table__row--striped {\n  background-color: #1e293b;\n}\n\n.user-table .el-table__body-wrapper tr.el-table__row--striped:hover > td {\n  background-color: #0c4a6e;\n}\n\n.user-table .el-table__body-wrapper td {\n  border-bottom: 1px solid #334155;\n  color: #e0f2fe;\n}\n\n.user-table .el-button--plain.is-primary:hover {\n  color: #7dd3fc;\n  border-color: #7dd3fc;\n  background-color: rgba(14, 165, 233, 0.1);\n}\n\n.user-table .el-button--plain.is-danger:hover {\n  color: #ef4444;\n  border-color: #ef4444;\n  background-color: rgba(239, 68, 68, 0.1);\n}\n\n.user-table .el-button.is-disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n}\n\n.admin-actions {\n  text-align: center;\n}\n\n.disabled-tip {\n  color: #94a3b8;\n  font-size: 12px;\n}\n\n/* 对话框样式 */\n:deep(.el-dialog) {\n  background-color: #1e293b;\n  border: 1px solid #0ea5e9;\n  border-radius: 8px;\n}\n\n:deep(.el-dialog__header) {\n  background-color: #0c4a6e;\n  border-bottom: 1px solid #1e40af;\n  padding: 20px 24px 16px;\n}\n\n:deep(.el-dialog__title) {\n  color: #e0f2fe;\n  font-size: 18px;\n  font-weight: 600;\n}\n\n:deep(.el-dialog__body) {\n  padding: 24px;\n  color: #e0f2fe;\n}\n\n:deep(.el-form-item__label) {\n  color: #94a3b8;\n  font-weight: 500;\n}\n\n:deep(.el-input__wrapper) {\n  background-color: #0f172a;\n  border-color: #334155;\n}\n\n:deep(.el-input__wrapper:hover) {\n  border-color: #0ea5e9;\n  box-shadow: 0 0 0 1px rgba(14, 165, 233, 0.1);\n}\n\n:deep(.el-input__wrapper.is-focus) {\n  border-color: #0ea5e9;\n  box-shadow: 0 0 0 1px rgba(14, 165, 233, 0.2);\n}\n\n:deep(.el-input__inner) {\n  color: #e0f2fe;\n  background-color: transparent;\n}\n\n:deep(.el-select__wrapper) {\n  background-color: #0f172a;\n  border-color: #334155;\n}\n\n:deep(.el-select__wrapper:hover) {\n  border-color: #0ea5e9;\n  box-shadow: 0 0 0 1px rgba(14, 165, 233, 0.1);\n}\n\n:deep(.el-select__wrapper.is-focus) {\n  border-color: #0ea5e9;\n  box-shadow: 0 0 0 1px rgba(14, 165, 233, 0.2);\n}\n\n:deep(.el-select__inner) {\n  color: #e0f2fe;\n  background-color: transparent;\n}\n\n:deep(.el-select-dropdown) {\n  background-color: #0f172a;\n  border-color: #0ea5e9;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);\n}\n\n:deep(.el-select-dropdown__item) {\n  color: #e0f2fe;\n}\n\n:deep(.el-select-dropdown__item:hover) {\n  background-color: #0c4a6e;\n}\n\n:deep(.el-select-dropdown__item.selected) {\n  background-color: #0c4a6e;\n  color: #7dd3fc;\n}\n\n.password-tip {\n  color: #94a3b8;\n  font-size: 12px;\n  margin-top: 4px;\n}\n\n.delete-confirm-content {\n  padding: 10px 0;\n  color: #e0f2fe;\n}\n\n.delete-warning {\n  color: #f59e0b;\n  font-size: 14px;\n  margin-top: 10px;\n}\n\n.delete-warning::before {\n  content: '⚠️ ';\n  font-size: 16px;\n}\n\n:deep(.el-button--primary) {\n  background: linear-gradient(90deg, #0ea5e9 0%, #0891b2 100%);\n  border: none;\n}\n\n:deep(.el-button--primary:hover) {\n  background: linear-gradient(90deg, #0ea5e9 0%, #0284c7 100%);\n}\n\n:deep(.el-button--danger) {\n  background-color: #ef4444;\n  border: none;\n}\n\n:deep(.el-button--danger:hover) {\n  background-color: #dc2626;\n}\n\n@media (max-width: 768px) {\n  .page-header {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 15px;\n  }\n  \n  .search-input {\n    max-width: 100%;\n  }\n  \n  .user-table-wrapper {\n    padding: 10px;\n    overflow-x: auto;\n  }\n  \n  .user-table {\n    min-width: 600px;\n  }\n}\n\n/* 分页组件样式 */\n.pagination {\n  margin-top: 20px;\n  display: flex;\n  justify-content: flex-end;\n}\n\n:deep(.el-pagination) {\n  padding: 10px 0;\n}\n\n:deep(.el-pagination button) {\n  background-color: #1e293b;\n  color: #e0f2fe;\n  border-color: #334155;\n}\n\n:deep(.el-pagination button:hover) {\n  color: #7dd3fc;\n  border-color: #0ea5e9;\n}\n\n:deep(.el-pagination button:disabled) {\n  background-color: #0f172a;\n  color: #475569;\n  border-color: #1e293b;\n}\n\n:deep(.el-pager li) {\n  background-color: #1e293b;\n  color: #e0f2fe;\n  border: 1px solid #334155;\n  margin: 0 4px;\n}\n\n:deep(.el-pager li:hover) {\n  color: #7dd3fc;\n  border-color: #0ea5e9;\n}\n\n:deep(.el-pager li.is-active) {\n  background-color: #0c4a6e;\n  color: #7dd3fc;\n  border-color: #0ea5e9;\n}\n\n:deep(.el-pagination__sizes .el-select .el-input__wrapper) {\n  background-color: #1e293b;\n  border-color: #334155;\n}\n\n:deep(.el-pagination__jump) {\n  color: #e0f2fe;\n}\n\n:deep(.el-pagination__total) {\n  color: #94a3b8;\n}\n\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}