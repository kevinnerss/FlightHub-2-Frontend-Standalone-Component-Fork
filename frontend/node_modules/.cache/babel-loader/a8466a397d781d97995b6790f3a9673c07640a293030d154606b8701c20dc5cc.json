{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport { DjiWaylineCreation } from '../djispace-components';\nimport TaskProgressBar from '../components/TaskProgressBar.vue';\nimport AlarmPanel from '../components/AlarmPanel.vue';\nexport default {\n  name: 'DjiDashboard',\n  components: {\n    DjiWaylineCreation,\n    TaskProgressBar,\n    AlarmPanel\n  },\n  data() {\n    return {\n      showWaylineCreation: false,\n      taskProgress: 65,\n      currentTask: '变电站设备检查',\n      remainingTime: '12:45',\n      completedTasks: 8,\n      totalTasks: 12,\n      // Cesium相关数据\n      viewer: null,\n      tileset: null,\n      loading: false,\n      error: '',\n      wireframe: false,\n      // 配置信息需要根据实际环境进行修改\n      djiConfig: {\n        serverUrl: 'http://your-dji-server-ip-or-domain:30812',\n        wssUrl: 'ws://your-dji-server-ip-or-domain:30812/duplex/web',\n        hostUrl: 'http://your-dji-server-ip-or-domain',\n        // 复制 prjId 到这里\n        prjId: 'cdca2736-8096-4729-9bc7-497ad5b60d5e',\n        // 复制 projectToken 到这里\n        projectToken: 'your-project-token-here'\n      },\n      // 模拟报警数据\n      mockAlarms: [{\n        id: 1,\n        title: '电力线异常发热',\n        description: '在坐标(23.124, 113.235)处检测到电力线温度异常升高，可能存在线路老化或过载情况。',\n        timestamp: '2024-01-15T14:22:35',\n        location: '变电站A区域-东线路',\n        type: '温度异常',\n        severity: '高',\n        imageUrl: 'https://picsum.photos/800/600?random=1'\n      }, {\n        id: 2,\n        title: '绝缘子损伤',\n        description: '在铁塔#128处发现绝缘子表面有明显裂纹，需要进一步检查。',\n        timestamp: '2024-01-15T13:45:12',\n        location: '铁塔#128',\n        type: '设备损伤',\n        severity: '中',\n        imageUrl: 'https://picsum.photos/800/600?random=2'\n      }]\n    };\n  },\n  async mounted() {\n    // 等待DOM更新完成后再初始化Cesium\n    this.$nextTick(async () => {\n      // 等待一小段时间确保DOM完全渲染\n      setTimeout(async () => {\n        // 等待Cesium资源加载完成后再初始化\n        await this.initCesium();\n\n        // 自动加载默认模型\n        await this.loadModel();\n      }, 200);\n    });\n  },\n  beforeUnmount() {\n    if (this.viewer) {\n      this.viewer.destroy();\n    }\n  },\n  methods: {\n    openWaylineCreation() {\n      this.showWaylineCreation = true;\n    },\n    handleAlarmRefresh() {\n      console.log('刷新报警信息');\n    },\n    handleViewAlarmDetail(alarm) {\n      console.log('查看报警详情:', alarm);\n    },\n    handleProcessAlarm(alarmId) {\n      console.log('处理报警:', alarmId);\n      // 从mockAlarms中移除已处理的报警\n      this.mockAlarms = this.mockAlarms.filter(alarm => alarm.id !== alarmId);\n    },\n    async initCesium() {\n      try {\n        // 动态导入Cesium\n        const Cesium = await import('cesium');\n\n        // 设置Cesium的access token为空（因为我们使用的是本地资源）\n        Cesium.Ion.defaultAccessToken = '';\n\n        // 使用引用获取包装器元素\n        const wrapper = this.$refs.cesiumWrapper;\n        if (!wrapper) {\n          throw new Error('找不到 cesiumWrapper 元素');\n        }\n\n        // 移除已存在的Cesium容器（如果有）\n        const existingContainer = document.getElementById('cesiumContainer');\n        if (existingContainer) {\n          existingContainer.remove();\n        }\n\n        // 使用原生DOM操作创建容器，避免Vue响应式影响\n        const container = document.createElement('div');\n        container.id = 'cesiumContainer';\n\n        // 重要：在添加到DOM前先设置好样式\n        container.style.width = '100%';\n        container.style.height = '100%';\n        container.style.position = 'relative';\n        container.style.margin = '0';\n        container.style.padding = '0';\n        container.style.overflow = 'hidden';\n        container.style.zIndex = '1';\n\n        // 先将容器添加到DOM中\n        wrapper.appendChild(container);\n\n        // 确保容器有正确的尺寸\n        const width = wrapper.offsetWidth;\n        const height = wrapper.offsetHeight;\n        if (width <= 0 || height <= 0) {\n          throw new Error(`无效的容器尺寸: ${width}x${height}`);\n        }\n        console.log('初始化Cesium容器尺寸:', width, 'x', height);\n\n        // 初始化Cesium Viewer - 添加一些关键配置以确保正确的大小调整\n        this.viewer = new Cesium.Viewer(container, {\n          animation: false,\n          baseLayerPicker: false,\n          fullscreenButton: false,\n          vrButton: false,\n          geocoder: false,\n          homeButton: false,\n          infoBox: false,\n          sceneModePicker: false,\n          selectionIndicator: false,\n          timeline: false,\n          navigationHelpButton: false,\n          navigationInstructionsInitiallyVisible: false,\n          scene3DOnly: true,\n          shadows: true,\n          shouldAnimate: true,\n          creditContainer: document.createElement('div'),\n          // 关键配置：避免Cesium自动添加resize监听器，由我们自己控制\n          automaticallyTrackDataSourceClocks: false,\n          // 提高渲染性能\n          orderIndependentTranslucency: true,\n          // 确保canvas元素可以正确调整大小\n          contextOptions: {\n            alpha: true,\n            stencil: true\n          }\n        });\n\n        // 确保canvas元素的尺寸正确设置\n        if (this.viewer && this.viewer.canvas) {\n          this.viewer.canvas.style.width = '100%';\n          this.viewer.canvas.style.height = '100%';\n        }\n\n        // 设置初始视角\n        this.viewer.camera.setView({\n          destination: Cesium.Cartesian3.fromDegrees(116.3913, 39.9075, 1000),\n          orientation: {\n            heading: Cesium.Math.toRadians(0),\n            pitch: Cesium.Math.toRadians(-30),\n            roll: 0.0\n          }\n        });\n      } catch (err) {\n        this.error = '初始化Cesium失败: ' + err.message;\n        console.error('Cesium initialization error:', err);\n      }\n    },\n    async loadModel() {\n      if (!this.viewer) return;\n      this.loading = true;\n      this.error = '';\n      try {\n        // 动态导入Cesium\n        const Cesium = await import('cesium');\n\n        // 如果已有模型，先移除\n        if (this.tileset) {\n          this.viewer.scene.primitives.remove(this.tileset);\n          this.tileset = null;\n        }\n\n        // 加载3D Tiles数据集\n        this.tileset = await Cesium.Cesium3DTileset.fromUrl('/models/Model_0/tileset.json');\n        this.viewer.scene.primitives.add(this.tileset);\n\n        // 缩放到模型\n        if (this.tileset.readyPromise) {\n          this.tileset.readyPromise.then(() => {\n            this.flyToModel();\n          }).catch(error => {\n            this.error = '模型加载失败: ' + error.message;\n            console.error('Tileset loading error:', error);\n          }).finally(() => {\n            this.loading = false;\n          });\n        } else {\n          // 如果没有readyPromise，直接设置状态\n          this.flyToModel();\n          this.loading = false;\n        }\n      } catch (err) {\n        this.error = '模型加载失败: ' + err.message;\n        this.loading = false;\n        console.error('Model loading error:', err);\n      }\n    },\n    flyToModel() {\n      if (this.viewer && this.tileset) {\n        this.viewer.flyTo(this.tileset);\n      }\n    },\n    async resetView() {\n      if (this.viewer) {\n        // 重置到初始视角\n        const Cesium = await import('cesium');\n        this.viewer.camera.setView({\n          destination: Cesium.Cartesian3.fromDegrees(116.3913, 39.9075, 1000),\n          orientation: {\n            heading: Cesium.Math.toRadians(0),\n            pitch: Cesium.Math.toRadians(-30),\n            roll: 0.0\n          }\n        });\n      }\n    },\n    toggleWireframe() {\n      if (!this.tileset) return;\n      this.wireframe = !this.wireframe;\n      this.tileset.debugWireframe = this.wireframe;\n    }\n  }\n};","map":{"version":3,"names":["DjiWaylineCreation","TaskProgressBar","AlarmPanel","name","components","data","showWaylineCreation","taskProgress","currentTask","remainingTime","completedTasks","totalTasks","viewer","tileset","loading","error","wireframe","djiConfig","serverUrl","wssUrl","hostUrl","prjId","projectToken","mockAlarms","id","title","description","timestamp","location","type","severity","imageUrl","mounted","$nextTick","setTimeout","initCesium","loadModel","beforeUnmount","destroy","methods","openWaylineCreation","handleAlarmRefresh","console","log","handleViewAlarmDetail","alarm","handleProcessAlarm","alarmId","filter","Cesium","Ion","defaultAccessToken","wrapper","$refs","cesiumWrapper","Error","existingContainer","document","getElementById","remove","container","createElement","style","width","height","position","margin","padding","overflow","zIndex","appendChild","offsetWidth","offsetHeight","Viewer","animation","baseLayerPicker","fullscreenButton","vrButton","geocoder","homeButton","infoBox","sceneModePicker","selectionIndicator","timeline","navigationHelpButton","navigationInstructionsInitiallyVisible","scene3DOnly","shadows","shouldAnimate","creditContainer","automaticallyTrackDataSourceClocks","orderIndependentTranslucency","contextOptions","alpha","stencil","canvas","camera","setView","destination","Cartesian3","fromDegrees","orientation","heading","Math","toRadians","pitch","roll","err","message","scene","primitives","Cesium3DTileset","fromUrl","add","readyPromise","then","flyToModel","catch","finally","flyTo","resetView","toggleWireframe","debugWireframe"],"sources":["D:\\projects\\FlightHub-2-Frontend-Standalone-Component\\frontend\\src\\views\\DjiDashboard.vue"],"sourcesContent":["<template>\r\n  <div class=\"dji-dashboard\">\r\n    <el-container class=\"h-screen overflow-hidden\">\r\n      <!-- 左侧导航 -->\r\n      <el-aside width=\"240px\" class=\"bg-white shadow-sm overflow-hidden\">\r\n        <el-card shadow=\"never\" class=\"h-full border-0\">\r\n          <template #header>\r\n            <div class=\"flex items-center justify-between\">\r\n              <span class=\"text-lg font-medium\">航线管理</span>\r\n              <el-button type=\"primary\" size=\"small\" plain @click=\"openWaylineCreation\">\r\n                新增\r\n              </el-button>\r\n            </div>\r\n          </template>\r\n          <el-scrollbar class=\"h-[calc(100%-50px)]\">\r\n            <!-- 使用大疆提供的航线列表组件 -->\r\n            <div class=\"p-4\">\r\n              <p class=\"text-gray-500 text-sm\">航线列表将在这里显示（由大疆组件提供）</p>\r\n            </div>\r\n          </el-scrollbar>\r\n        </el-card>\r\n      </el-aside>\r\n      \r\n      <el-container>\r\n        <!-- 顶部进度条 -->\r\n        <el-header height=\"60px\" class=\"bg-white border-b p-0\">\r\n          <TaskProgressBar \r\n            :progress=\"taskProgress\"\r\n            :current-task=\"currentTask\"\r\n            :remaining-time=\"remainingTime\"\r\n            :completed-tasks=\"completedTasks\"\r\n            :total-tasks=\"totalTasks\"\r\n          />\r\n        </el-header>\r\n        \r\n        <el-container class=\"p-4 gap-4\">\r\n          <!-- 主内容区 - 数字孪生模型视图 -->\r\n          <el-main class=\"p-0\">\r\n            <el-card shadow=\"hover\" class=\"h-full border-0 flex flex-col\">\r\n              <template #header>\r\n                <div class=\"flex items-center justify-between\">\r\n                  <span class=\"text-lg font-medium\">数字孪生模型</span>\r\n                  <div class=\"flex items-center gap-2\">\r\n                    <el-button type=\"primary\" size=\"small\" plain @click=\"resetView\">重置视角</el-button>\r\n                    <el-button type=\"primary\" size=\"small\" plain @click=\"toggleWireframe\">{{ wireframe ? '实体模式' : '线框模式' }}</el-button>\r\n                  </div>\r\n                </div>\r\n              </template>\r\n              <div class=\"flex-1 flex flex-col\">\r\n                <!-- Cesium容器 -->\r\n                <div ref=\"cesiumWrapper\" class=\"cesium-wrapper flex-1 relative\">\r\n                  <!-- 加载指示器 -->\r\n                  <div v-if=\"loading\" class=\"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 z-10\">\r\n                    <el-spinner size=\"large\" />\r\n                    <span class=\"ml-2 text-white\">正在加载模型...</span>\r\n                  </div>\r\n                  \r\n                  <!-- 错误信息 -->\r\n                  <div v-if=\"error\" class=\"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 z-10\">\r\n                    <el-alert\r\n                      :title=\"error\"\r\n                      type=\"error\"\r\n                      show-icon\r\n                      class=\"w-96\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </el-card>\r\n          </el-main>\r\n          \r\n          <!-- 右侧面板 -->\r\n          <el-aside width=\"320px\" class=\"space-y-4 overflow-hidden\">\r\n            <!-- 报警信息面板 -->\r\n            <el-card shadow=\"hover\" class=\"h-[35%] border-0\">\r\n              <template #header>\r\n                <div class=\"flex items-center justify-between\">\r\n                  <span class=\"text-base font-medium\">报警信息</span>\r\n                </div>\r\n              </template>\r\n              <AlarmPanel \r\n                :alarms=\"mockAlarms\"\r\n                @refresh=\"handleAlarmRefresh\"\r\n                @view-detail=\"handleViewAlarmDetail\"\r\n                @process-alarm=\"handleProcessAlarm\"\r\n                class=\"h-[calc(100%-50px)]\"\r\n              />\r\n            </el-card>\r\n            \r\n            <!-- 实时监控面板 -->\r\n            <el-card shadow=\"hover\" class=\"h-[30%] border-0\">\r\n              <template #header>\r\n                <div class=\"flex items-center justify-between\">\r\n                  <span class=\"text-base font-medium\">实时监控</span>\r\n                </div>\r\n              </template>\r\n              <div class=\"h-[calc(100%-50px)] flex items-center justify-center\">\r\n                <p class=\"text-gray-500 text-sm\">实时监控将在这里显示（由大疆组件提供）</p>\r\n              </div>\r\n            </el-card>\r\n            \r\n            <!-- 控制面板 -->\r\n            <el-card shadow=\"hover\" class=\"h-[35%] border-0\">\r\n              <template #header>\r\n                <div class=\"flex items-center justify-between\">\r\n                  <span class=\"text-base font-medium\">无人机控制</span>\r\n                </div>\r\n              </template>\r\n              <div class=\"h-[calc(100%-50px)] flex items-center justify-center\">\r\n                <p class=\"text-gray-500 text-sm\">控制面板将在这里显示（由大疆组件提供）</p>\r\n              </div>\r\n            </el-card>\r\n          </el-aside>\r\n        </el-container>\r\n      </el-container>\r\n    </el-container>\r\n    \r\n    <!-- 航线创建对话框 -->\r\n    <el-dialog\r\n      v-model=\"showWaylineCreation\"\r\n      title=\"创建航线\"\r\n      width=\"90%\"\r\n      height=\"90%\"\r\n      destroy-on-close\r\n    >\r\n      <div style=\"height: 70vh\">\r\n        <DjiWaylineCreation \r\n          v-if=\"showWaylineCreation\"\r\n          ref=\"waylineCreationComponent\"\r\n          :config=\"djiConfig\"\r\n        />\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { DjiWaylineCreation } from '../djispace-components'\r\nimport TaskProgressBar from '../components/TaskProgressBar.vue'\r\nimport AlarmPanel from '../components/AlarmPanel.vue'\r\n\r\nexport default {\r\n  name: 'DjiDashboard',\r\n  components: {\r\n    DjiWaylineCreation,\r\n    TaskProgressBar,\r\n    AlarmPanel\r\n  },\r\n  data() {\r\n    return {\r\n      showWaylineCreation: false,\r\n      taskProgress: 65,\r\n      currentTask: '变电站设备检查',\r\n      remainingTime: '12:45',\r\n      completedTasks: 8,\r\n      totalTasks: 12,\r\n      // Cesium相关数据\r\n      viewer: null,\r\n      tileset: null,\r\n      loading: false,\r\n      error: '',\r\n      wireframe: false,\r\n      // 配置信息需要根据实际环境进行修改\r\n      djiConfig: {\r\n        serverUrl: 'http://your-dji-server-ip-or-domain:30812',\r\n        wssUrl: 'ws://your-dji-server-ip-or-domain:30812/duplex/web',\r\n        hostUrl: 'http://your-dji-server-ip-or-domain',\r\n        // 复制 prjId 到这里\r\n        prjId: 'cdca2736-8096-4729-9bc7-497ad5b60d5e',\r\n        // 复制 projectToken 到这里\r\n        projectToken: 'your-project-token-here'\r\n      },\r\n      // 模拟报警数据\r\n      mockAlarms: [\r\n        {\r\n          id: 1,\r\n          title: '电力线异常发热',\r\n          description: '在坐标(23.124, 113.235)处检测到电力线温度异常升高，可能存在线路老化或过载情况。',\r\n          timestamp: '2024-01-15T14:22:35',\r\n          location: '变电站A区域-东线路',\r\n          type: '温度异常',\r\n          severity: '高',\r\n          imageUrl: 'https://picsum.photos/800/600?random=1'\r\n        },\r\n        {\r\n          id: 2,\r\n          title: '绝缘子损伤',\r\n          description: '在铁塔#128处发现绝缘子表面有明显裂纹，需要进一步检查。',\r\n          timestamp: '2024-01-15T13:45:12',\r\n          location: '铁塔#128',\r\n          type: '设备损伤',\r\n          severity: '中',\r\n          imageUrl: 'https://picsum.photos/800/600?random=2'\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  async mounted() {\r\n    // 等待DOM更新完成后再初始化Cesium\r\n    this.$nextTick(async () => {\r\n      // 等待一小段时间确保DOM完全渲染\r\n      setTimeout(async () => {\r\n        // 等待Cesium资源加载完成后再初始化\r\n        await this.initCesium()\r\n        \r\n        // 自动加载默认模型\r\n        await this.loadModel()\r\n      }, 200)\r\n    })\r\n  },\r\n  beforeUnmount() {\r\n    if (this.viewer) {\r\n      this.viewer.destroy()\r\n    }\r\n  },\r\n  methods: {\r\n    openWaylineCreation() {\r\n      this.showWaylineCreation = true\r\n    },\r\n    handleAlarmRefresh() {\r\n      console.log('刷新报警信息')\r\n    },\r\n    handleViewAlarmDetail(alarm) {\r\n      console.log('查看报警详情:', alarm)\r\n    },\r\n    handleProcessAlarm(alarmId) {\r\n      console.log('处理报警:', alarmId)\r\n      // 从mockAlarms中移除已处理的报警\r\n      this.mockAlarms = this.mockAlarms.filter(alarm => alarm.id !== alarmId)\r\n    },\r\n    async initCesium() {\r\n      try {\r\n        // 动态导入Cesium\r\n        const Cesium = await import('cesium')\r\n        \r\n        // 设置Cesium的access token为空（因为我们使用的是本地资源）\r\n        Cesium.Ion.defaultAccessToken = ''\r\n        \r\n        // 使用引用获取包装器元素\r\n        const wrapper = this.$refs.cesiumWrapper\r\n        if (!wrapper) {\r\n          throw new Error('找不到 cesiumWrapper 元素')\r\n        }\r\n        \r\n        // 移除已存在的Cesium容器（如果有）\r\n        const existingContainer = document.getElementById('cesiumContainer')\r\n        if (existingContainer) {\r\n          existingContainer.remove()\r\n        }\r\n        \r\n        // 使用原生DOM操作创建容器，避免Vue响应式影响\r\n        const container = document.createElement('div')\r\n        container.id = 'cesiumContainer'\r\n        \r\n        // 重要：在添加到DOM前先设置好样式\r\n        container.style.width = '100%'\r\n        container.style.height = '100%'\r\n        container.style.position = 'relative'\r\n        container.style.margin = '0'\r\n        container.style.padding = '0'\r\n        container.style.overflow = 'hidden'\r\n        container.style.zIndex = '1'\r\n        \r\n        // 先将容器添加到DOM中\r\n        wrapper.appendChild(container)\r\n        \r\n        // 确保容器有正确的尺寸\r\n        const width = wrapper.offsetWidth\r\n        const height = wrapper.offsetHeight\r\n        \r\n        if (width <= 0 || height <= 0) {\r\n          throw new Error(`无效的容器尺寸: ${width}x${height}`)\r\n        }\r\n        \r\n        console.log('初始化Cesium容器尺寸:', width, 'x', height)\r\n        \r\n        // 初始化Cesium Viewer - 添加一些关键配置以确保正确的大小调整\r\n        this.viewer = new Cesium.Viewer(container, {\r\n          animation: false,\r\n          baseLayerPicker: false,\r\n          fullscreenButton: false,\r\n          vrButton: false,\r\n          geocoder: false,\r\n          homeButton: false,\r\n          infoBox: false,\r\n          sceneModePicker: false,\r\n          selectionIndicator: false,\r\n          timeline: false,\r\n          navigationHelpButton: false,\r\n          navigationInstructionsInitiallyVisible: false,\r\n          scene3DOnly: true,\r\n          shadows: true,\r\n          shouldAnimate: true,\r\n          creditContainer: document.createElement('div'),\r\n          // 关键配置：避免Cesium自动添加resize监听器，由我们自己控制\r\n          automaticallyTrackDataSourceClocks: false,\r\n          // 提高渲染性能\r\n          orderIndependentTranslucency: true,\r\n          // 确保canvas元素可以正确调整大小\r\n          contextOptions: {\r\n            alpha: true,\r\n            stencil: true\r\n          }\r\n        })\r\n        \r\n        // 确保canvas元素的尺寸正确设置\r\n        if (this.viewer && this.viewer.canvas) {\r\n          this.viewer.canvas.style.width = '100%'\r\n          this.viewer.canvas.style.height = '100%'\r\n        }\r\n\r\n        // 设置初始视角\r\n        this.viewer.camera.setView({\r\n          destination: Cesium.Cartesian3.fromDegrees(116.3913, 39.9075, 1000),\r\n          orientation: {\r\n            heading: Cesium.Math.toRadians(0),\r\n            pitch: Cesium.Math.toRadians(-30),\r\n            roll: 0.0\r\n          }\r\n        })\r\n      } catch (err) {\r\n        this.error = '初始化Cesium失败: ' + err.message\r\n        console.error('Cesium initialization error:', err)\r\n      }\r\n    },\r\n    async loadModel() {\r\n      if (!this.viewer) return\r\n      \r\n      this.loading = true\r\n      this.error = ''\r\n      \r\n      try {\r\n        // 动态导入Cesium\r\n        const Cesium = await import('cesium')\r\n        \r\n        // 如果已有模型，先移除\r\n        if (this.tileset) {\r\n          this.viewer.scene.primitives.remove(this.tileset)\r\n          this.tileset = null\r\n        }\r\n        \r\n        // 加载3D Tiles数据集\r\n        this.tileset = await Cesium.Cesium3DTileset.fromUrl('/models/Model_0/tileset.json')\r\n        \r\n        this.viewer.scene.primitives.add(this.tileset)\r\n        \r\n        // 缩放到模型\r\n        if (this.tileset.readyPromise) {\r\n          this.tileset.readyPromise.then(() => {\r\n            this.flyToModel()\r\n          }).catch(error => {\r\n            this.error = '模型加载失败: ' + error.message\r\n            console.error('Tileset loading error:', error)\r\n          }).finally(() => {\r\n            this.loading = false\r\n          })\r\n        } else {\r\n          // 如果没有readyPromise，直接设置状态\r\n          this.flyToModel()\r\n          this.loading = false\r\n        }\r\n      } catch (err) {\r\n        this.error = '模型加载失败: ' + err.message\r\n        this.loading = false\r\n        console.error('Model loading error:', err)\r\n      }\r\n    },\r\n    flyToModel() {\r\n      if (this.viewer && this.tileset) {\r\n        this.viewer.flyTo(this.tileset)\r\n      }\r\n    },\r\n    async resetView() {\r\n      if (this.viewer) {\r\n        // 重置到初始视角\r\n        const Cesium = await import('cesium')\r\n        this.viewer.camera.setView({\r\n          destination: Cesium.Cartesian3.fromDegrees(116.3913, 39.9075, 1000),\r\n          orientation: {\r\n            heading: Cesium.Math.toRadians(0),\r\n            pitch: Cesium.Math.toRadians(-30),\r\n            roll: 0.0\r\n          }\r\n        })\r\n      }\r\n    },\r\n    toggleWireframe() {\r\n      if (!this.tileset) return\r\n      \r\n      this.wireframe = !this.wireframe\r\n      this.tileset.debugWireframe = this.wireframe\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.dji-dashboard {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.cesium-wrapper {\r\n  flex: 1;\r\n  position: relative;\r\n  min-height: 0; /* 防止flex子元素溢出 */\r\n}\r\n\r\n/* Cesium容器样式 - 通过JS动态设置，这里只设置基础样式 */\r\n#cesiumContainer {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  margin: 0;\r\n  padding: 0;\r\n  overflow: hidden;\r\n  z-index: 1;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}