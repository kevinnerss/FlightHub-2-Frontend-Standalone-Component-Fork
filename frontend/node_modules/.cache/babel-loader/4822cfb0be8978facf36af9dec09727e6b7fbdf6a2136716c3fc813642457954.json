{"ast":null,"code":"import { isFunction } from '@vue/shared';\nconst REPEAT_INTERVAL = 100;\nconst REPEAT_DELAY = 600;\nconst SCOPE = \"_RepeatClick\";\nconst vRepeatClick = {\n  beforeMount(el, binding) {\n    const value = binding.value;\n    const {\n      interval = REPEAT_INTERVAL,\n      delay = REPEAT_DELAY\n    } = isFunction(value) ? {} : value;\n    let intervalId;\n    let delayId;\n    const handler = () => isFunction(value) ? value() : value.handler();\n    const clear = () => {\n      if (delayId) {\n        clearTimeout(delayId);\n        delayId = void 0;\n      }\n      if (intervalId) {\n        clearInterval(intervalId);\n        intervalId = void 0;\n      }\n    };\n    const start = evt => {\n      if (evt.button !== 0) return;\n      clear();\n      handler();\n      document.addEventListener(\"mouseup\", clear, {\n        once: true\n      });\n      delayId = setTimeout(() => {\n        intervalId = setInterval(() => {\n          handler();\n        }, interval);\n      }, delay);\n    };\n    el[SCOPE] = {\n      start,\n      clear\n    };\n    el.addEventListener(\"mousedown\", start);\n  },\n  unmounted(el) {\n    if (!el[SCOPE]) return;\n    const {\n      start,\n      clear\n    } = el[SCOPE];\n    if (start) {\n      el.removeEventListener(\"mousedown\", start);\n    }\n    if (clear) {\n      clear();\n      document.removeEventListener(\"mouseup\", clear);\n    }\n    el[SCOPE] = null;\n  }\n};\nexport { REPEAT_DELAY, REPEAT_INTERVAL, vRepeatClick };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}