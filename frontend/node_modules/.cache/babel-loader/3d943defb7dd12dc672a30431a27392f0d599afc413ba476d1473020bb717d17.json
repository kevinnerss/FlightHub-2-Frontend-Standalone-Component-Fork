{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport alarmApi from '../api/alarmApi';\nexport default {\n  name: 'AlarmList',\n  data() {\n    return {\n      alarms: [],\n      categories: [],\n      waylines: [],\n      // 存储航线数据\n      loading: false,\n      searchQuery: '',\n      statusFilter: '',\n      waylineIdFilter: '',\n      currentPage: 1,\n      pageSize: 10,\n      totalAlarms: 0,\n      showStatusDialog: false,\n      showDetailDialog: false,\n      // 详情弹窗显示状态\n      currentAlarm: null,\n      newAlarmStatus: ''\n    };\n  },\n  watch: {\n    // 监听搜索关键词变化\n    searchQuery: {\n      handler() {\n        this.currentPage = 1; // 重置到第一页\n        this.loadAlarms();\n      },\n      debounce: 300 // 防抖，避免频繁请求\n    },\n    // 监听状态筛选变化\n    statusFilter() {\n      this.currentPage = 1;\n      this.loadAlarms();\n    },\n    // 监听航线ID筛选变化\n    waylineIdFilter: {\n      handler() {\n        this.currentPage = 1;\n        this.loadAlarms();\n      },\n      debounce: 300\n    }\n  },\n  computed: {\n    // 直接使用从后端获取的数据，不再需要前端过滤\n    filteredAlarms() {\n      return this.alarms;\n    }\n  },\n  async mounted() {\n    await this.loadAlarms();\n    await this.loadCategories();\n    await this.loadWaylines();\n\n    // 使用JavaScript直接修改筛选框样式 - 最高优先级\n    this.$nextTick(() => {\n      console.log('应用内联样式到筛选框');\n\n      // 为所有筛选框设置样式\n      const applyFilterStyles = () => {\n        // 查找所有选择器容器\n        const selectElements = document.querySelectorAll('#alarm-status-select, #alarm-wayline-select');\n        selectElements.forEach(select => {\n          // 获取输入框包装器\n          const wrapper = select.querySelector('.el-input__wrapper');\n          if (wrapper) {\n            wrapper.style.backgroundColor = '#1f2937';\n            wrapper.style.borderColor = '#374151';\n            wrapper.style.boxShadow = 'none';\n          }\n\n          // 获取输入框\n          const input = select.querySelector('.el-input__inner');\n          if (input) {\n            input.style.backgroundColor = '#1f2937';\n            input.style.color = '#d1d5db';\n          }\n\n          // 获取图标\n          const icon = select.querySelector('.el-input__suffix-inner .el-input__icon');\n          if (icon) {\n            icon.style.color = '#9ca3af';\n          }\n        });\n\n        // 特别处理搜索输入框\n        const searchInput = document.getElementById('alarm-search-input');\n        if (searchInput) {\n          const searchWrapper = searchInput.querySelector('.el-input__wrapper');\n          const searchInner = searchInput.querySelector('.el-input__inner');\n          if (searchWrapper) {\n            searchWrapper.style.backgroundColor = '#1f2937';\n            searchWrapper.style.borderColor = '#374151';\n          }\n          if (searchInner) {\n            searchInner.style.backgroundColor = '#1f2937';\n            searchInner.style.color = '#d1d5db';\n          }\n        }\n\n        // 设置下拉菜单样式\n        const dropdowns = document.querySelectorAll('.el-select-dropdown');\n        dropdowns.forEach(dropdown => {\n          dropdown.style.backgroundColor = '#1f2937';\n          dropdown.style.borderColor = '#374151';\n          const items = dropdown.querySelectorAll('.el-select-dropdown__item');\n          items.forEach(item => {\n            item.style.color = '#d1d5db';\n            item.onmouseenter = () => {\n              item.style.backgroundColor = '#374151';\n              item.style.color = '#93c5fd';\n            };\n            item.onmouseleave = () => {\n              if (!item.classList.contains('selected')) {\n                item.style.backgroundColor = 'transparent';\n                item.style.color = '#d1d5db';\n              }\n            };\n          });\n          const selectedItems = dropdown.querySelectorAll('.el-select-dropdown__item.selected');\n          selectedItems.forEach(item => {\n            item.style.backgroundColor = '#1e3a8a';\n            item.style.color = '#93c5fd';\n          });\n        });\n      };\n\n      // 立即应用样式\n      applyFilterStyles();\n\n      // 监听选择器点击事件，重新应用样式（因为下拉菜单是动态创建的）\n      const selects = document.querySelectorAll('#alarm-status-select, #alarm-wayline-select');\n      selects.forEach(select => {\n        select.addEventListener('click', () => {\n          setTimeout(applyFilterStyles, 100);\n        });\n      });\n    });\n  },\n  methods: {\n    async loadAlarms() {\n      this.loading = true;\n      try {\n        // 构建请求参数，包含分页和筛选条件\n        const params = {\n          page: this.currentPage,\n          page_size: this.pageSize,\n          search: this.searchQuery,\n          // 搜索关键词\n          status: this.statusFilter,\n          // 状态筛选\n          wayline_id: this.waylineIdFilter // 航线ID筛选(后端过滤器使用的参数名)\n        };\n        const response = await alarmApi.getAlarms(params);\n\n        // 转换数据格式，确保前端显示正确\n        this.alarms = (response?.results || []).map(alarm => ({\n          id: alarm.id,\n          created_at: alarm.created_at,\n          category_name: alarm.category_details ? alarm.category_details.name : alarm.category ? alarm.category.name : '未分类',\n          category_id: alarm.category_details ? alarm.category_details.id : alarm.category ? alarm.category.id : null,\n          latitude: alarm.latitude,\n          longitude: alarm.longitude,\n          content: alarm.content,\n          image_url: alarm.image_url,\n          status: alarm.status,\n          // 支持新的外键关系结构，同时保持兼容旧格式\n          wayline_id: alarm.wayline?.wayline_id || alarm.wayline_id || null,\n          wayline_name: alarm.wayline?.name || null,\n          // 保留完整的wayline对象\n          wayline: alarm.wayline || null,\n          // 保留category_details以便后续使用\n          category_details: alarm.category_details || null\n        }));\n        this.totalAlarms = response?.count || this.alarms.length;\n      } catch (error) {\n        this.$message.error('获取告警列表失败，显示模拟数据');\n        console.error('Load alarms error:', error);\n\n        // 使用模拟数据，确保页面功能正常\n        let mockAlarms = [{\n          id: 1,\n          created_at: new Date().toISOString(),\n          category_name: '设备故障',\n          category_id: 1,\n          latitude: 39.9042,\n          longitude: 116.4074,\n          content: '无人机电机过热，温度达到98°C，建议立即降落检查。电机表面出现异常颜色变化，可能存在严重故障风险。',\n          image_url: 'https://picsum.photos/800/600?random=1',\n          status: 'PENDING',\n          wayline_id: 'WL001'\n        }, {\n          id: 2,\n          created_at: new Date(Date.now() - 3600000).toISOString(),\n          category_name: '信号丢失',\n          category_id: 2,\n          latitude: 39.9142,\n          longitude: 116.4174,\n          content: '遥控信号弱，信号强度低于30%，无人机可能失控。请立即调整操作位置，确保视线内飞行。',\n          image_url: 'https://picsum.photos/800/600?random=2',\n          status: 'RESOLVED',\n          wayline_id: 'WL002'\n        }, {\n          id: 3,\n          created_at: new Date(Date.now() - 7200000).toISOString(),\n          category_name: '电量警告',\n          category_id: 3,\n          latitude: 39.9242,\n          longitude: 116.4274,\n          content: '电池电量低于20%，请尽快返航降落。预计剩余飞行时间不超过5分钟，请注意安全。',\n          image_url: 'https://picsum.photos/800/600?random=3',\n          status: 'COMPLETED',\n          wayline_id: 'WL001'\n        }, {\n          id: 4,\n          created_at: new Date(Date.now() - 10800000).toISOString(),\n          category_name: '天气异常',\n          category_id: 4,\n          latitude: 39.9342,\n          longitude: 116.4374,\n          content: '检测到强风，风速超过20m/s，可能影响飞行稳定性。建议立即降落至安全区域，避免发生意外。',\n          image_url: null,\n          status: 'IGNORED',\n          wayline_id: 'WL003'\n        }];\n\n        // 当API调用失败时，在前端进行模拟过滤，确保筛选功能可见\n        if (this.searchQuery) {\n          const query = this.searchQuery.toLowerCase();\n          mockAlarms = mockAlarms.filter(alarm => alarm.content.toLowerCase().includes(query) || alarm.category_name.toLowerCase().includes(query) || alarm.wayline_id && alarm.wayline_id.toLowerCase().includes(query));\n        }\n        if (this.statusFilter) {\n          mockAlarms = mockAlarms.filter(alarm => alarm.status === this.statusFilter);\n        }\n        if (this.waylineIdFilter) {\n          // 适配下拉选择框的航线ID筛选\n          mockAlarms = mockAlarms.filter(alarm => alarm.wayline && alarm.wayline.wayline_id === this.waylineIdFilter || alarm.wayline_id === this.waylineIdFilter);\n        }\n\n        // 模拟分页\n        const start = (this.currentPage - 1) * this.pageSize;\n        const end = start + this.pageSize;\n        this.alarms = mockAlarms.slice(start, end);\n        this.totalAlarms = mockAlarms.length;\n      } finally {\n        this.loading = false;\n      }\n    },\n    async loadCategories() {\n      try {\n        const categories = await alarmApi.getAlarmCategories();\n        this.categories = categories?.results || categories || [];\n      } catch (error) {\n        this.$message.error('获取告警类型失败，使用默认类型');\n        console.error('Load categories error:', error);\n\n        // 使用模拟数据\n        this.categories = [{\n          id: 1,\n          name: '设备故障',\n          code: 'EQUIPMENT_FAILURE'\n        }, {\n          id: 2,\n          name: '信号丢失',\n          code: 'SIGNAL_LOSS'\n        }, {\n          id: 3,\n          name: '电量警告',\n          code: 'BATTERY_WARNING'\n        }, {\n          id: 4,\n          name: '天气异常',\n          code: 'WEATHER_ABNORMAL'\n        }];\n      }\n    },\n    async loadWaylines() {\n      try {\n        // 假设alarmApi中有获取航线列表的方法\n        const response = await alarmApi.getWaylines();\n        this.waylines = response?.results || response || [];\n      } catch (error) {\n        this.$message.error('获取航线列表失败');\n        console.error('Load waylines error:', error);\n\n        // 使用模拟数据\n        this.waylines = [{\n          id: 1,\n          wayline_id: 'WL001',\n          name: '测试航线1'\n        }, {\n          id: 2,\n          wayline_id: 'WL002',\n          name: '测试航线2'\n        }, {\n          id: 3,\n          wayline_id: 'WL003',\n          name: '河道巡查航线'\n        }, {\n          id: 4,\n          wayline_id: 'WL004',\n          name: '农林监测航线'\n        }, {\n          id: 5,\n          wayline_id: 'WL005',\n          name: '矿区测绘航线'\n        }];\n      }\n    },\n    formatDate(dateString) {\n      if (!dateString) return '';\n      const date = new Date(dateString);\n      return date.toLocaleString('zh-CN', {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n        hour: '2-digit',\n        minute: '2-digit',\n        second: '2-digit'\n      });\n    },\n    getStatusText(status) {\n      const statusMap = {\n        'PENDING': '待处理',\n        'PROCESSING': '处理中',\n        'COMPLETED': '已完成',\n        'IGNORED': '已忽略'\n      };\n      return statusMap[status] || status;\n    },\n    getStatusType(status) {\n      const typeMap = {\n        'PENDING': 'danger',\n        'PROCESSING': 'warning',\n        'COMPLETED': 'success',\n        'IGNORED': 'info'\n      };\n      return typeMap[status] || 'default';\n    },\n    getCategoryType(categoryName) {\n      // 确保categoryName是字符串\n      if (!categoryName || typeof categoryName !== 'string') {\n        return 'info';\n      }\n\n      // 根据不同的告警类型返回不同的标签类型\n      const typeKeywords = {\n        '发热': 'danger',\n        '损伤': 'warning',\n        '故障': 'danger',\n        '异常': 'warning',\n        '隐患': 'warning'\n      };\n      for (const [keyword, type] of Object.entries(typeKeywords)) {\n        if (categoryName.includes(keyword)) {\n          return type;\n        }\n      }\n      return 'info';\n    },\n    // 获取航线ID，支持新旧数据结构\n    getWaylineId(row) {\n      // 优先使用新的外键关系结构\n      if (row.wayline) {\n        return row.wayline.wayline_id || '--';\n      }\n      // 兼容旧的wayline_id字段\n      return row.wayline_id || '--';\n    },\n    // 获取航线名称，支持新旧数据结构\n    getWaylineName(row) {\n      // 优先使用新的外键关系结构\n      if (row.wayline) {\n        return row.wayline.name || '--';\n      }\n      // 兼容从后端转换的wayline_name字段\n      return row.wayline_name || '--';\n    },\n    viewAlarmDetail(alarm) {\n      // 设置当前告警并显示详情弹窗\n      this.currentAlarm = {\n        ...alarm\n      };\n      this.showDetailDialog = true;\n    },\n    updateAlarmStatus(alarm) {\n      console.log('更新状态按钮被点击', alarm);\n      // 确保currentAlarm是响应式的\n      this.currentAlarm = {\n        ...alarm\n      };\n      this.newAlarmStatus = alarm.status || 'PENDING';\n      // 直接设置显示状态\n      this.showStatusDialog = true;\n      console.log('对话框显示状态设置为true', this.showStatusDialog);\n    },\n    async confirmStatusUpdate() {\n      if (!this.newAlarmStatus || !this.currentAlarm?.id) {\n        this.$message.error('请选择有效的状态');\n        return;\n      }\n      try {\n        // 使用patchAlarm方法只更新状态字段\n        await alarmApi.patchAlarm(this.currentAlarm.id, {\n          status: this.newAlarmStatus\n        });\n        this.$message.success('告警状态更新成功');\n        this.showStatusDialog = false;\n        await this.loadAlarms(); // 重新加载列表\n      } catch (error) {\n        this.$message.error('状态更新失败');\n        console.error('Update alarm status error:', error);\n      }\n    },\n    async deleteAlarm(alarmId) {\n      this.$confirm('确定要删除这条告警吗？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        try {\n          await alarmApi.deleteAlarm(alarmId);\n          this.$message.success('删除成功');\n          await this.loadAlarms(); // 重新加载列表\n        } catch (error) {\n          this.$message.error('删除失败');\n          console.error('Delete alarm error:', error);\n        }\n      }).catch(() => {\n        // 取消删除\n      });\n    },\n    handleSizeChange(size) {\n      this.pageSize = size;\n      this.loadAlarms();\n    },\n    handleCurrentChange(current) {\n      this.currentPage = current;\n      this.loadAlarms();\n    }\n  }\n};","map":{"version":3,"names":["alarmApi","name","data","alarms","categories","waylines","loading","searchQuery","statusFilter","waylineIdFilter","currentPage","pageSize","totalAlarms","showStatusDialog","showDetailDialog","currentAlarm","newAlarmStatus","watch","handler","loadAlarms","debounce","computed","filteredAlarms","mounted","loadCategories","loadWaylines","$nextTick","console","log","applyFilterStyles","selectElements","document","querySelectorAll","forEach","select","wrapper","querySelector","style","backgroundColor","borderColor","boxShadow","input","color","icon","searchInput","getElementById","searchWrapper","searchInner","dropdowns","dropdown","items","item","onmouseenter","onmouseleave","classList","contains","selectedItems","selects","addEventListener","setTimeout","methods","params","page","page_size","search","status","wayline_id","response","getAlarms","results","map","alarm","id","created_at","category_name","category_details","category","category_id","latitude","longitude","content","image_url","wayline","wayline_name","count","length","error","$message","mockAlarms","Date","toISOString","now","query","toLowerCase","filter","includes","start","end","slice","getAlarmCategories","code","getWaylines","formatDate","dateString","date","toLocaleString","year","month","day","hour","minute","second","getStatusText","statusMap","getStatusType","typeMap","getCategoryType","categoryName","typeKeywords","keyword","type","Object","entries","getWaylineId","row","getWaylineName","viewAlarmDetail","updateAlarmStatus","confirmStatusUpdate","patchAlarm","success","deleteAlarm","alarmId","$confirm","confirmButtonText","cancelButtonText","then","catch","handleSizeChange","size","handleCurrentChange","current"],"sources":["D:\\projects\\FlightHub-2-Frontend-Standalone-Component\\frontend\\src\\components\\AlarmList.vue"],"sourcesContent":["<template>\r\n  <div class=\"alarm-list-container tech-border glass-effect\" style=\"background-color: #0c4a6e;\">\r\n    <div class=\"header-actions\">\r\n      <h2 class=\"title text-blue-400 tech-title\">告警信息列表</h2>\r\n    </div>\r\n    \r\n    <!-- 搜索和筛选 -->\r\n        <div class=\"search-filters mb-4\">\r\n          <el-input\r\n            v-model=\"searchQuery\"\r\n            placeholder=\"搜索告警内容\"\r\n            prefix-icon=\"el-icon-search\"\r\n            clearable\r\n            @clear=\"loadAlarms\"\r\n            class=\"search-input tech-input\"\r\n            id=\"alarm-search-input\"\r\n          />\r\n          <el-select\r\n            v-model=\"statusFilter\"\r\n            placeholder=\"筛选状态\"\r\n            clearable\r\n            @change=\"loadAlarms\"\r\n            class=\"status-filter tech-select\"\r\n            id=\"alarm-status-select\"\r\n            :style=\"{ backgroundColor: '#0c4a6e', borderColor: '#0ea5e9', color: '#e0f2fe' }\"\r\n          >\r\n            <el-option label=\"全部\" value=\"\" />\r\n            <el-option label=\"待处理\" value=\"PENDING\" />\r\n            <el-option label=\"处理中\" value=\"PROCESSING\" />\r\n            <el-option label=\"已完成\" value=\"COMPLETED\" />\r\n            <el-option label=\"已忽略\" value=\"IGNORED\" />\r\n          </el-select>\r\n          <el-select\r\n            v-model=\"waylineIdFilter\"\r\n            placeholder=\"筛选航线\"\r\n            clearable\r\n            @change=\"loadAlarms\"\r\n            class=\"wayline-filter tech-select\"\r\n            id=\"alarm-wayline-select\"\r\n            :style=\"{ backgroundColor: '#0c4a6e', borderColor: '#0ea5e9', color: '#e0f2fe' }\"\r\n          >\r\n            <el-option label=\"全部\" value=\"\" />\r\n            <el-option\r\n              v-for=\"wayline in waylines\"\r\n              :key=\"wayline.id\"\r\n              :label=\"`${wayline.wayline_id} - ${wayline.name}`\"\r\n              :value=\"wayline.wayline_id\"\r\n            />\r\n          </el-select>\r\n        </div>\r\n    \r\n    <!-- 告警列表 -->\r\n    <el-table\r\n      v-loading=\"loading\"\r\n      :data=\"filteredAlarms\"\r\n      style=\"width: 100%\"\r\n      border\r\n      empty-text=\"暂无告警数据\"\r\n      :fit=\"true\"\r\n        :scroll-x=\"'max-content'\"\r\n        class=\"tech-table\"\r\n    >\r\n      <el-table-column prop=\"id\" label=\"告警ID\" min-width=\"80\" />\r\n      <el-table-column label=\"航线ID\" min-width=\"100\">\r\n        <template #default=\"{row}\">\r\n          {{ getWaylineId(row) }}\r\n        </template>\r\n      </el-table-column>\r\n      \r\n      <el-table-column label=\"航线名称\" min-width=\"150\">\r\n        <template #default=\"{row}\">\r\n          {{ getWaylineName(row) }}\r\n        </template>\r\n      </el-table-column>\r\n      \r\n      <el-table-column prop=\"created_at\" label=\"报警日期时间\" min-width=\"180\">\r\n        <template #default=\"{row}\">\r\n          {{ formatDate(row?.created_at || '') }}\r\n        </template>\r\n      </el-table-column>\r\n      \r\n      <el-table-column prop=\"category_name\" label=\"报警类型\" min-width=\"120\">\r\n        <template #default=\"{row}\">\r\n          <el-tag :type=\"getCategoryType(row?.category_name || '')\" class=\"tech-badge-glow\">\r\n            {{ row?.category_name || '未分类' }}\r\n          </el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      \r\n      <el-table-column prop=\"content\" label=\"告警描述\" min-width=\"200\" show-overflow-tooltip />\r\n      \r\n      <!-- 移除表格中的图片显示，改为在详情弹窗中显示 -->\r\n      \r\n      <el-table-column prop=\"location\" label=\"报警位置\" min-width=\"150\">\r\n        <template #default=\"{row}\">\r\n          坐标({{ row?.latitude || '--' }}, {{ row?.longitude || '--' }})\r\n        </template>\r\n      </el-table-column>\r\n      \r\n      <el-table-column prop=\"status\" label=\"状态\" min-width=\"100\">\r\n        <template #default=\"{row}\">\r\n          <el-tag \r\n            :type=\"getStatusType(row?.status || '')\" \r\n            class=\"tech-badge-glow\" \r\n            :class=\"`alarm-status-${(row?.status || '').toLowerCase()}`\"\r\n          >\r\n            {{ getStatusText(row?.status || '') }}\r\n          </el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      \r\n      <el-table-column label=\"操作\" min-width=\"180\">\r\n        <template #default=\"{row}\">\r\n          <el-button size=\"small\" class=\"tech-button\" @click=\"viewAlarmDetail(row)\">查看</el-button>\r\n          <el-button size=\"small\" type=\"primary\" class=\"tech-button-primary\" @click=\"updateAlarmStatus(row)\">更新状态</el-button>\r\n          <el-button size=\"small\" type=\"danger\" class=\"tech-button-danger\" @click=\"deleteAlarm(row?.id || 0)\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    \r\n    <!-- 分页 -->\r\n    <div class=\"pagination-container tech-pagination\">\r\n      <el-pagination\r\n        v-model=\"currentPage\"\r\n        :page-size=\"pageSize\"\r\n        :total=\"totalAlarms\"\r\n        layout=\"total, prev, pager, next, jumper\"\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        background\r\n        class=\"tech-pagination\"\r\n      />\r\n    </div>\r\n    \r\n    <!-- 状态更新对话框 -->\r\n    <el-dialog\r\n      title=\"更新告警状态\"\r\n      v-model=\"showStatusDialog\"\r\n      width=\"400px\"\r\n      class=\"tech-dialog glass-effect\"\r\n    >\r\n      <div class=\"status-dialog-content\">\r\n        <h4 class=\"text-blue-400\">告警信息</h4>\r\n        <p><strong class=\"text-gray-300\">告警ID:</strong> <span class=\"text-blue-300\">{{ currentAlarm?.id }}</span></p>\r\n        <p><strong class=\"text-gray-300\">告警描述:</strong> <span class=\"text-blue-300\">{{ currentAlarm?.content }}</span></p>\r\n        <p><strong class=\"text-gray-300\">当前状态:</strong> \r\n          <el-tag :type=\"getStatusType(currentAlarm?.status || '')\" class=\"tech-badge-glow\">\r\n            {{ getStatusText(currentAlarm?.status || '') }}\r\n          </el-tag>\r\n        </p>\r\n        \r\n        <h4 class=\"text-blue-400\" style=\"margin-top: 20px;\">更新为</h4>\r\n        <el-select v-model=\"newAlarmStatus\" placeholder=\"请选择新状态\" style=\"width: 100%;\" class=\"tech-select\">\r\n          <el-option label=\"待处理\" value=\"PENDING\" />\r\n          <el-option label=\"处理中\" value=\"PROCESSING\" />\r\n          <el-option label=\"已完成\" value=\"COMPLETED\" />\r\n          <el-option label=\"已忽略\" value=\"IGNORED\" />\r\n        </el-select>\r\n      </div>\r\n      \r\n      <div slot=\"footer\" class=\"dialog-footer\" style=\"background-color: #075985;\">\r\n        <el-button class=\"tech-button\" @click=\"showStatusDialog = false\">取消</el-button>\r\n        <el-button type=\"primary\" class=\"tech-button-primary\" @click=\"confirmStatusUpdate\">确定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    \r\n    <!-- 告警详情弹窗 -->\r\n    <el-dialog\r\n      v-model=\"showDetailDialog\"\r\n      title=\"告警详情\"\r\n      width=\"700px\"\r\n      :close-on-click-modal=\"false\"\r\n      class=\"tech-dialog glass-effect\" style=\"background-color: #0c4a6e;\"\r\n    >\r\n      <div class=\"alarm-detail-container\">\r\n        <div class=\"detail-item\">\r\n          <label class=\"detail-label\">告警ID：</label>\r\n          <span class=\"detail-value\">{{ currentAlarm?.id || '--' }}</span>\r\n        </div>\r\n        \r\n        <div class=\"detail-item\">\r\n          <label class=\"detail-label\">告警类型：</label>\r\n          <el-tag :type=\"getCategoryType(currentAlarm?.category_name || '')\">\r\n            {{ currentAlarm?.category_name || '未分类' }}\r\n          </el-tag>\r\n        </div>\r\n        \r\n        <div class=\"detail-item\">\r\n          <label class=\"detail-label\">告警描述：</label>\r\n          <div class=\"detail-content\">{{ currentAlarm?.content || '--' }}</div>\r\n        </div>\r\n        \r\n        <div class=\"detail-item\">\r\n          <label class=\"detail-label\">报警位置：</label>\r\n          <span class=\"detail-value\">坐标({{ currentAlarm?.latitude || '--' }}, {{ currentAlarm?.longitude || '--' }})</span>\r\n        </div>\r\n        \r\n        <div class=\"detail-item\">\r\n          <label class=\"detail-label\">报警时间：</label>\r\n          <span class=\"detail-value\">{{ formatDate(currentAlarm?.created_at || '') }}</span>\r\n        </div>\r\n        \r\n        <div class=\"detail-item\">\r\n          <label class=\"detail-label\">告警状态：</label>\r\n          <el-tag :type=\"getStatusType(currentAlarm?.status || '')\">\r\n            {{ getStatusText(currentAlarm?.status || '') }}\r\n          </el-tag>\r\n        </div>\r\n        \r\n        <div class=\"detail-item\">\r\n          <label class=\"detail-label\">航线信息：</label>\r\n          <span class=\"detail-value\">\r\n            {{ getWaylineName(currentAlarm) }} ({{ getWaylineId(currentAlarm) }})\r\n          </span>\r\n        </div>\r\n        \r\n        <div class=\"detail-item\">\r\n          <label class=\"detail-label\">报警图片：</label>\r\n          <div v-if=\"currentAlarm?.image_url\" class=\"alarm-image-container\">\r\n            <el-image\r\n              :src=\"currentAlarm.image_url\"\r\n              :preview-src-list=\"[currentAlarm.image_url]\"\r\n              fit=\"contain\"\r\n              style=\"max-width: 100%; max-height: 400px; cursor: zoom-in\"\r\n            />\r\n          </div>\r\n          <span v-else class=\"text-gray-400\">暂无图片</span>\r\n        </div>\r\n      </div>\r\n      \r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button class=\"tech-button\" @click=\"showDetailDialog = false\">关闭</el-button>\r\n        </div>\r\n      </el-dialog>\r\n    </div>\r\n  </template>\r\n\r\n<style scoped>\r\n/* 主容器样式 */\r\n.alarm-list-container {\r\n  background-color: #0c4a6e;\r\n  border-radius: 8px;\r\n  padding: 20px;\r\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n/* 标题样式 */\r\n.tech-title {\r\n  position: relative;\r\n  padding-bottom: 8px;\r\n  margin-bottom: 20px;\r\n  font-weight: 600;\r\n  font-size: 20px;\r\n}\r\n\r\n.tech-title::after {\r\n  content: '';\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 0;\r\n  width: 80px;\r\n  height: 2px;\r\n  background: linear-gradient(90deg, #0ea5e9, #10b981);\r\n}\r\n\r\n/* 搜索和筛选区域 */\r\n.search-filters {\r\n  display: flex;\r\n  gap: 16px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.search-input, .status-filter, .wayline-filter {\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.search-input {\r\n  width: 300px;\r\n}\r\n\r\n.status-filter {\r\n  width: 150px;\r\n}\r\n\r\n.wayline-filter {\r\n  width: 150px;\r\n}\r\n\r\n/* 科技风格输入框 */\r\n.tech-input {\r\n  background-color: #075985;\r\n  border: 1px solid #0ea5e9;\r\n  color: #f3f4f6;\r\n}\r\n\r\n.tech-input :deep(.el-input__inner) {\r\n  background-color: #075985;\r\n  border: 1px solid #0ea5e9;\r\n  color: #f3f4f6;\r\n}\r\n\r\n.tech-input :deep(.el-input__inner:focus) {\r\n  border-color: #0ea5e9;\r\n  box-shadow: 0 0 0 2px rgba(14, 165, 233, 0.2);\r\n}\r\n\r\n/* 科技风格下拉选择框 */\r\n.tech-select {\r\n  background-color: #075985;\r\n  border: 1px solid #0ea5e9;\r\n}\r\n\r\n.tech-select :deep(.el-input__inner) {\r\n  background-color: #075985;\r\n  border: 1px solid #0ea5e9;\r\n  color: #f3f4f6;\r\n}\r\n\r\n.tech-select :deep(.el-input__inner:focus) {\r\n  border-color: #0ea5e9;\r\n  box-shadow: 0 0 0 2px rgba(14, 165, 233, 0.2);\r\n}\r\n\r\n.tech-select :deep(.el-select-dropdown) {\r\n  background-color: #0c4a6e;\r\n  border: 1px solid #0ea5e9;\r\n}\r\n\r\n.tech-select :deep(.el-select-dropdown__item) {\r\n  color: #f3f4f6;\r\n}\r\n\r\n.tech-select :deep(.el-select-dropdown__item:hover) {\r\n  background-color: #075985;\r\n}\r\n\r\n.tech-select :deep(.el-select-dropdown__item.selected) {\r\n  color: #0ea5e9;\r\n  background-color: #075985;\r\n}\r\n\r\n/* 科技风格表格 */\r\n.tech-table {\r\n  background-color: #075985;\r\n  color: #e0f2fe;\r\n  border: 1px solid #0ea5e9;\r\n}\r\n\r\n.tech-table :deep(.el-table__header) {\r\n  background-color: #0c4a6e;\r\n}\r\n\r\n.tech-table :deep(.el-table__header th) {\r\n  background-color: #0c4a6e;\r\n  color: #0ea5e9;\r\n  font-weight: 600;\r\n  border-bottom: 1px solid #0ea5e9;\r\n}\r\n\r\n.tech-table :deep(.el-table__body tr) {\r\n  background-color: #075985;\r\n  border-bottom: 1px solid #0ea5e9;\r\n}\r\n\r\n.tech-table :deep(.el-table__body tr:hover > td) {\r\n  background-color: #075985;\r\n}\r\n\r\n.tech-table :deep(.el-table__body tr.current-row > td) {\r\n  background-color: #075985;\r\n  color: #0ea5e9;\r\n}\r\n\r\n.tech-table :deep(.el-table__empty-text) {\r\n  color: #7dd3fc;\r\n}\r\n\r\n/* 科技风格按钮 */\r\n.tech-button {\r\n  background-color: #0c4a6e;\r\n  border: 1px solid #0ea5e9;\r\n  color: #e0f2fe;\r\n  transition: all 0.3s ease;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.tech-button:hover {\r\n  background-color: #0ea5e9;\r\n  border-color: #0ea5e9;\r\n  box-shadow: 0 0 10px rgba(14, 165, 233, 0.3);\r\n}\r\n\r\n.tech-button-primary {\r\n  background: linear-gradient(135deg, #0ea5e9, #0369a1);\r\n  border: 1px solid #0ea5e9;\r\n  color: white;\r\n}\r\n\r\n.tech-button-primary:hover {\r\n  background: linear-gradient(135deg, #0284c7, #075985);\r\n  box-shadow: 0 0 15px rgba(14, 165, 233, 0.5);\r\n}\r\n\r\n.tech-button-danger {\r\n  background: linear-gradient(135deg, #ef4444, #b91c1c);\r\n  border: 1px solid #ef4444;\r\n  color: white;\r\n}\r\n\r\n.tech-button-danger:hover {\r\n  background: linear-gradient(135deg, #dc2626, #991b1b);\r\n  box-shadow: 0 0 15px rgba(239, 68, 68, 0.5);\r\n}\r\n\r\n/* 科技风格标签 */\r\n.tech-badge-glow {\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.tech-badge-glow::after {\r\n  content: '';\r\n  position: absolute;\r\n  top: -50%;\r\n  left: -50%;\r\n  width: 200%;\r\n  height: 200%;\r\n  background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);\r\n  transform: rotate(45deg);\r\n  animation: badgeGlow 2s infinite;\r\n}\r\n\r\n@keyframes badgeGlow {\r\n  0% { transform: translateX(-100%) rotate(45deg); }\r\n  100% { transform: translateX(100%) rotate(45deg); }\r\n}\r\n\r\n/* 待处理状态样式 - 红色 */\r\n.alarm-status-pending {\r\n  background: linear-gradient(135deg, #ef4444, #b91c1c) !important;\r\n  border-color: #ef4444 !important;\r\n  color: white !important;\r\n  font-weight: 500;\r\n}\r\n\r\n/* 处理中状态样式 - 橙色 */\r\n.alarm-status-processing {\r\n  background: linear-gradient(135deg, #f59e0b, #d97706) !important;\r\n  border-color: #f59e0b !important;\r\n  color: white !important;\r\n  font-weight: 500;\r\n}\r\n\r\n/* 已完成状态样式 - 绿色 */\r\n.alarm-status-completed {\r\n  background: linear-gradient(135deg, #10b981, #059669) !important;\r\n  border-color: #10b981 !important;\r\n  color: white !important;\r\n  font-weight: 500;\r\n}\r\n\r\n/* 已忽略状态样式 - 蓝色 */\r\n.alarm-status-ignored {\r\n  background: linear-gradient(135deg, #3b82f6, #2563eb) !important;\r\n  border-color: #3b82f6 !important;\r\n  color: white !important;\r\n  font-weight: 500;\r\n}\r\n\r\n/* 分页样式 */\r\n.tech-pagination {\r\n  margin-top: 20px;\r\n  text-align: center;\r\n}\r\n\r\n.tech-pagination :deep(.el-pagination) {\r\n  color: #d1d5db;\r\n}\r\n\r\n.tech-pagination :deep(.el-pagination button) {\r\n  background-color: #1f2937;\r\n  border: 1px solid #374151;\r\n  color: #d1d5db;\r\n}\r\n\r\n.tech-pagination :deep(.el-pagination button:hover) {\r\n  color: #3b82f6;\r\n  border-color: #3b82f6;\r\n}\r\n\r\n.tech-pagination :deep(.el-pagination .el-pager li) {\r\n  color: #d1d5db;\r\n}\r\n\r\n.tech-pagination :deep(.el-pagination .el-pager li:hover) {\r\n  color: #3b82f6;\r\n}\r\n\r\n.tech-pagination :deep(.el-pagination .el-pager li.active) {\r\n  color: #3b82f6;\r\n  border-color: #3b82f6;\r\n}\r\n\r\n.tech-pagination :deep(.el-pagination__editor) {\r\n  background-color: #111827;\r\n  border: 1px solid #374151;\r\n  color: #f3f4f6;\r\n}\r\n\r\n/* 对话框样式 */\r\n.tech-dialog {\r\n  background-color: #1f2937;\r\n  border: 1px solid #374151;\r\n  border-radius: 8px;\r\n  box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);\r\n}\r\n\r\n.tech-dialog :deep(.el-dialog__header) {\r\n  background-color: #111827;\r\n  border-bottom: 1px solid #374151;\r\n}\r\n\r\n.tech-dialog :deep(.el-dialog__title) {\r\n  color: #3b82f6;\r\n  font-weight: 600;\r\n}\r\n\r\n.tech-dialog :deep(.el-dialog__body) {\r\n  background-color: #1f2937;\r\n  color: #d1d5db;\r\n}\r\n\r\n/* 确保状态更新对话框中的标题颜色正确显示 */\r\n.status-dialog-content h4 {\r\n  color: #93c5fd !important;\r\n  font-weight: 600;\r\n}\r\n\r\n/* 定义text-blue-400类以确保一致的颜色 */\r\n.text-blue-400 {\r\n  color: #93c5fd !important;\r\n}\r\n\r\n.tech-dialog :deep(.el-dialog__footer) {\r\n  background-color: #111827;\r\n  border-top: 1px solid #374151;\r\n}\r\n\r\n/* 详情容器样式 */\r\n.alarm-detail-container {\r\n  background-color: #111827;\r\n  padding: 20px;\r\n  border-radius: 6px;\r\n  border: 1px solid #374151;\r\n}\r\n\r\n.detail-item {\r\n  margin-bottom: 16px;\r\n  display: flex;\r\n  align-items: flex-start;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n/* 更新标签样式，使其与状态更新对话框保持一致 */\r\n.detail-label {\r\n  color: #9ca3af !important;\r\n  font-weight: 600 !important;\r\n  margin-right: 8px;\r\n  min-width: 100px;\r\n}\r\n\r\n/* 更新值样式，使用蓝色突出显示，与状态更新对话框中的text-blue-300保持一致 */\r\n.detail-value {\r\n  color: #93c5fd !important;\r\n  font-weight: 500;\r\n}\r\n\r\n/* 更新内容样式，使其更易读 */\r\n.detail-content {\r\n  color: #93c5fd !important;\r\n  line-height: 1.6;\r\n  font-weight: 500;\r\n  flex: 1;\r\n  min-width: 0;\r\n  word-break: break-word;\r\n}\r\n\r\n/* 科技风格边框 */\r\n  .tech-border {\r\n    border: 1px solid #374151;\r\n    position: relative;\r\n    background: linear-gradient(135deg, rgba(31, 41, 55, 0.9), rgba(17, 24, 39, 0.9));\r\n  }\r\n\r\n  .tech-border::before {\r\n    content: '';\r\n    position: absolute;\r\n    top: -2px;\r\n    left: -2px;\r\n    right: -2px;\r\n    bottom: -2px;\r\n    background: linear-gradient(45deg, #3b82f6, #10b981, #3b82f6);\r\n    z-index: -1;\r\n    animation: borderRotate 8s linear infinite;\r\n    opacity: 0.3;\r\n    border-radius: 8px;\r\n  }\r\n\r\n  @keyframes borderRotate {\r\n    0% { background-position: 0% 0%; }\r\n    100% { background-position: 300% 0%; }\r\n  }\r\n\r\n  /* 玻璃效果 */\r\n  .glass-effect {\r\n    backdrop-filter: blur(8px);\r\n    background-color: rgba(31, 41, 55, 0.8);\r\n  }\r\n\r\n  /* 加载动画 */\r\n  .tech-table :deep(.el-loading-spinner .path) {\r\n    stroke: #3b82f6;\r\n  }\r\n\r\n  .tech-table :deep(.el-loading-text) {\r\n    color: #3b82f6;\r\n  }\r\n\r\n  /* 科技风格输入框 */\r\n  .tech-input {\r\n    background-color: #1f2937;\r\n    border: 1px solid #374151;\r\n    color: #d1d5db;\r\n  }\r\n\r\n  .tech-input :deep(.el-input__wrapper) {\r\n    background-color: #1f2937 !important;\r\n    border: 1px solid #374151 !important;\r\n    box-shadow: none !important;\r\n  }\r\n\r\n  .tech-input :deep(.el-input__inner) {\r\n    background-color: #1f2937 !important;\r\n    border: none !important;\r\n    color: #d1d5db !important;\r\n  }\r\n\r\n  .tech-input :deep(.el-input__inner):focus {\r\n    color: #93c5fd !important;\r\n  }\r\n\r\n  /* 科技风格下拉选择框 - 全面增强优先级 */\r\n  .search-filters .status-filter, \r\n  .search-filters .wayline-filter {\r\n    background-color: #1f2937 !important;\r\n    border: 1px solid #374151 !important;\r\n    color: #d1d5db !important;\r\n  }\r\n\r\n  /* 直接针对特定类的样式 */\r\n  .search-filters .status-filter :deep(.el-input__wrapper),\r\n  .search-filters .wayline-filter :deep(.el-input__wrapper) {\r\n    background-color: #1f2937 !important;\r\n    border: 1px solid #374151 !important;\r\n    box-shadow: none !important;\r\n  }\r\n\r\n  .search-filters .status-filter :deep(.el-input__inner),\r\n  .search-filters .wayline-filter :deep(.el-input__inner) {\r\n    background-color: #1f2937 !important;\r\n    color: #d1d5db !important;\r\n  }\r\n\r\n  /* 图标样式 */\r\n  .search-filters .status-filter :deep(.el-input__suffix-inner .el-input__icon),\r\n  .search-filters .wayline-filter :deep(.el-input__suffix-inner .el-input__icon) {\r\n    color: #9ca3af !important;\r\n  }\r\n\r\n  /* 聚焦状态 */\r\n  .search-filters .status-filter :deep(.el-input__inner:focus),\r\n  .search-filters .wayline-filter :deep(.el-input__inner:focus) {\r\n    color: #93c5fd !important;\r\n  }\r\n\r\n  /* 搜索筛选区域内的所有下拉菜单 */\r\n  .search-filters .tech-select {\r\n    background-color: #1f2937 !important;\r\n    border: 1px solid #374151 !important;\r\n    color: #d1d5db !important;\r\n  }\r\n\r\n  .search-filters .tech-select :deep(.el-input__wrapper) {\r\n    background-color: #1f2937 !important;\r\n    border: 1px solid #374151 !important;\r\n    box-shadow: none !important;\r\n  }\r\n\r\n  /* 全局Element Plus下拉组件样式覆盖 */\r\n  :deep(.el-select-dropdown) {\r\n    background-color: #1f2937 !important;\r\n    border: 1px solid #374151 !important;\r\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5) !important;\r\n  }\r\n\r\n  :deep(.el-select-dropdown__item) {\r\n    color: #d1d5db !important;\r\n  }\r\n\r\n  :deep(.el-select-dropdown__item:hover) {\r\n    background-color: #374151 !important;\r\n    color: #93c5fd !important;\r\n  }\r\n\r\n  :deep(.el-select-dropdown__item.selected) {\r\n    background-color: #1e3a8a !important;\r\n    color: #93c5fd !important;\r\n  }\r\n\r\n  /* 针对特定ID的筛选框样式 - 最高优先级 */\r\n  #alarm-status-select,\r\n  #alarm-wayline-select {\r\n    background-color: #1f2937 !important;\r\n    border: 1px solid #374151 !important;\r\n    color: #d1d5db !important;\r\n    --el-input-bg-color: #1f2937 !important;\r\n    --el-input-border-color: #374151 !important;\r\n    --el-input-text-color: #d1d5db !important;\r\n  }\r\n\r\n  /* 使用深度选择器确保样式穿透 */\r\n  #alarm-status-select :deep(.el-input__wrapper),\r\n  #alarm-wayline-select :deep(.el-input__wrapper) {\r\n    background-color: #1f2937 !important;\r\n    border: 1px solid #374151 !important;\r\n    box-shadow: none !important;\r\n  }\r\n\r\n  #alarm-status-select :deep(.el-input__inner),\r\n  #alarm-wayline-select :deep(.el-input__inner) {\r\n    background-color: #1f2937 !important;\r\n    color: #d1d5db !important;\r\n  }\r\n\r\n  #alarm-status-select :deep(.el-input__suffix-inner .el-input__icon),\r\n  #alarm-wayline-select :deep(.el-input__suffix-inner .el-input__icon) {\r\n    color: #9ca3af !important;\r\n  }\r\n\r\n  /* 强制覆盖Element Plus组件样式 */\r\n  .search-filters .el-select.el-input--suffix .el-input__wrapper {\r\n    background-color: #1f2937 !important;\r\n    border: 1px solid #374151 !important;\r\n  }\r\n\r\n  .search-filters .el-select.el-input--suffix .el-input__wrapper .el-input__inner {\r\n    background-color: #1f2937 !important;\r\n    color: #d1d5db !important;\r\n  }\r\n\r\n  /* 最高优先级的全局样式覆盖 */\r\n  html :deep(.el-select .el-input__wrapper) {\r\n    background-color: #1f2937 !important;\r\n    border: 1px solid #374151 !important;\r\n  }\r\n\r\n  html :deep(.el-select .el-input__inner) {\r\n    background-color: #1f2937 !important;\r\n    color: #d1d5db !important;\r\n  }\r\n\r\n  /* 全局输入组件样式 */\r\n  :deep(.el-input__wrapper) {\r\n    background-color: #1f2937 !important;\r\n    border: 1px solid #374151 !important;\r\n  }\r\n\r\n  :deep(.el-input__inner) {\r\n    background-color: #1f2937 !important;\r\n    color: #d1d5db !important;\r\n  }\r\n\r\n  /* 确保全局覆盖 */\r\n  .el-select {\r\n    --el-input-bg-color: #1f2937 !important;\r\n    --el-input-border-color: #374151 !important;\r\n    --el-input-text-color: #d1d5db !important;\r\n  }\r\n\r\n  /* 科技风格分页控件 */\r\n  .tech-pagination {\r\n    background-color: #1f2937 !important;\r\n    color: #d1d5db !important;\r\n  }\r\n\r\n  .tech-pagination :deep(.el-pagination__total) {\r\n    color: #9ca3af !important;\r\n  }\r\n\r\n  .tech-pagination :deep(.el-pagination button) {\r\n    background-color: #1f2937 !important;\r\n    border: 1px solid #374151 !important;\r\n    color: #d1d5db !important;\r\n  }\r\n\r\n  .tech-pagination :deep(.el-pagination button:hover:not(:disabled)) {\r\n    background-color: #374151 !important;\r\n    border-color: #3b82f6 !important;\r\n    color: #93c5fd !important;\r\n    box-shadow: 0 0 10px rgba(59, 130, 246, 0.3) !important;\r\n  }\r\n\r\n  .tech-pagination :deep(.el-pagination button:disabled) {\r\n    background-color: #1f2937 !important;\r\n    border-color: #374151 !important;\r\n    color: #4b5563 !important;\r\n  }\r\n\r\n  .tech-pagination :deep(.el-pagination .el-pager li) {\r\n    background-color: #1f2937 !important;\r\n    border: 1px solid #374151 !important;\r\n    color: #d1d5db !important;\r\n  }\r\n\r\n  .tech-pagination :deep(.el-pagination .el-pager li:hover:not(.active)) {\r\n    background-color: #374151 !important;\r\n    border-color: #3b82f6 !important;\r\n    color: #93c5fd !important;\r\n    box-shadow: 0 0 10px rgba(59, 130, 246, 0.3) !important;\r\n  }\r\n\r\n  .tech-pagination :deep(.el-pagination .el-pager li.active) {\r\n    background-color: #3b82f6 !important;\r\n    border-color: #3b82f6 !important;\r\n    color: white !important;\r\n    box-shadow: 0 0 15px rgba(59, 130, 246, 0.5) !important;\r\n  }\r\n\r\n  .tech-pagination :deep(.el-pagination__editor) {\r\n    background-color: #1f2937 !important;\r\n    border: 1px solid #374151 !important;\r\n    color: #d1d5db !important;\r\n  }\r\n\r\n  .tech-pagination :deep(.el-pagination__editor:focus) {\r\n    border-color: #3b82f6 !important;\r\n    box-shadow: 0 0 10px rgba(59, 130, 246, 0.3) !important;\r\n  }\r\n</style>\r\n\r\n<style scoped>\r\n.alarm-detail-container {\r\n  padding: 10px 0;\r\n}\r\n\r\n.detail-item {\r\n  margin-bottom: 20px;\r\n  display: flex;\r\n  align-items: flex-start;\r\n}\r\n\r\n.detail-label {\r\n  width: 100px;\r\n  font-weight: bold;\r\n  color: #606266;\r\n  margin-right: 10px;\r\n}\r\n\r\n.detail-value {\r\n  flex: 1;\r\n  color: #303133;\r\n}\r\n\r\n.detail-content {\r\n  flex: 1;\r\n  color: #303133;\r\n  line-height: 1.8;\r\n  word-break: break-all;\r\n}\r\n\r\n.alarm-image-container {\r\n  flex: 1;\r\n  text-align: center;\r\n  padding: 20px 0;\r\n}\r\n\r\n.text-gray-400 {\r\n  color: #c0c4cc;\r\n}\r\n</style>\r\n\r\n<script>\r\nimport alarmApi from '../api/alarmApi'\r\n\r\nexport default {\r\n  name: 'AlarmList',\r\n  data() {\r\n    return {\r\n      alarms: [],\r\n      categories: [],\r\n      waylines: [], // 存储航线数据\r\n      loading: false,\r\n      searchQuery: '',\r\n      statusFilter: '',\r\n      waylineIdFilter: '',\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n      totalAlarms: 0,\r\n      showStatusDialog: false,\r\n      showDetailDialog: false, // 详情弹窗显示状态\r\n      currentAlarm: null,\r\n      newAlarmStatus: ''\r\n    }\r\n  },\r\n  watch: {\r\n    // 监听搜索关键词变化\r\n    searchQuery: {\r\n      handler() {\r\n        this.currentPage = 1 // 重置到第一页\r\n        this.loadAlarms()\r\n      },\r\n      debounce: 300 // 防抖，避免频繁请求\r\n    },\r\n    // 监听状态筛选变化\r\n    statusFilter() {\r\n      this.currentPage = 1\r\n      this.loadAlarms()\r\n    },\r\n    // 监听航线ID筛选变化\r\n    waylineIdFilter: {\r\n      handler() {\r\n        this.currentPage = 1\r\n        this.loadAlarms()\r\n      },\r\n      debounce: 300\r\n    }\r\n  },\r\n  computed: {\r\n    // 直接使用从后端获取的数据，不再需要前端过滤\r\n    filteredAlarms() {\r\n      return this.alarms\r\n    }\r\n  },\r\n  async mounted() {\r\n    await this.loadAlarms()\r\n    await this.loadCategories()\r\n    await this.loadWaylines()\r\n    \r\n    // 使用JavaScript直接修改筛选框样式 - 最高优先级\r\n    this.$nextTick(() => {\r\n      console.log('应用内联样式到筛选框')\r\n      \r\n      // 为所有筛选框设置样式\r\n      const applyFilterStyles = () => {\r\n        // 查找所有选择器容器\r\n        const selectElements = document.querySelectorAll('#alarm-status-select, #alarm-wayline-select')\r\n        selectElements.forEach(select => {\r\n          // 获取输入框包装器\r\n          const wrapper = select.querySelector('.el-input__wrapper')\r\n          if (wrapper) {\r\n            wrapper.style.backgroundColor = '#1f2937'\r\n            wrapper.style.borderColor = '#374151'\r\n            wrapper.style.boxShadow = 'none'\r\n          }\r\n          \r\n          // 获取输入框\r\n          const input = select.querySelector('.el-input__inner')\r\n          if (input) {\r\n            input.style.backgroundColor = '#1f2937'\r\n            input.style.color = '#d1d5db'\r\n          }\r\n          \r\n          // 获取图标\r\n          const icon = select.querySelector('.el-input__suffix-inner .el-input__icon')\r\n          if (icon) {\r\n            icon.style.color = '#9ca3af'\r\n          }\r\n        })\r\n        \r\n        // 特别处理搜索输入框\r\n        const searchInput = document.getElementById('alarm-search-input')\r\n        if (searchInput) {\r\n          const searchWrapper = searchInput.querySelector('.el-input__wrapper')\r\n          const searchInner = searchInput.querySelector('.el-input__inner')\r\n          if (searchWrapper) {\r\n            searchWrapper.style.backgroundColor = '#1f2937'\r\n            searchWrapper.style.borderColor = '#374151'\r\n          }\r\n          if (searchInner) {\r\n            searchInner.style.backgroundColor = '#1f2937'\r\n            searchInner.style.color = '#d1d5db'\r\n          }\r\n        }\r\n        \r\n        // 设置下拉菜单样式\r\n        const dropdowns = document.querySelectorAll('.el-select-dropdown')\r\n        dropdowns.forEach(dropdown => {\r\n          dropdown.style.backgroundColor = '#1f2937'\r\n          dropdown.style.borderColor = '#374151'\r\n          \r\n          const items = dropdown.querySelectorAll('.el-select-dropdown__item')\r\n          items.forEach(item => {\r\n            item.style.color = '#d1d5db'\r\n            item.onmouseenter = () => {\r\n              item.style.backgroundColor = '#374151'\r\n              item.style.color = '#93c5fd'\r\n            }\r\n            item.onmouseleave = () => {\r\n              if (!item.classList.contains('selected')) {\r\n                item.style.backgroundColor = 'transparent'\r\n                item.style.color = '#d1d5db'\r\n              }\r\n            }\r\n          })\r\n          \r\n          const selectedItems = dropdown.querySelectorAll('.el-select-dropdown__item.selected')\r\n          selectedItems.forEach(item => {\r\n            item.style.backgroundColor = '#1e3a8a'\r\n            item.style.color = '#93c5fd'\r\n          })\r\n        })\r\n      }\r\n      \r\n      // 立即应用样式\r\n      applyFilterStyles()\r\n      \r\n      // 监听选择器点击事件，重新应用样式（因为下拉菜单是动态创建的）\r\n      const selects = document.querySelectorAll('#alarm-status-select, #alarm-wayline-select')\r\n      selects.forEach(select => {\r\n        select.addEventListener('click', () => {\r\n          setTimeout(applyFilterStyles, 100)\r\n        })\r\n      })\r\n    })\r\n  },\r\n  methods: {\r\n    async loadAlarms() {\r\n      this.loading = true\r\n      try {\r\n        // 构建请求参数，包含分页和筛选条件\r\n        const params = {\r\n          page: this.currentPage,\r\n          page_size: this.pageSize,\r\n          search: this.searchQuery, // 搜索关键词\r\n          status: this.statusFilter, // 状态筛选\r\n          wayline_id: this.waylineIdFilter // 航线ID筛选(后端过滤器使用的参数名)\r\n        }\r\n        \r\n        const response = await alarmApi.getAlarms(params)\r\n        \r\n        // 转换数据格式，确保前端显示正确\r\n        this.alarms = (response?.results || []).map(alarm => ({\r\n          id: alarm.id,\r\n          created_at: alarm.created_at,\r\n          category_name: alarm.category_details ? alarm.category_details.name : (alarm.category ? alarm.category.name : '未分类'),\r\n          category_id: alarm.category_details ? alarm.category_details.id : (alarm.category ? alarm.category.id : null),\r\n          latitude: alarm.latitude,\r\n          longitude: alarm.longitude,\r\n          content: alarm.content,\r\n          image_url: alarm.image_url,\r\n          status: alarm.status,\r\n          // 支持新的外键关系结构，同时保持兼容旧格式\r\n          wayline_id: alarm.wayline?.wayline_id || alarm.wayline_id || null,\r\n          wayline_name: alarm.wayline?.name || null,\r\n          // 保留完整的wayline对象\r\n          wayline: alarm.wayline || null,\r\n          // 保留category_details以便后续使用\r\n          category_details: alarm.category_details || null\r\n        }))\r\n        \r\n        this.totalAlarms = response?.count || this.alarms.length\r\n      } catch (error) {\r\n        this.$message.error('获取告警列表失败，显示模拟数据')\r\n        console.error('Load alarms error:', error)\r\n        \r\n        // 使用模拟数据，确保页面功能正常\r\n        let mockAlarms = [\r\n          {\r\n            id: 1,\r\n            created_at: new Date().toISOString(),\r\n            category_name: '设备故障',\r\n            category_id: 1,\r\n            latitude: 39.9042,\r\n            longitude: 116.4074,\r\n            content: '无人机电机过热，温度达到98°C，建议立即降落检查。电机表面出现异常颜色变化，可能存在严重故障风险。',\r\n            image_url: 'https://picsum.photos/800/600?random=1',\r\n            status: 'PENDING',\r\n            wayline_id: 'WL001'\r\n          },\r\n          {\r\n            id: 2,\r\n            created_at: new Date(Date.now() - 3600000).toISOString(),\r\n            category_name: '信号丢失',\r\n            category_id: 2,\r\n            latitude: 39.9142,\r\n            longitude: 116.4174,\r\n            content: '遥控信号弱，信号强度低于30%，无人机可能失控。请立即调整操作位置，确保视线内飞行。',\r\n            image_url: 'https://picsum.photos/800/600?random=2',\r\n            status: 'RESOLVED',\r\n            wayline_id: 'WL002'\r\n          },\r\n          {\r\n            id: 3,\r\n            created_at: new Date(Date.now() - 7200000).toISOString(),\r\n            category_name: '电量警告',\r\n            category_id: 3,\r\n            latitude: 39.9242,\r\n            longitude: 116.4274,\r\n            content: '电池电量低于20%，请尽快返航降落。预计剩余飞行时间不超过5分钟，请注意安全。',\r\n            image_url: 'https://picsum.photos/800/600?random=3',\r\n            status: 'COMPLETED',\r\n            wayline_id: 'WL001'\r\n          },\r\n          {\r\n            id: 4,\r\n            created_at: new Date(Date.now() - 10800000).toISOString(),\r\n            category_name: '天气异常',\r\n            category_id: 4,\r\n            latitude: 39.9342,\r\n            longitude: 116.4374,\r\n            content: '检测到强风，风速超过20m/s，可能影响飞行稳定性。建议立即降落至安全区域，避免发生意外。',\r\n            image_url: null,\r\n            status: 'IGNORED',\r\n            wayline_id: 'WL003'\r\n          }\r\n        ]\r\n        \r\n        // 当API调用失败时，在前端进行模拟过滤，确保筛选功能可见\r\n        if (this.searchQuery) {\r\n          const query = this.searchQuery.toLowerCase()\r\n          mockAlarms = mockAlarms.filter(alarm => \r\n            alarm.content.toLowerCase().includes(query) ||\r\n            alarm.category_name.toLowerCase().includes(query) ||\r\n            (alarm.wayline_id && alarm.wayline_id.toLowerCase().includes(query))\r\n          )\r\n        }\r\n        \r\n        if (this.statusFilter) {\r\n          mockAlarms = mockAlarms.filter(alarm => alarm.status === this.statusFilter)\r\n        }\r\n        \r\n        if (this.waylineIdFilter) {\r\n          // 适配下拉选择框的航线ID筛选\r\n          mockAlarms = mockAlarms.filter(alarm => \r\n            (alarm.wayline && alarm.wayline.wayline_id === this.waylineIdFilter) ||\r\n            alarm.wayline_id === this.waylineIdFilter\r\n          )\r\n        }\r\n        \r\n        // 模拟分页\r\n        const start = (this.currentPage - 1) * this.pageSize\r\n        const end = start + this.pageSize\r\n        this.alarms = mockAlarms.slice(start, end)\r\n        this.totalAlarms = mockAlarms.length\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    \r\n    async loadCategories() {\r\n      try {\r\n        const categories = await alarmApi.getAlarmCategories()\r\n        this.categories = categories?.results || categories || []\r\n      } catch (error) {\r\n        this.$message.error('获取告警类型失败，使用默认类型')\r\n        console.error('Load categories error:', error)\r\n        \r\n        // 使用模拟数据\r\n        this.categories = [\r\n          { id: 1, name: '设备故障', code: 'EQUIPMENT_FAILURE' },\r\n          { id: 2, name: '信号丢失', code: 'SIGNAL_LOSS' },\r\n          { id: 3, name: '电量警告', code: 'BATTERY_WARNING' },\r\n          { id: 4, name: '天气异常', code: 'WEATHER_ABNORMAL' }\r\n        ]\r\n      }\r\n    },\r\n    \r\n    async loadWaylines() {\r\n      try {\r\n        // 假设alarmApi中有获取航线列表的方法\r\n        const response = await alarmApi.getWaylines()\r\n        this.waylines = response?.results || response || []\r\n      } catch (error) {\r\n        this.$message.error('获取航线列表失败')\r\n        console.error('Load waylines error:', error)\r\n        \r\n        // 使用模拟数据\r\n        this.waylines = [\r\n          { id: 1, wayline_id: 'WL001', name: '测试航线1' },\r\n          { id: 2, wayline_id: 'WL002', name: '测试航线2' },\r\n          { id: 3, wayline_id: 'WL003', name: '河道巡查航线' },\r\n          { id: 4, wayline_id: 'WL004', name: '农林监测航线' },\r\n          { id: 5, wayline_id: 'WL005', name: '矿区测绘航线' }\r\n        ]\r\n      }\r\n    },\r\n    \r\n    formatDate(dateString) {\r\n      if (!dateString) return ''\r\n      const date = new Date(dateString)\r\n      return date.toLocaleString('zh-CN', {\r\n        year: 'numeric',\r\n        month: '2-digit',\r\n        day: '2-digit',\r\n        hour: '2-digit',\r\n        minute: '2-digit',\r\n        second: '2-digit'\r\n      })\r\n    },\r\n    \r\n    getStatusText(status) {\r\n      const statusMap = {\r\n        'PENDING': '待处理',\r\n        'PROCESSING': '处理中',\r\n        'COMPLETED': '已完成',\r\n        'IGNORED': '已忽略'\r\n      }\r\n      return statusMap[status] || status\r\n    },\r\n    \r\n    getStatusType(status) {\r\n      const typeMap = {\r\n        'PENDING': 'danger',\r\n        'PROCESSING': 'warning',\r\n        'COMPLETED': 'success',\r\n        'IGNORED': 'info'\r\n      }\r\n      return typeMap[status] || 'default'\r\n    },\r\n    \r\n    getCategoryType(categoryName) {\r\n      // 确保categoryName是字符串\r\n      if (!categoryName || typeof categoryName !== 'string') {\r\n        return 'info'\r\n      }\r\n      \r\n      // 根据不同的告警类型返回不同的标签类型\r\n      const typeKeywords = {\r\n        '发热': 'danger',\r\n        '损伤': 'warning',\r\n        '故障': 'danger',\r\n        '异常': 'warning',\r\n        '隐患': 'warning'\r\n      }\r\n      \r\n      for (const [keyword, type] of Object.entries(typeKeywords)) {\r\n        if (categoryName.includes(keyword)) {\r\n          return type\r\n        }\r\n      }\r\n      \r\n      return 'info'\r\n    },\r\n    \r\n    // 获取航线ID，支持新旧数据结构\r\n    getWaylineId(row) {\r\n      // 优先使用新的外键关系结构\r\n      if (row.wayline) {\r\n        return row.wayline.wayline_id || '--'\r\n      }\r\n      // 兼容旧的wayline_id字段\r\n      return row.wayline_id || '--'\r\n    },\r\n      \r\n    // 获取航线名称，支持新旧数据结构\r\n    getWaylineName(row) {\r\n      // 优先使用新的外键关系结构\r\n      if (row.wayline) {\r\n        return row.wayline.name || '--'\r\n      }\r\n      // 兼容从后端转换的wayline_name字段\r\n      return row.wayline_name || '--'\r\n    },\r\n    \r\n    viewAlarmDetail(alarm) {\r\n      // 设置当前告警并显示详情弹窗\r\n      this.currentAlarm = {...alarm};\r\n      this.showDetailDialog = true;\r\n    },\r\n    \r\n    updateAlarmStatus(alarm) {\r\n      console.log('更新状态按钮被点击', alarm)\r\n      // 确保currentAlarm是响应式的\r\n      this.currentAlarm = {...alarm};\r\n      this.newAlarmStatus = alarm.status || 'PENDING';\r\n      // 直接设置显示状态\r\n      this.showStatusDialog = true;\r\n      console.log('对话框显示状态设置为true', this.showStatusDialog);\r\n    },\r\n    \r\n    async confirmStatusUpdate() {\r\n      if (!this.newAlarmStatus || !this.currentAlarm?.id) {\r\n        this.$message.error('请选择有效的状态')\r\n        return\r\n      }\r\n      \r\n      try {\r\n        // 使用patchAlarm方法只更新状态字段\r\n        await alarmApi.patchAlarm(this.currentAlarm.id, { status: this.newAlarmStatus })\r\n        this.$message.success('告警状态更新成功')\r\n        this.showStatusDialog = false\r\n        await this.loadAlarms() // 重新加载列表\r\n      } catch (error) {\r\n        this.$message.error('状态更新失败')\r\n        console.error('Update alarm status error:', error)\r\n      }\r\n    },\r\n    \r\n    async deleteAlarm(alarmId) {\r\n      this.$confirm('确定要删除这条告警吗？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(async () => {\r\n        try {\r\n          await alarmApi.deleteAlarm(alarmId)\r\n          this.$message.success('删除成功')\r\n          await this.loadAlarms() // 重新加载列表\r\n        } catch (error) {\r\n          this.$message.error('删除失败')\r\n          console.error('Delete alarm error:', error)\r\n        }\r\n      }).catch(() => {\r\n        // 取消删除\r\n      })\r\n    },\r\n    \r\n    handleSizeChange(size) {\r\n      this.pageSize = size\r\n      this.loadAlarms()\r\n    },\r\n    \r\n    handleCurrentChange(current) {\r\n      this.currentPage = current\r\n      this.loadAlarms()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/* 使用 :deep() 选择器修改筛选框样式 */\r\n.search-filters :deep(.el-select) {\r\n  width: 150px;\r\n}\r\n\r\n.search-filters :deep(.el-input__wrapper) {\r\n  background-color: #0c4a6e !important;\r\n  border: 1px solid #0ea5e9 !important;\r\n  box-shadow: none !important;\r\n}\r\n\r\n.search-filters :deep(.el-input__wrapper:hover) {\r\n  border-color: #7dd3fc !important;\r\n}\r\n\r\n.search-filters :deep(.el-input__wrapper.is-focus) {\r\n  border-color: #7dd3fc !important;\r\n  box-shadow: 0 0 0 1px rgba(14, 165, 233, 0.1) !important;\r\n}\r\n\r\n.search-filters :deep(.el-input__inner) {\r\n  background-color: #0c4a6e !important;\r\n  color: #e0f2fe !important;\r\n  height: 32px;\r\n}\r\n\r\n.search-filters :deep(.el-input__icon) {\r\n  color: #9ca3af !important;\r\n}\r\n\r\n.search-filters :deep(.el-input__icon:before) {\r\n  color: #9ca3af !important;\r\n}\r\n\r\n/* 搜索输入框样式 */\r\n.search-filters :deep(.el-input .el-input__wrapper) {\r\n  background-color: #0c4a6e !important;\r\n  border: 1px solid #0ea5e9 !important;\r\n}\r\n\r\n.search-filters :deep(.el-input .el-input__inner) {\r\n  background-color: #0c4a6e !important;\r\n  color: #e0f2fe !important;\r\n}\r\n\r\n/* 特定筛选框样式 */\r\n#alarm-status-select :deep(.el-input__wrapper),\r\n#alarm-wayline-select :deep(.el-input__wrapper) {\r\n  background-color: #0c4a6e !important;\r\n  border-color: #0ea5e9 !important;\r\n}\r\n</style>\r\n\r\n<style>\r\n/* 全局样式 - 影响下拉菜单 */\r\n.selectFrom {\r\n  background-color: #0c4a6e !important;\r\n  border: 1px solid #0ea5e9 !important;\r\n}\r\n\r\n.el-select-dropdown {\r\n  background-color: #0c4a6e !important;\r\n  border: 1px solid #0ea5e9 !important;\r\n}\r\n\r\n.el-select-dropdown__item {\r\n  color: #e0f2fe !important;\r\n}\r\n\r\n.el-select-dropdown__item:hover {\r\n  background-color: #0e7490 !important;\r\n  color: #bae6fd !important;\r\n}\r\n\r\n.el-select-dropdown__item.selected {\r\n  background-color: #0369a1 !important;\r\n  color: #bae6fd !important;\r\n}\r\n</style>\r\n\r\n<style scoped>\r\n.alarm-list-container {\r\n  background-color: #0c4a6e;\r\n  border-radius: 8px;\r\n  padding: 20px;\r\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.header-actions {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.title {\r\n  font-size: 20px;\r\n  font-weight: bold;\r\n  margin: 0;\r\n  color: #bae6fd;\r\n}\r\n\r\n.search-filters {\r\n  display: flex;\r\n  gap: 16px;\r\n}\r\n\r\n.search-input {\r\n  width: 300px;\r\n}\r\n\r\n.status-filter {\r\n  width: 150px;\r\n}\r\n\r\n.wayline-filter {\r\n  width: 150px;\r\n}\r\n\r\n.pagination-container {\r\n  margin-top: 20px;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n}\r\n\r\n.status-dialog-content {\r\n  line-height: 1.8;\r\n}\r\n\r\n.status-dialog-content h4 {\r\n  margin-bottom: 10px;\r\n  color: #bae6fd;\r\n}\r\n\r\n/* 科技风格表格 */\r\n.tech-table {\r\n  background-color: #0c4a6e;\r\n  border-color: #0ea5e9;\r\n}\r\n</style>"],"mappings":";;;;AA63BA,OAAOA,QAAO,MAAO,iBAAgB;AAErC,eAAe;EACbC,IAAI,EAAE,WAAW;EACjBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,MAAM,EAAE,EAAE;MACVC,UAAU,EAAE,EAAE;MACdC,QAAQ,EAAE,EAAE;MAAE;MACdC,OAAO,EAAE,KAAK;MACdC,WAAW,EAAE,EAAE;MACfC,YAAY,EAAE,EAAE;MAChBC,eAAe,EAAE,EAAE;MACnBC,WAAW,EAAE,CAAC;MACdC,QAAQ,EAAE,EAAE;MACZC,WAAW,EAAE,CAAC;MACdC,gBAAgB,EAAE,KAAK;MACvBC,gBAAgB,EAAE,KAAK;MAAE;MACzBC,YAAY,EAAE,IAAI;MAClBC,cAAc,EAAE;IAClB;EACF,CAAC;EACDC,KAAK,EAAE;IACL;IACAV,WAAW,EAAE;MACXW,OAAOA,CAAA,EAAG;QACR,IAAI,CAACR,WAAU,GAAI,GAAE;QACrB,IAAI,CAACS,UAAU,CAAC;MAClB,CAAC;MACDC,QAAQ,EAAE,GAAE,CAAE;IAChB,CAAC;IACD;IACAZ,YAAYA,CAAA,EAAG;MACb,IAAI,CAACE,WAAU,GAAI;MACnB,IAAI,CAACS,UAAU,CAAC;IAClB,CAAC;IACD;IACAV,eAAe,EAAE;MACfS,OAAOA,CAAA,EAAG;QACR,IAAI,CAACR,WAAU,GAAI;QACnB,IAAI,CAACS,UAAU,CAAC;MAClB,CAAC;MACDC,QAAQ,EAAE;IACZ;EACF,CAAC;EACDC,QAAQ,EAAE;IACR;IACAC,cAAcA,CAAA,EAAG;MACf,OAAO,IAAI,CAACnB,MAAK;IACnB;EACF,CAAC;EACD,MAAMoB,OAAOA,CAAA,EAAG;IACd,MAAM,IAAI,CAACJ,UAAU,CAAC;IACtB,MAAM,IAAI,CAACK,cAAc,CAAC;IAC1B,MAAM,IAAI,CAACC,YAAY,CAAC;;IAExB;IACA,IAAI,CAACC,SAAS,CAAC,MAAM;MACnBC,OAAO,CAACC,GAAG,CAAC,YAAY;;MAExB;MACA,MAAMC,iBAAgB,GAAIA,CAAA,KAAM;QAC9B;QACA,MAAMC,cAAa,GAAIC,QAAQ,CAACC,gBAAgB,CAAC,6CAA6C;QAC9FF,cAAc,CAACG,OAAO,CAACC,MAAK,IAAK;UAC/B;UACA,MAAMC,OAAM,GAAID,MAAM,CAACE,aAAa,CAAC,oBAAoB;UACzD,IAAID,OAAO,EAAE;YACXA,OAAO,CAACE,KAAK,CAACC,eAAc,GAAI,SAAQ;YACxCH,OAAO,CAACE,KAAK,CAACE,WAAU,GAAI,SAAQ;YACpCJ,OAAO,CAACE,KAAK,CAACG,SAAQ,GAAI,MAAK;UACjC;;UAEA;UACA,MAAMC,KAAI,GAAIP,MAAM,CAACE,aAAa,CAAC,kBAAkB;UACrD,IAAIK,KAAK,EAAE;YACTA,KAAK,CAACJ,KAAK,CAACC,eAAc,GAAI,SAAQ;YACtCG,KAAK,CAACJ,KAAK,CAACK,KAAI,GAAI,SAAQ;UAC9B;;UAEA;UACA,MAAMC,IAAG,GAAIT,MAAM,CAACE,aAAa,CAAC,yCAAyC;UAC3E,IAAIO,IAAI,EAAE;YACRA,IAAI,CAACN,KAAK,CAACK,KAAI,GAAI,SAAQ;UAC7B;QACF,CAAC;;QAED;QACA,MAAME,WAAU,GAAIb,QAAQ,CAACc,cAAc,CAAC,oBAAoB;QAChE,IAAID,WAAW,EAAE;UACf,MAAME,aAAY,GAAIF,WAAW,CAACR,aAAa,CAAC,oBAAoB;UACpE,MAAMW,WAAU,GAAIH,WAAW,CAACR,aAAa,CAAC,kBAAkB;UAChE,IAAIU,aAAa,EAAE;YACjBA,aAAa,CAACT,KAAK,CAACC,eAAc,GAAI,SAAQ;YAC9CQ,aAAa,CAACT,KAAK,CAACE,WAAU,GAAI,SAAQ;UAC5C;UACA,IAAIQ,WAAW,EAAE;YACfA,WAAW,CAACV,KAAK,CAACC,eAAc,GAAI,SAAQ;YAC5CS,WAAW,CAACV,KAAK,CAACK,KAAI,GAAI,SAAQ;UACpC;QACF;;QAEA;QACA,MAAMM,SAAQ,GAAIjB,QAAQ,CAACC,gBAAgB,CAAC,qBAAqB;QACjEgB,SAAS,CAACf,OAAO,CAACgB,QAAO,IAAK;UAC5BA,QAAQ,CAACZ,KAAK,CAACC,eAAc,GAAI,SAAQ;UACzCW,QAAQ,CAACZ,KAAK,CAACE,WAAU,GAAI,SAAQ;UAErC,MAAMW,KAAI,GAAID,QAAQ,CAACjB,gBAAgB,CAAC,2BAA2B;UACnEkB,KAAK,CAACjB,OAAO,CAACkB,IAAG,IAAK;YACpBA,IAAI,CAACd,KAAK,CAACK,KAAI,GAAI,SAAQ;YAC3BS,IAAI,CAACC,YAAW,GAAI,MAAM;cACxBD,IAAI,CAACd,KAAK,CAACC,eAAc,GAAI,SAAQ;cACrCa,IAAI,CAACd,KAAK,CAACK,KAAI,GAAI,SAAQ;YAC7B;YACAS,IAAI,CAACE,YAAW,GAAI,MAAM;cACxB,IAAI,CAACF,IAAI,CAACG,SAAS,CAACC,QAAQ,CAAC,UAAU,CAAC,EAAE;gBACxCJ,IAAI,CAACd,KAAK,CAACC,eAAc,GAAI,aAAY;gBACzCa,IAAI,CAACd,KAAK,CAACK,KAAI,GAAI,SAAQ;cAC7B;YACF;UACF,CAAC;UAED,MAAMc,aAAY,GAAIP,QAAQ,CAACjB,gBAAgB,CAAC,oCAAoC;UACpFwB,aAAa,CAACvB,OAAO,CAACkB,IAAG,IAAK;YAC5BA,IAAI,CAACd,KAAK,CAACC,eAAc,GAAI,SAAQ;YACrCa,IAAI,CAACd,KAAK,CAACK,KAAI,GAAI,SAAQ;UAC7B,CAAC;QACH,CAAC;MACH;;MAEA;MACAb,iBAAiB,CAAC;;MAElB;MACA,MAAM4B,OAAM,GAAI1B,QAAQ,CAACC,gBAAgB,CAAC,6CAA6C;MACvFyB,OAAO,CAACxB,OAAO,CAACC,MAAK,IAAK;QACxBA,MAAM,CAACwB,gBAAgB,CAAC,OAAO,EAAE,MAAM;UACrCC,UAAU,CAAC9B,iBAAiB,EAAE,GAAG;QACnC,CAAC;MACH,CAAC;IACH,CAAC;EACH,CAAC;EACD+B,OAAO,EAAE;IACP,MAAMzC,UAAUA,CAAA,EAAG;MACjB,IAAI,CAACb,OAAM,GAAI,IAAG;MAClB,IAAI;QACF;QACA,MAAMuD,MAAK,GAAI;UACbC,IAAI,EAAE,IAAI,CAACpD,WAAW;UACtBqD,SAAS,EAAE,IAAI,CAACpD,QAAQ;UACxBqD,MAAM,EAAE,IAAI,CAACzD,WAAW;UAAE;UAC1B0D,MAAM,EAAE,IAAI,CAACzD,YAAY;UAAE;UAC3B0D,UAAU,EAAE,IAAI,CAACzD,eAAc,CAAE;QACnC;QAEA,MAAM0D,QAAO,GAAI,MAAMnE,QAAQ,CAACoE,SAAS,CAACP,MAAM;;QAEhD;QACA,IAAI,CAAC1D,MAAK,GAAI,CAACgE,QAAQ,EAAEE,OAAM,IAAK,EAAE,EAAEC,GAAG,CAACC,KAAI,KAAM;UACpDC,EAAE,EAAED,KAAK,CAACC,EAAE;UACZC,UAAU,EAAEF,KAAK,CAACE,UAAU;UAC5BC,aAAa,EAAEH,KAAK,CAACI,gBAAe,GAAIJ,KAAK,CAACI,gBAAgB,CAAC1E,IAAG,GAAKsE,KAAK,CAACK,QAAO,GAAIL,KAAK,CAACK,QAAQ,CAAC3E,IAAG,GAAI,KAAM;UACpH4E,WAAW,EAAEN,KAAK,CAACI,gBAAe,GAAIJ,KAAK,CAACI,gBAAgB,CAACH,EAAC,GAAKD,KAAK,CAACK,QAAO,GAAIL,KAAK,CAACK,QAAQ,CAACJ,EAAC,GAAI,IAAK;UAC7GM,QAAQ,EAAEP,KAAK,CAACO,QAAQ;UACxBC,SAAS,EAAER,KAAK,CAACQ,SAAS;UAC1BC,OAAO,EAAET,KAAK,CAACS,OAAO;UACtBC,SAAS,EAAEV,KAAK,CAACU,SAAS;UAC1BhB,MAAM,EAAEM,KAAK,CAACN,MAAM;UACpB;UACAC,UAAU,EAAEK,KAAK,CAACW,OAAO,EAAEhB,UAAS,IAAKK,KAAK,CAACL,UAAS,IAAK,IAAI;UACjEiB,YAAY,EAAEZ,KAAK,CAACW,OAAO,EAAEjF,IAAG,IAAK,IAAI;UACzC;UACAiF,OAAO,EAAEX,KAAK,CAACW,OAAM,IAAK,IAAI;UAC9B;UACAP,gBAAgB,EAAEJ,KAAK,CAACI,gBAAe,IAAK;QAC9C,CAAC,CAAC;QAEF,IAAI,CAAC/D,WAAU,GAAIuD,QAAQ,EAAEiB,KAAI,IAAK,IAAI,CAACjF,MAAM,CAACkF,MAAK;MACzD,EAAE,OAAOC,KAAK,EAAE;QACd,IAAI,CAACC,QAAQ,CAACD,KAAK,CAAC,iBAAiB;QACrC3D,OAAO,CAAC2D,KAAK,CAAC,oBAAoB,EAAEA,KAAK;;QAEzC;QACA,IAAIE,UAAS,GAAI,CACf;UACEhB,EAAE,EAAE,CAAC;UACLC,UAAU,EAAE,IAAIgB,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;UACpChB,aAAa,EAAE,MAAM;UACrBG,WAAW,EAAE,CAAC;UACdC,QAAQ,EAAE,OAAO;UACjBC,SAAS,EAAE,QAAQ;UACnBC,OAAO,EAAE,oDAAoD;UAC7DC,SAAS,EAAE,wCAAwC;UACnDhB,MAAM,EAAE,SAAS;UACjBC,UAAU,EAAE;QACd,CAAC,EACD;UACEM,EAAE,EAAE,CAAC;UACLC,UAAU,EAAE,IAAIgB,IAAI,CAACA,IAAI,CAACE,GAAG,CAAC,IAAI,OAAO,CAAC,CAACD,WAAW,CAAC,CAAC;UACxDhB,aAAa,EAAE,MAAM;UACrBG,WAAW,EAAE,CAAC;UACdC,QAAQ,EAAE,OAAO;UACjBC,SAAS,EAAE,QAAQ;UACnBC,OAAO,EAAE,4CAA4C;UACrDC,SAAS,EAAE,wCAAwC;UACnDhB,MAAM,EAAE,UAAU;UAClBC,UAAU,EAAE;QACd,CAAC,EACD;UACEM,EAAE,EAAE,CAAC;UACLC,UAAU,EAAE,IAAIgB,IAAI,CAACA,IAAI,CAACE,GAAG,CAAC,IAAI,OAAO,CAAC,CAACD,WAAW,CAAC,CAAC;UACxDhB,aAAa,EAAE,MAAM;UACrBG,WAAW,EAAE,CAAC;UACdC,QAAQ,EAAE,OAAO;UACjBC,SAAS,EAAE,QAAQ;UACnBC,OAAO,EAAE,yCAAyC;UAClDC,SAAS,EAAE,wCAAwC;UACnDhB,MAAM,EAAE,WAAW;UACnBC,UAAU,EAAE;QACd,CAAC,EACD;UACEM,EAAE,EAAE,CAAC;UACLC,UAAU,EAAE,IAAIgB,IAAI,CAACA,IAAI,CAACE,GAAG,CAAC,IAAI,QAAQ,CAAC,CAACD,WAAW,CAAC,CAAC;UACzDhB,aAAa,EAAE,MAAM;UACrBG,WAAW,EAAE,CAAC;UACdC,QAAQ,EAAE,OAAO;UACjBC,SAAS,EAAE,QAAQ;UACnBC,OAAO,EAAE,+CAA+C;UACxDC,SAAS,EAAE,IAAI;UACfhB,MAAM,EAAE,SAAS;UACjBC,UAAU,EAAE;QACd,EACF;;QAEA;QACA,IAAI,IAAI,CAAC3D,WAAW,EAAE;UACpB,MAAMqF,KAAI,GAAI,IAAI,CAACrF,WAAW,CAACsF,WAAW,CAAC;UAC3CL,UAAS,GAAIA,UAAU,CAACM,MAAM,CAACvB,KAAI,IACjCA,KAAK,CAACS,OAAO,CAACa,WAAW,CAAC,CAAC,CAACE,QAAQ,CAACH,KAAK,KAC1CrB,KAAK,CAACG,aAAa,CAACmB,WAAW,CAAC,CAAC,CAACE,QAAQ,CAACH,KAAK,KAC/CrB,KAAK,CAACL,UAAS,IAAKK,KAAK,CAACL,UAAU,CAAC2B,WAAW,CAAC,CAAC,CAACE,QAAQ,CAACH,KAAK,CACpE;QACF;QAEA,IAAI,IAAI,CAACpF,YAAY,EAAE;UACrBgF,UAAS,GAAIA,UAAU,CAACM,MAAM,CAACvB,KAAI,IAAKA,KAAK,CAACN,MAAK,KAAM,IAAI,CAACzD,YAAY;QAC5E;QAEA,IAAI,IAAI,CAACC,eAAe,EAAE;UACxB;UACA+E,UAAS,GAAIA,UAAU,CAACM,MAAM,CAACvB,KAAI,IAChCA,KAAK,CAACW,OAAM,IAAKX,KAAK,CAACW,OAAO,CAAChB,UAAS,KAAM,IAAI,CAACzD,eAAe,IACnE8D,KAAK,CAACL,UAAS,KAAM,IAAI,CAACzD,eAC5B;QACF;;QAEA;QACA,MAAMuF,KAAI,GAAI,CAAC,IAAI,CAACtF,WAAU,GAAI,CAAC,IAAI,IAAI,CAACC,QAAO;QACnD,MAAMsF,GAAE,GAAID,KAAI,GAAI,IAAI,CAACrF,QAAO;QAChC,IAAI,CAACR,MAAK,GAAIqF,UAAU,CAACU,KAAK,CAACF,KAAK,EAAEC,GAAG;QACzC,IAAI,CAACrF,WAAU,GAAI4E,UAAU,CAACH,MAAK;MACrC,UAAU;QACR,IAAI,CAAC/E,OAAM,GAAI,KAAI;MACrB;IACF,CAAC;IAED,MAAMkB,cAAcA,CAAA,EAAG;MACrB,IAAI;QACF,MAAMpB,UAAS,GAAI,MAAMJ,QAAQ,CAACmG,kBAAkB,CAAC;QACrD,IAAI,CAAC/F,UAAS,GAAIA,UAAU,EAAEiE,OAAM,IAAKjE,UAAS,IAAK,EAAC;MAC1D,EAAE,OAAOkF,KAAK,EAAE;QACd,IAAI,CAACC,QAAQ,CAACD,KAAK,CAAC,iBAAiB;QACrC3D,OAAO,CAAC2D,KAAK,CAAC,wBAAwB,EAAEA,KAAK;;QAE7C;QACA,IAAI,CAAClF,UAAS,GAAI,CAChB;UAAEoE,EAAE,EAAE,CAAC;UAAEvE,IAAI,EAAE,MAAM;UAAEmG,IAAI,EAAE;QAAoB,CAAC,EAClD;UAAE5B,EAAE,EAAE,CAAC;UAAEvE,IAAI,EAAE,MAAM;UAAEmG,IAAI,EAAE;QAAc,CAAC,EAC5C;UAAE5B,EAAE,EAAE,CAAC;UAAEvE,IAAI,EAAE,MAAM;UAAEmG,IAAI,EAAE;QAAkB,CAAC,EAChD;UAAE5B,EAAE,EAAE,CAAC;UAAEvE,IAAI,EAAE,MAAM;UAAEmG,IAAI,EAAE;QAAmB,EAClD;MACF;IACF,CAAC;IAED,MAAM3E,YAAYA,CAAA,EAAG;MACnB,IAAI;QACF;QACA,MAAM0C,QAAO,GAAI,MAAMnE,QAAQ,CAACqG,WAAW,CAAC;QAC5C,IAAI,CAAChG,QAAO,GAAI8D,QAAQ,EAAEE,OAAM,IAAKF,QAAO,IAAK,EAAC;MACpD,EAAE,OAAOmB,KAAK,EAAE;QACd,IAAI,CAACC,QAAQ,CAACD,KAAK,CAAC,UAAU;QAC9B3D,OAAO,CAAC2D,KAAK,CAAC,sBAAsB,EAAEA,KAAK;;QAE3C;QACA,IAAI,CAACjF,QAAO,GAAI,CACd;UAAEmE,EAAE,EAAE,CAAC;UAAEN,UAAU,EAAE,OAAO;UAAEjE,IAAI,EAAE;QAAQ,CAAC,EAC7C;UAAEuE,EAAE,EAAE,CAAC;UAAEN,UAAU,EAAE,OAAO;UAAEjE,IAAI,EAAE;QAAQ,CAAC,EAC7C;UAAEuE,EAAE,EAAE,CAAC;UAAEN,UAAU,EAAE,OAAO;UAAEjE,IAAI,EAAE;QAAS,CAAC,EAC9C;UAAEuE,EAAE,EAAE,CAAC;UAAEN,UAAU,EAAE,OAAO;UAAEjE,IAAI,EAAE;QAAS,CAAC,EAC9C;UAAEuE,EAAE,EAAE,CAAC;UAAEN,UAAU,EAAE,OAAO;UAAEjE,IAAI,EAAE;QAAS,EAC/C;MACF;IACF,CAAC;IAEDqG,UAAUA,CAACC,UAAU,EAAE;MACrB,IAAI,CAACA,UAAU,EAAE,OAAO,EAAC;MACzB,MAAMC,IAAG,GAAI,IAAIf,IAAI,CAACc,UAAU;MAChC,OAAOC,IAAI,CAACC,cAAc,CAAC,OAAO,EAAE;QAClCC,IAAI,EAAE,SAAS;QACfC,KAAK,EAAE,SAAS;QAChBC,GAAG,EAAE,SAAS;QACdC,IAAI,EAAE,SAAS;QACfC,MAAM,EAAE,SAAS;QACjBC,MAAM,EAAE;MACV,CAAC;IACH,CAAC;IAEDC,aAAaA,CAAC/C,MAAM,EAAE;MACpB,MAAMgD,SAAQ,GAAI;QAChB,SAAS,EAAE,KAAK;QAChB,YAAY,EAAE,KAAK;QACnB,WAAW,EAAE,KAAK;QAClB,SAAS,EAAE;MACb;MACA,OAAOA,SAAS,CAAChD,MAAM,KAAKA,MAAK;IACnC,CAAC;IAEDiD,aAAaA,CAACjD,MAAM,EAAE;MACpB,MAAMkD,OAAM,GAAI;QACd,SAAS,EAAE,QAAQ;QACnB,YAAY,EAAE,SAAS;QACvB,WAAW,EAAE,SAAS;QACtB,SAAS,EAAE;MACb;MACA,OAAOA,OAAO,CAAClD,MAAM,KAAK,SAAQ;IACpC,CAAC;IAEDmD,eAAeA,CAACC,YAAY,EAAE;MAC5B;MACA,IAAI,CAACA,YAAW,IAAK,OAAOA,YAAW,KAAM,QAAQ,EAAE;QACrD,OAAO,MAAK;MACd;;MAEA;MACA,MAAMC,YAAW,GAAI;QACnB,IAAI,EAAE,QAAQ;QACd,IAAI,EAAE,SAAS;QACf,IAAI,EAAE,QAAQ;QACd,IAAI,EAAE,SAAS;QACf,IAAI,EAAE;MACR;MAEA,KAAK,MAAM,CAACC,OAAO,EAAEC,IAAI,KAAKC,MAAM,CAACC,OAAO,CAACJ,YAAY,CAAC,EAAE;QAC1D,IAAID,YAAY,CAACtB,QAAQ,CAACwB,OAAO,CAAC,EAAE;UAClC,OAAOC,IAAG;QACZ;MACF;MAEA,OAAO,MAAK;IACd,CAAC;IAED;IACAG,YAAYA,CAACC,GAAG,EAAE;MAChB;MACA,IAAIA,GAAG,CAAC1C,OAAO,EAAE;QACf,OAAO0C,GAAG,CAAC1C,OAAO,CAAChB,UAAS,IAAK,IAAG;MACtC;MACA;MACA,OAAO0D,GAAG,CAAC1D,UAAS,IAAK,IAAG;IAC9B,CAAC;IAED;IACA2D,cAAcA,CAACD,GAAG,EAAE;MAClB;MACA,IAAIA,GAAG,CAAC1C,OAAO,EAAE;QACf,OAAO0C,GAAG,CAAC1C,OAAO,CAACjF,IAAG,IAAK,IAAG;MAChC;MACA;MACA,OAAO2H,GAAG,CAACzC,YAAW,IAAK,IAAG;IAChC,CAAC;IAED2C,eAAeA,CAACvD,KAAK,EAAE;MACrB;MACA,IAAI,CAACxD,YAAW,GAAI;QAAC,GAAGwD;MAAK,CAAC;MAC9B,IAAI,CAACzD,gBAAe,GAAI,IAAI;IAC9B,CAAC;IAEDiH,iBAAiBA,CAACxD,KAAK,EAAE;MACvB5C,OAAO,CAACC,GAAG,CAAC,WAAW,EAAE2C,KAAK;MAC9B;MACA,IAAI,CAACxD,YAAW,GAAI;QAAC,GAAGwD;MAAK,CAAC;MAC9B,IAAI,CAACvD,cAAa,GAAIuD,KAAK,CAACN,MAAK,IAAK,SAAS;MAC/C;MACA,IAAI,CAACpD,gBAAe,GAAI,IAAI;MAC5Bc,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAE,IAAI,CAACf,gBAAgB,CAAC;IACtD,CAAC;IAED,MAAMmH,mBAAmBA,CAAA,EAAG;MAC1B,IAAI,CAAC,IAAI,CAAChH,cAAa,IAAK,CAAC,IAAI,CAACD,YAAY,EAAEyD,EAAE,EAAE;QAClD,IAAI,CAACe,QAAQ,CAACD,KAAK,CAAC,UAAU;QAC9B;MACF;MAEA,IAAI;QACF;QACA,MAAMtF,QAAQ,CAACiI,UAAU,CAAC,IAAI,CAAClH,YAAY,CAACyD,EAAE,EAAE;UAAEP,MAAM,EAAE,IAAI,CAACjD;QAAe,CAAC;QAC/E,IAAI,CAACuE,QAAQ,CAAC2C,OAAO,CAAC,UAAU;QAChC,IAAI,CAACrH,gBAAe,GAAI,KAAI;QAC5B,MAAM,IAAI,CAACM,UAAU,CAAC,GAAE;MAC1B,EAAE,OAAOmE,KAAK,EAAE;QACd,IAAI,CAACC,QAAQ,CAACD,KAAK,CAAC,QAAQ;QAC5B3D,OAAO,CAAC2D,KAAK,CAAC,4BAA4B,EAAEA,KAAK;MACnD;IACF,CAAC;IAED,MAAM6C,WAAWA,CAACC,OAAO,EAAE;MACzB,IAAI,CAACC,QAAQ,CAAC,aAAa,EAAE,IAAI,EAAE;QACjCC,iBAAiB,EAAE,IAAI;QACvBC,gBAAgB,EAAE,IAAI;QACtBf,IAAI,EAAE;MACR,CAAC,CAAC,CAACgB,IAAI,CAAC,YAAY;QAClB,IAAI;UACF,MAAMxI,QAAQ,CAACmI,WAAW,CAACC,OAAO;UAClC,IAAI,CAAC7C,QAAQ,CAAC2C,OAAO,CAAC,MAAM;UAC5B,MAAM,IAAI,CAAC/G,UAAU,CAAC,GAAE;QAC1B,EAAE,OAAOmE,KAAK,EAAE;UACd,IAAI,CAACC,QAAQ,CAACD,KAAK,CAAC,MAAM;UAC1B3D,OAAO,CAAC2D,KAAK,CAAC,qBAAqB,EAAEA,KAAK;QAC5C;MACF,CAAC,CAAC,CAACmD,KAAK,CAAC,MAAM;QACb;MAAA,CACD;IACH,CAAC;IAEDC,gBAAgBA,CAACC,IAAI,EAAE;MACrB,IAAI,CAAChI,QAAO,GAAIgI,IAAG;MACnB,IAAI,CAACxH,UAAU,CAAC;IAClB,CAAC;IAEDyH,mBAAmBA,CAACC,OAAO,EAAE;MAC3B,IAAI,CAACnI,WAAU,GAAImI,OAAM;MACzB,IAAI,CAAC1H,UAAU,CAAC;IAClB;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}