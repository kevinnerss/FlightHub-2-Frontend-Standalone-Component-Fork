{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"pure-cesium-test h-screen flex flex-col\"\n};\nconst _hoisted_2 = {\n  class: \"controls p-2 bg-gray-100\"\n};\nconst _hoisted_3 = {\n  ref: \"cesiumWrapper\",\n  class: \"cesium-wrapper flex-grow relative\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[4] || (_cache[4] = _createElementVNode(\"div\", {\n    class: \"header bg-blue-600 text-white p-4\"\n  }, [_createElementVNode(\"h1\", {\n    class: \"text-xl font-bold\"\n  }, \"纯Cesium测试页面\")], -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_2, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.modelPath = $event),\n    placeholder: \"输入模型路径\",\n    class: \"border p-2 mr-2 w-80\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.modelPath]]), _createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.loadModel && $options.loadModel(...args)),\n    class: \"bg-blue-500 text-white px-4 py-2 rounded\"\n  }, \" 加载模型 \"), _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.resetView && $options.resetView(...args)),\n    class: \"bg-green-500 text-white px-4 py-2 rounded ml-2\"\n  }, \" 重置视角 \"), _createElementVNode(\"button\", {\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.forceResize && $options.forceResize(...args)),\n    class: \"bg-purple-500 text-white px-4 py-2 rounded ml-2\"\n  }, \" 强制调整大小 \")]), _createCommentVNode(\" Cesium容器 - 使用纯HTML/CSS \"), _createElementVNode(\"div\", _hoisted_3, null, 512 /* NEED_PATCH */)]);\n}","map":{"version":3,"names":["class","ref","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","$data","modelPath","$event","placeholder","onClick","_cache","args","$options","loadModel","resetView","forceResize","_createCommentVNode","_hoisted_3"],"sources":["D:\\projects\\FlightHub-2-Frontend-Standalone-Component\\frontend\\src\\views\\PureCesiumTest.vue"],"sourcesContent":["<template>\n  <div class=\"pure-cesium-test h-screen flex flex-col\">\n    <div class=\"header bg-blue-600 text-white p-4\">\n      <h1 class=\"text-xl font-bold\">纯Cesium测试页面</h1>\n    </div>\n    \n    <div class=\"controls p-2 bg-gray-100\">\n      <input \n        v-model=\"modelPath\" \n        placeholder=\"输入模型路径\" \n        class=\"border p-2 mr-2 w-80\"\n      />\n      <button @click=\"loadModel\" class=\"bg-blue-500 text-white px-4 py-2 rounded\">\n        加载模型\n      </button>\n      <button @click=\"resetView\" class=\"bg-green-500 text-white px-4 py-2 rounded ml-2\">\n        重置视角\n      </button>\n      <button @click=\"forceResize\" class=\"bg-purple-500 text-white px-4 py-2 rounded ml-2\">\n        强制调整大小\n      </button>\n    </div>\n    \n    <!-- Cesium容器 - 使用纯HTML/CSS -->\n    <div ref=\"cesiumWrapper\" class=\"cesium-wrapper flex-grow relative\">\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'PureCesiumTest',\n  data() {\n    return {\n      viewer: null,\n      tileset: null,\n      loading: false,\n      error: '',\n      modelPath: '/models/Model_0/tileset.json'\n    }\n  },\n  async mounted() {\n    this.$nextTick(async () => {\n      // 等待一段时间确保DOM完全渲染\n      setTimeout(async () => {\n        await this.initCesium()\n        await this.loadModel()\n      }, 200)\n    })\n  },\n  beforeUnmount() {\n    if (this.viewer) {\n      this.viewer.destroy()\n    }\n  },\n  methods: {\n    async initCesium() {\n      try {\n        const Cesium = await import('cesium')\n        Cesium.Ion.defaultAccessToken = ''\n        \n        const wrapper = this.$refs.cesiumWrapper\n        if (!wrapper) {\n          throw new Error('找不到 cesiumWrapper 元素')\n        }\n        \n        // 创建Cesium容器\n        const container = document.createElement('div')\n        container.id = 'cesiumContainer'\n        wrapper.appendChild(container)\n        \n        // 明确设置容器样式\n        container.style.width = wrapper.offsetWidth + 'px'\n        container.style.height = wrapper.offsetHeight + 'px'\n        container.style.position = 'absolute'\n        container.style.top = '0'\n        container.style.left = '0'\n        \n        console.log('初始化时容器尺寸:', container.style.width, 'x', container.style.height)\n        console.log('包装器尺寸:', wrapper.offsetWidth, 'x', wrapper.offsetHeight)\n        \n        this.viewer = new Cesium.Viewer('cesiumContainer', {\n          animation: false,\n          baseLayerPicker: false,\n          fullscreenButton: false,\n          vrButton: false,\n          geocoder: false,\n          homeButton: false,\n          infoBox: false,\n          sceneModePicker: false,\n          selectionIndicator: false,\n          timeline: false,\n          navigationHelpButton: false,\n          navigationInstructionsInitiallyVisible: false,\n          scene3DOnly: true,\n          shadows: true,\n          shouldAnimate: true,\n          creditContainer: document.createElement('div')\n        })\n\n        this.viewer.camera.setView({\n          destination: Cesium.Cartesian3.fromDegrees(116.3913, 39.9075, 100000),\n          orientation: {\n            heading: Cesium.Math.toRadians(0),\n            pitch: Cesium.Math.toRadians(-30),\n            roll: 0.0\n          }\n        })\n        \n        // 添加resize监听\n        window.addEventListener('resize', () => {\n          if (this.viewer) {\n            const newContainer = document.getElementById('cesiumContainer')\n            const newWrapper = this.$refs.cesiumWrapper\n            if (newContainer && newWrapper) {\n              newContainer.style.width = newWrapper.offsetWidth + 'px'\n              newContainer.style.height = newWrapper.offsetHeight + 'px'\n              console.log('窗口大小变化，调整Cesium大小到:', newContainer.style.width, 'x', newContainer.style.height)\n              this.viewer.resize()\n            }\n          }\n        })\n        \n        // 添加一个短暂的延迟后强制调整大小\n        setTimeout(() => {\n          if (this.viewer) {\n            const newContainer = document.getElementById('cesiumContainer')\n            const newWrapper = this.$refs.cesiumWrapper\n            if (newContainer && newWrapper) {\n              newContainer.style.width = newWrapper.offsetWidth + 'px'\n              newContainer.style.height = newWrapper.offsetHeight + 'px'\n              console.log('初始化后强制调整大小到:', newContainer.style.width, 'x', newContainer.style.height)\n              this.viewer.resize()\n            }\n          }\n        }, 200)\n      } catch (err) {\n        this.error = '初始化Cesium失败: ' + err.message\n        console.error('Cesium initialization error:', err)\n      }\n    },\n    \n    forceResize() {\n      if (this.viewer) {\n        const container = document.getElementById('cesiumContainer')\n        const wrapper = this.$refs.cesiumWrapper\n        if (container && wrapper) {\n          container.style.width = wrapper.offsetWidth + 'px'\n          container.style.height = wrapper.offsetHeight + 'px'\n          console.log('强制调整大小到:', container.style.width, 'x', container.style.height)\n          this.viewer.resize()\n        }\n        console.log('已强制调整Cesium大小')\n      }\n    },\n    \n    async loadModel() {\n      if (!this.viewer || !this.modelPath) return\n      \n      this.loading = true\n      this.error = ''\n      \n      try {\n        const Cesium = await import('cesium')\n        \n        if (this.tileset) {\n          this.viewer.scene.primitives.remove(this.tileset)\n          this.tileset = null\n        }\n        \n        console.log('正在加载模型:', this.modelPath)\n        this.tileset = await Cesium.Cesium3DTileset.fromUrl(this.modelPath)\n        this.viewer.scene.primitives.add(this.tileset)\n        \n        if (this.tileset.readyPromise) {\n          this.tileset.readyPromise.then(() => {\n            console.log('模型加载完成')\n            this.viewer.zoomTo(this.tileset)\n          }).catch(error => {\n            this.error = '模型加载失败: ' + error.message\n            console.error('Tileset loading error:', error)\n          }).finally(() => {\n            this.loading = false\n          })\n        } else {\n          console.log('模型加载完成（无readyPromise）')\n          this.viewer.zoomTo(this.tileset)\n          this.loading = false\n        }\n      } catch (err) {\n        this.error = '模型加载失败: ' + err.message\n        this.loading = false\n        console.error('Model loading error:', err)\n      }\n    },\n    \n    resetView() {\n      if (this.viewer) {\n        const Cesium = window.CESIUM_BASE_URL ? window.CESIUM_BASE_URL : require('cesium')\n        this.viewer.camera.setView({\n          destination: Cesium.Cartesian3.fromDegrees(116.3913, 39.9075, 100000),\n          orientation: {\n            heading: Cesium.Math.toRadians(0),\n            pitch: Cesium.Math.toRadians(-30),\n            roll: 0.0\n          }\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.pure-cesium-test {\n  width: 100%;\n  height: 100%;\n}\n\n.cesium-wrapper {\n  position: relative;\n  width: 100%;\n  height: 100%;\n}\n</style>"],"mappings":";;EACOA,KAAK,EAAC;AAAyC;;EAK7CA,KAAK,EAAC;AAA0B;;EAkBhCC,GAAG,EAAC,eAAe;EAACD,KAAK,EAAC;;;uBAvBjCE,mBAAA,CAyBM,OAzBNC,UAyBM,G,0BAxBJC,mBAAA,CAEM;IAFDJ,KAAK,EAAC;EAAmC,IAC5CI,mBAAA,CAA8C;IAA1CJ,KAAK,EAAC;EAAmB,GAAC,aAAW,E,qBAG3CI,mBAAA,CAeM,OAfNC,UAeM,G,gBAdJD,mBAAA,CAIE;+DAHSE,KAAA,CAAAC,SAAS,GAAAC,MAAA;IAClBC,WAAW,EAAC,QAAQ;IACpBT,KAAK,EAAC;iDAFGM,KAAA,CAAAC,SAAS,E,GAIpBH,mBAAA,CAES;IAFAM,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,SAAA,IAAAD,QAAA,CAAAC,SAAA,IAAAF,IAAA,CAAS;IAAEZ,KAAK,EAAC;KAA2C,QAE5E,GACAI,mBAAA,CAES;IAFAM,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAE,SAAA,IAAAF,QAAA,CAAAE,SAAA,IAAAH,IAAA,CAAS;IAAEZ,KAAK,EAAC;KAAiD,QAElF,GACAI,mBAAA,CAES;IAFAM,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAG,WAAA,IAAAH,QAAA,CAAAG,WAAA,IAAAJ,IAAA,CAAW;IAAEZ,KAAK,EAAC;KAAkD,UAErF,E,GAGFiB,mBAAA,4BAA+B,EAC/Bb,mBAAA,CACM,OADNc,UACM,8B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}