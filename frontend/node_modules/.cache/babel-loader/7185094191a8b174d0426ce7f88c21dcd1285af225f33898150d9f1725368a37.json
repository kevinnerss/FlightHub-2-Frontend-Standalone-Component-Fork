{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: 'Login',\n  data() {\n    return {\n      loginForm: {\n        username: '',\n        password: ''\n      },\n      isLoading: false,\n      rules: {\n        username: [{\n          required: true,\n          message: '请输入用户名',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    handleLogin() {\n      this.$refs.loginFormRef.validate(async valid => {\n        if (valid) {\n          this.isLoading = true;\n          try {\n            // 调用登录action\n            const {\n              user\n            } = await this.$store.dispatch('login', this.loginForm);\n            // 保存用户信息到localStorage，供路由守卫使用\n            localStorage.setItem('userInfo', JSON.stringify(user));\n            // 登录成功后跳转到首页或之前尝试访问的页面\n            const redirect = this.$route.query.redirect || '/';\n            this.$router.push(redirect);\n          } catch (error) {\n            this.$message.error(error.message || '登录失败，请重试');\n          } finally {\n            this.isLoading = false;\n          }\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","data","loginForm","username","password","isLoading","rules","required","message","trigger","methods","handleLogin","$refs","loginFormRef","validate","valid","user","$store","dispatch","localStorage","setItem","JSON","stringify","redirect","$route","query","$router","push","error","$message"],"sources":["D:\\projects\\FlightHub-2-Frontend-Standalone-Component\\frontend\\src\\views\\Login.vue"],"sourcesContent":["<template>\n  <div class=\"login-container\">\n    <div class=\"login-form-wrapper\">\n      <div class=\"login-title\">\n        <h2>无人机巡检数字孪生系统</h2>\n        <p>请输入账号密码登录</p>\n      </div>\n      <el-form :model=\"loginForm\" :rules=\"rules\" ref=\"loginFormRef\" class=\"login-form\">\n        <el-form-item prop=\"username\">\n          <el-input \n            v-model=\"loginForm.username\" \n            placeholder=\"请输入用户名\" \n            prefix-icon=\"el-icon-user\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item prop=\"password\">\n          <el-input \n            v-model=\"loginForm.password\" \n            type=\"password\" \n            placeholder=\"请输入密码\" \n            prefix-icon=\"el-icon-lock\"\n            show-password\n          ></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button \n            type=\"primary\" \n            :loading=\"isLoading\"\n            @click=\"handleLogin\" \n            class=\"login-button\"\n            :disabled=\"isLoading\"\n          >\n            登录\n          </el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Login',\n  data() {\n    return {\n      loginForm: {\n        username: '',\n        password: ''\n      },\n      isLoading: false,\n      rules: {\n        username: [\n          { required: true, message: '请输入用户名', trigger: 'blur' }\n        ],\n        password: [\n          { required: true, message: '请输入密码', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  methods: {\n    handleLogin() {\n      this.$refs.loginFormRef.validate(async (valid) => {\n        if (valid) {\n          this.isLoading = true\n          try {\n          // 调用登录action\n          const { user } = await this.$store.dispatch('login', this.loginForm)\n          // 保存用户信息到localStorage，供路由守卫使用\n          localStorage.setItem('userInfo', JSON.stringify(user))\n          // 登录成功后跳转到首页或之前尝试访问的页面\n          const redirect = this.$route.query.redirect || '/'\n          this.$router.push(redirect)\n          } catch (error) {\n            this.$message.error(error.message || '登录失败，请重试')\n          } finally {\n            this.isLoading = false\n          }\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.login-container {\n  min-height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: linear-gradient(135deg, #0c4a6e 0%, #0369a1 100%);\n  padding: 20px;\n}\n\n.login-form-wrapper {\n  width: 100%;\n  max-width: 400px;\n  background: rgba(15, 23, 42, 0.95);\n  backdrop-filter: blur(10px);\n  border-radius: 16px;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\n  padding: 40px;\n  border: 1px solid rgba(14, 165, 233, 0.2);\n}\n\n.login-title {\n  text-align: center;\n  margin-bottom: 30px;\n}\n\n.login-title h2 {\n  color: #e0f2fe;\n  margin-bottom: 10px;\n  font-size: 24px;\n  font-weight: 600;\n}\n\n.login-title p {\n  color: #7dd3fc;\n  font-size: 14px;\n}\n\n.login-form {\n  width: 100%;\n}\n\n.login-form .el-form-item {\n  margin-bottom: 24px;\n}\n\n.login-form .el-input__wrapper {\n  background-color: rgba(12, 74, 110, 0.5);\n  border-color: #0ea5e9;\n}\n\n.login-form .el-input__wrapper:hover {\n  border-color: #7dd3fc;\n  box-shadow: 0 0 0 1px rgba(125, 211, 252, 0.2);\n}\n\n.login-form .el-input__wrapper.is-focus {\n  border-color: #7dd3fc;\n  box-shadow: 0 0 0 1px rgba(125, 211, 252, 0.2);\n}\n\n.login-form .el-input__inner {\n  color: #e0f2fe;\n  background-color: transparent;\n}\n\n.login-form .el-input__prefix-inner .el-icon {\n  color: #7dd3fc;\n}\n\n.login-button {\n  width: 100%;\n  height: 44px;\n  font-size: 16px;\n  background: linear-gradient(90deg, #0ea5e9 0%, #0891b2 100%);\n  border: none;\n  transition: all 0.3s ease;\n}\n\n.login-button:hover {\n  background: linear-gradient(90deg, #0ea5e9 0%, #0284c7 100%);\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(14, 165, 233, 0.3);\n}\n\n.login-button.is-loading {\n  background: linear-gradient(90deg, #0ea5e9 0%, #0891b2 100%);\n  opacity: 0.8;\n}\n</style>"],"mappings":";AAyCA,eAAe;EACbA,IAAI,EAAE,OAAO;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,SAAS,EAAE;QACTC,QAAQ,EAAE,EAAE;QACZC,QAAQ,EAAE;MACZ,CAAC;MACDC,SAAS,EAAE,KAAK;MAChBC,KAAK,EAAE;QACLH,QAAQ,EAAE,CACR;UAAEI,QAAQ,EAAE,IAAI;UAAEC,OAAO,EAAE,QAAQ;UAAEC,OAAO,EAAE;QAAO,EACtD;QACDL,QAAQ,EAAE,CACR;UAAEG,QAAQ,EAAE,IAAI;UAAEC,OAAO,EAAE,OAAO;UAAEC,OAAO,EAAE;QAAO;MAExD;IACF;EACF,CAAC;EACDC,OAAO,EAAE;IACPC,WAAWA,CAAA,EAAG;MACZ,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,QAAQ,CAAC,MAAOC,KAAK,IAAK;QAChD,IAAIA,KAAK,EAAE;UACT,IAAI,CAACV,SAAQ,GAAI,IAAG;UACpB,IAAI;YACJ;YACA,MAAM;cAAEW;YAAK,IAAI,MAAM,IAAI,CAACC,MAAM,CAACC,QAAQ,CAAC,OAAO,EAAE,IAAI,CAAChB,SAAS;YACnE;YACAiB,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEC,IAAI,CAACC,SAAS,CAACN,IAAI,CAAC;YACrD;YACA,MAAMO,QAAO,GAAI,IAAI,CAACC,MAAM,CAACC,KAAK,CAACF,QAAO,IAAK,GAAE;YACjD,IAAI,CAACG,OAAO,CAACC,IAAI,CAACJ,QAAQ;UAC1B,EAAE,OAAOK,KAAK,EAAE;YACd,IAAI,CAACC,QAAQ,CAACD,KAAK,CAACA,KAAK,CAACpB,OAAM,IAAK,UAAU;UACjD,UAAU;YACR,IAAI,CAACH,SAAQ,GAAI,KAAI;UACvB;QACF;MACF,CAAC;IACH;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}