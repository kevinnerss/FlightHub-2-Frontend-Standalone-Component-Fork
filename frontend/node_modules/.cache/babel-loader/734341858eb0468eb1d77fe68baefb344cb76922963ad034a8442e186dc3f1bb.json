{"ast":null,"code":"import { Gamepad, VideoPlay, VideoPause, VideoStop, RefreshLeft, WarningFilled } from '@element-plus/icons-vue';\nexport default {\n  name: 'ControlPanel',\n  components: {\n    Gamepad,\n    VideoPlay,\n    VideoPause,\n    VideoStop,\n    RefreshLeft,\n    WarningFilled\n  },\n  props: {\n    currentStatus: {\n      type: String,\n      default: '待命'\n    },\n    targetAltitude: {\n      type: Number,\n      default: 0\n    },\n    targetSpeed: {\n      type: Number,\n      default: 0\n    }\n  },\n  data() {\n    return {\n      localTargetAltitude: this.targetAltitude,\n      localTargetSpeed: this.targetSpeed,\n      isProcessingEmergencyStop: false\n    };\n  },\n  watch: {\n    targetAltitude(newVal) {\n      this.localTargetAltitude = newVal;\n    },\n    targetSpeed(newVal) {\n      this.localTargetSpeed = newVal;\n    }\n  },\n  methods: {\n    // 处理控制动作\n    handleControl(action) {\n      this.$emit('control-action', action);\n    },\n    // 处理高度变更\n    handleAltitudeChange() {\n      this.$emit('update-altitude', this.localTargetAltitude);\n    },\n    // 处理速度变更\n    handleSpeedChange() {\n      this.$emit('update-speed', this.localTargetSpeed);\n    },\n    // 处理紧急停止 (添加防抖功能)\n    async handleEmergencyStop() {\n      if (this.isProcessingEmergencyStop) return;\n      this.isProcessingEmergencyStop = true;\n      this.$emit('emergency-stop');\n\n      // 3秒后重置状态\n      setTimeout(() => {\n        this.isProcessingEmergencyStop = false;\n      }, 3000);\n    }\n  }\n};","map":{"version":3,"names":["Gamepad","VideoPlay","VideoPause","VideoStop","RefreshLeft","WarningFilled","name","components","props","currentStatus","type","String","default","targetAltitude","Number","targetSpeed","data","localTargetAltitude","localTargetSpeed","isProcessingEmergencyStop","watch","newVal","methods","handleControl","action","$emit","handleAltitudeChange","handleSpeedChange","handleEmergencyStop","setTimeout"],"sources":["D:\\projects\\FlightHub-2-Frontend-Standalone-Component\\frontend\\src\\components\\ControlPanel.vue"],"sourcesContent":["<template>\n  <el-card shadow=\"hover\">\n    <!-- 标题栏 -->\n    <template #header>\n      <div class=\"flex items-center\">\n        <el-icon class=\"mr-2 text-green-500\"><gamepad /></el-icon>\n        <span>无人机控制</span>\n      </div>\n    </template>\n    \n    <!-- 控制面板 -->\n    <div class=\"space-y-4\">\n      <!-- 主控制按钮 -->\n      <el-row :gutter=\"12\">\n        <el-col :span=\"12\">\n          <el-button \n            type=\"primary\" \n            :icon=\"VideoPlay\" \n            size=\"large\"\n            class=\"w-full h-24 flex flex-col justify-center\"\n            @click=\"handleControl('start')\"\n            :disabled=\"currentStatus === '飞行中'\"\n          >\n            启动\n          </el-button>\n        </el-col>\n        <el-col :span=\"12\">\n          <el-button \n            type=\"warning\" \n            :icon=\"VideoPause\" \n            size=\"large\"\n            class=\"w-full h-24 flex flex-col justify-center\"\n            @click=\"handleControl('pause')\"\n            :disabled=\"currentStatus !== '飞行中'\"\n          >\n            暂停\n          </el-button>\n        </el-col>\n        <el-col :span=\"12\">\n          <el-button \n            type=\"danger\" \n            :icon=\"VideoStop\" \n            size=\"large\"\n            class=\"w-full h-24 flex flex-col justify-center\"\n            @click=\"handleControl('stop')\"\n            :disabled=\"currentStatus === '待命' || currentStatus === '已停止'\"\n          >\n            停止\n          </el-button>\n        </el-col>\n        <el-col :span=\"12\">\n          <el-button \n            type=\"info\" \n            :icon=\"RefreshLeft\" \n            size=\"large\"\n            class=\"w-full h-24 flex flex-col justify-center\"\n            @click=\"handleControl('return')\"\n            :disabled=\"currentStatus === '待命' || currentStatus === '已停止' || currentStatus === '返回中'\"\n          >\n            返航\n          </el-button>\n        </el-col>\n      </el-row>\n      \n      <!-- 高度控制 -->\n      <div>\n        <div class=\"flex justify-between items-center mb-2\">\n          <label class=\"text-sm text-gray-700 dark:text-gray-300\">目标高度</label>\n          <el-tag type=\"primary\" size=\"small\">{{ targetAltitude }} m</el-tag>\n        </div>\n        <el-slider\n          v-model.number=\"localTargetAltitude\"\n          :min=\"0\"\n          :max=\"100\"\n          :step=\"1\"\n          @change=\"handleAltitudeChange\"\n          :disabled=\"currentStatus !== '飞行中'\"\n          show-stops\n        ></el-slider>\n      </div>\n      \n      <!-- 速度控制 -->\n      <div>\n        <div class=\"flex justify-between items-center mb-2\">\n          <label class=\"text-sm text-gray-700 dark:text-gray-300\">目标速度</label>\n          <el-tag type=\"primary\" size=\"small\">{{ targetSpeed }} m/s</el-tag>\n        </div>\n        <el-slider\n          v-model.number=\"localTargetSpeed\"\n          :min=\"0\"\n          :max=\"15\"\n          :step=\"0.5\"\n          @change=\"handleSpeedChange\"\n          :disabled=\"currentStatus !== '飞行中'\"\n          show-stops\n        ></el-slider>\n      </div>\n      \n      <!-- 紧急停止按钮 -->\n      <el-button \n        type=\"danger\" \n        :icon=\"WarningFilled\" \n        size=\"large\"\n        class=\"w-full py-6\"\n        @click=\"$emit('emergency-stop')\"\n        :loading=\"isProcessingEmergencyStop\"\n      >\n        <span class=\"font-medium\">紧急停止</span>\n      </el-button>\n    </div>\n  </el-card>\n</template>\n\n<script>\nimport { Gamepad, VideoPlay, VideoPause, VideoStop, RefreshLeft, WarningFilled } from '@element-plus/icons-vue'\n\nexport default {\n  name: 'ControlPanel',\n  components: {\n    Gamepad,\n    VideoPlay,\n    VideoPause,\n    VideoStop,\n    RefreshLeft,\n    WarningFilled\n  },\n  props: {\n    currentStatus: {\n      type: String,\n      default: '待命'\n    },\n    targetAltitude: {\n      type: Number,\n      default: 0\n    },\n    targetSpeed: {\n      type: Number,\n      default: 0\n    }\n  },\n  data() {\n    return {\n      localTargetAltitude: this.targetAltitude,\n      localTargetSpeed: this.targetSpeed,\n      isProcessingEmergencyStop: false\n    }\n  },\n  watch: {\n    targetAltitude(newVal) {\n      this.localTargetAltitude = newVal\n    },\n    targetSpeed(newVal) {\n      this.localTargetSpeed = newVal\n    }\n  },\n  methods: {\n    // 处理控制动作\n    handleControl(action) {\n      this.$emit('control-action', action)\n    },\n    \n    // 处理高度变更\n    handleAltitudeChange() {\n      this.$emit('update-altitude', this.localTargetAltitude)\n    },\n    \n    // 处理速度变更\n    handleSpeedChange() {\n      this.$emit('update-speed', this.localTargetSpeed)\n    },\n    \n    // 处理紧急停止 (添加防抖功能)\n    async handleEmergencyStop() {\n      if (this.isProcessingEmergencyStop) return\n      \n      this.isProcessingEmergencyStop = true\n      this.$emit('emergency-stop')\n      \n      // 3秒后重置状态\n      setTimeout(() => {\n        this.isProcessingEmergencyStop = false\n      }, 3000)\n    }\n  }\n}\n</script>\n\n<style scoped>\n/* 紧急停止按钮脉冲动画 */\n.el-button--danger {\n  animation: pulse 2s infinite;\n}\n\n@keyframes pulse {\n  0% {\n    box-shadow: 0 0 0 0 rgba(235, 87, 87, 0.7);\n  }\n  70% {\n    box-shadow: 0 0 0 10px rgba(235, 87, 87, 0);\n  }\n  100% {\n    box-shadow: 0 0 0 0 rgba(235, 87, 87, 0);\n  }\n}\n\n/* 按钮样式优化 */\n.el-button {\n  transition: all 0.3s ease;\n}\n\n.el-button:hover:not(:disabled) {\n  transform: translateY(-2px);\n}\n\n.el-button:active:not(:disabled) {\n  transform: translateY(0);\n}\n\n/* 滑块样式优化 */\n.el-slider__runway {\n  border-radius: 4px;\n}\n\n.el-slider__bar {\n  border-radius: 4px;\n}\n</style>"],"mappings":"AAkHA,SAASA,OAAO,EAAEC,SAAS,EAAEC,UAAU,EAAEC,SAAS,EAAEC,WAAW,EAAEC,aAAY,QAAS,yBAAwB;AAE9G,eAAe;EACbC,IAAI,EAAE,cAAc;EACpBC,UAAU,EAAE;IACVP,OAAO;IACPC,SAAS;IACTC,UAAU;IACVC,SAAS;IACTC,WAAW;IACXC;EACF,CAAC;EACDG,KAAK,EAAE;IACLC,aAAa,EAAE;MACbC,IAAI,EAAEC,MAAM;MACZC,OAAO,EAAE;IACX,CAAC;IACDC,cAAc,EAAE;MACdH,IAAI,EAAEI,MAAM;MACZF,OAAO,EAAE;IACX,CAAC;IACDG,WAAW,EAAE;MACXL,IAAI,EAAEI,MAAM;MACZF,OAAO,EAAE;IACX;EACF,CAAC;EACDI,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,mBAAmB,EAAE,IAAI,CAACJ,cAAc;MACxCK,gBAAgB,EAAE,IAAI,CAACH,WAAW;MAClCI,yBAAyB,EAAE;IAC7B;EACF,CAAC;EACDC,KAAK,EAAE;IACLP,cAAcA,CAACQ,MAAM,EAAE;MACrB,IAAI,CAACJ,mBAAkB,GAAII,MAAK;IAClC,CAAC;IACDN,WAAWA,CAACM,MAAM,EAAE;MAClB,IAAI,CAACH,gBAAe,GAAIG,MAAK;IAC/B;EACF,CAAC;EACDC,OAAO,EAAE;IACP;IACAC,aAAaA,CAACC,MAAM,EAAE;MACpB,IAAI,CAACC,KAAK,CAAC,gBAAgB,EAAED,MAAM;IACrC,CAAC;IAED;IACAE,oBAAoBA,CAAA,EAAG;MACrB,IAAI,CAACD,KAAK,CAAC,iBAAiB,EAAE,IAAI,CAACR,mBAAmB;IACxD,CAAC;IAED;IACAU,iBAAiBA,CAAA,EAAG;MAClB,IAAI,CAACF,KAAK,CAAC,cAAc,EAAE,IAAI,CAACP,gBAAgB;IAClD,CAAC;IAED;IACA,MAAMU,mBAAmBA,CAAA,EAAG;MAC1B,IAAI,IAAI,CAACT,yBAAyB,EAAE;MAEpC,IAAI,CAACA,yBAAwB,GAAI,IAAG;MACpC,IAAI,CAACM,KAAK,CAAC,gBAAgB;;MAE3B;MACAI,UAAU,CAAC,MAAM;QACf,IAAI,CAACV,yBAAwB,GAAI,KAAI;MACvC,CAAC,EAAE,IAAI;IACT;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}