{"ast":null,"code":"import Color from \"../Core/Color.js\";\nimport destroyObject from \"../Core/destroyObject.js\";\nimport ClearCommand from \"../Renderer/ClearCommand.js\";\nimport FramebufferManager from \"../Renderer/FramebufferManager.js\";\nimport PixelDatatype from \"../Renderer/PixelDatatype.js\";\n\n/**\n * @private\n */\nfunction SceneFramebuffer() {\n  this._numSamples = 1;\n  this._colorFramebuffer = new FramebufferManager({\n    depthStencil: true,\n    supportsDepthTexture: true\n  });\n  this._idFramebuffer = new FramebufferManager({\n    depthStencil: true,\n    supportsDepthTexture: true\n  });\n  this._idClearColor = new Color(0.0, 0.0, 0.0, 0.0);\n  this._clearCommand = new ClearCommand({\n    color: new Color(0.0, 0.0, 0.0, 0.0),\n    depth: 1.0,\n    owner: this\n  });\n}\nfunction destroyResources(post) {\n  post._colorFramebuffer.destroy();\n  post._idFramebuffer.destroy();\n}\nObject.defineProperties(SceneFramebuffer.prototype, {\n  framebuffer: {\n    get: function () {\n      return this._colorFramebuffer.framebuffer;\n    }\n  },\n  idFramebuffer: {\n    get: function () {\n      return this._idFramebuffer.framebuffer;\n    }\n  },\n  depthStencilTexture: {\n    get: function () {\n      return this._colorFramebuffer.getDepthStencilTexture();\n    }\n  }\n});\nSceneFramebuffer.prototype.update = function (context, viewport, hdr, numSamples) {\n  const width = viewport.width;\n  const height = viewport.height;\n  const pixelDatatype = hdr ? context.halfFloatingPointTexture ? PixelDatatype.HALF_FLOAT : PixelDatatype.FLOAT : PixelDatatype.UNSIGNED_BYTE;\n  this._numSamples = numSamples;\n  this._colorFramebuffer.update(context, width, height, numSamples, pixelDatatype);\n  this._idFramebuffer.update(context, width, height);\n};\nSceneFramebuffer.prototype.clear = function (context, passState, clearColor) {\n  Color.clone(clearColor, this._clearCommand.color);\n  Color.clone(this._idClearColor, this._clearCommand.color);\n  this._colorFramebuffer.clear(context, this._clearCommand, passState);\n  this._idFramebuffer.clear(context, this._clearCommand, passState);\n};\nSceneFramebuffer.prototype.getFramebuffer = function () {\n  return this._colorFramebuffer.framebuffer;\n};\nSceneFramebuffer.prototype.getIdFramebuffer = function () {\n  return this._idFramebuffer.framebuffer;\n};\nSceneFramebuffer.prototype.prepareColorTextures = function (context) {\n  if (this._numSamples > 1) {\n    this._colorFramebuffer.prepareTextures(context);\n  }\n};\nSceneFramebuffer.prototype.isDestroyed = function () {\n  return false;\n};\nSceneFramebuffer.prototype.destroy = function () {\n  destroyResources(this);\n  return destroyObject(this);\n};\nexport default SceneFramebuffer;","map":{"version":3,"names":["Color","destroyObject","ClearCommand","FramebufferManager","PixelDatatype","SceneFramebuffer","_numSamples","_colorFramebuffer","depthStencil","supportsDepthTexture","_idFramebuffer","_idClearColor","_clearCommand","color","depth","owner","destroyResources","post","destroy","Object","defineProperties","prototype","framebuffer","get","idFramebuffer","depthStencilTexture","getDepthStencilTexture","update","context","viewport","hdr","numSamples","width","height","pixelDatatype","halfFloatingPointTexture","HALF_FLOAT","FLOAT","UNSIGNED_BYTE","clear","passState","clearColor","clone","getFramebuffer","getIdFramebuffer","prepareColorTextures","prepareTextures","isDestroyed"],"sources":["D:/projects/FlightHub-2-Frontend-Standalone-Component/frontend/node_modules/@cesium/engine/Source/Scene/SceneFramebuffer.js"],"sourcesContent":["import Color from \"../Core/Color.js\";\nimport destroyObject from \"../Core/destroyObject.js\";\nimport ClearCommand from \"../Renderer/ClearCommand.js\";\nimport FramebufferManager from \"../Renderer/FramebufferManager.js\";\nimport PixelDatatype from \"../Renderer/PixelDatatype.js\";\n\n/**\n * @private\n */\nfunction SceneFramebuffer() {\n  this._numSamples = 1;\n  this._colorFramebuffer = new FramebufferManager({\n    depthStencil: true,\n    supportsDepthTexture: true,\n  });\n  this._idFramebuffer = new FramebufferManager({\n    depthStencil: true,\n    supportsDepthTexture: true,\n  });\n\n  this._idClearColor = new Color(0.0, 0.0, 0.0, 0.0);\n\n  this._clearCommand = new ClearCommand({\n    color: new Color(0.0, 0.0, 0.0, 0.0),\n    depth: 1.0,\n    owner: this,\n  });\n}\n\nfunction destroyResources(post) {\n  post._colorFramebuffer.destroy();\n  post._idFramebuffer.destroy();\n}\n\nObject.defineProperties(SceneFramebuffer.prototype, {\n  framebuffer: {\n    get: function () {\n      return this._colorFramebuffer.framebuffer;\n    },\n  },\n  idFramebuffer: {\n    get: function () {\n      return this._idFramebuffer.framebuffer;\n    },\n  },\n  depthStencilTexture: {\n    get: function () {\n      return this._colorFramebuffer.getDepthStencilTexture();\n    },\n  },\n});\n\nSceneFramebuffer.prototype.update = function (\n  context,\n  viewport,\n  hdr,\n  numSamples,\n) {\n  const width = viewport.width;\n  const height = viewport.height;\n  const pixelDatatype = hdr\n    ? context.halfFloatingPointTexture\n      ? PixelDatatype.HALF_FLOAT\n      : PixelDatatype.FLOAT\n    : PixelDatatype.UNSIGNED_BYTE;\n  this._numSamples = numSamples;\n  this._colorFramebuffer.update(\n    context,\n    width,\n    height,\n    numSamples,\n    pixelDatatype,\n  );\n  this._idFramebuffer.update(context, width, height);\n};\n\nSceneFramebuffer.prototype.clear = function (context, passState, clearColor) {\n  Color.clone(clearColor, this._clearCommand.color);\n  Color.clone(this._idClearColor, this._clearCommand.color);\n  this._colorFramebuffer.clear(context, this._clearCommand, passState);\n  this._idFramebuffer.clear(context, this._clearCommand, passState);\n};\n\nSceneFramebuffer.prototype.getFramebuffer = function () {\n  return this._colorFramebuffer.framebuffer;\n};\n\nSceneFramebuffer.prototype.getIdFramebuffer = function () {\n  return this._idFramebuffer.framebuffer;\n};\n\nSceneFramebuffer.prototype.prepareColorTextures = function (context) {\n  if (this._numSamples > 1) {\n    this._colorFramebuffer.prepareTextures(context);\n  }\n};\n\nSceneFramebuffer.prototype.isDestroyed = function () {\n  return false;\n};\n\nSceneFramebuffer.prototype.destroy = function () {\n  destroyResources(this);\n  return destroyObject(this);\n};\nexport default SceneFramebuffer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}