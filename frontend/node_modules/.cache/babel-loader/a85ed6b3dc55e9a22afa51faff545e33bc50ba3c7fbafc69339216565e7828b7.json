{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, normalizeStyle as _normalizeStyle, normalizeClass as _normalizeClass, withModifiers as _withModifiers, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"alarm-stats-page\"\n};\nconst _hoisted_2 = {\n  class: \"page-header\"\n};\nconst _hoisted_3 = {\n  class: \"header-meta\"\n};\nconst _hoisted_4 = {\n  class: \"meta-chip\"\n};\nconst _hoisted_5 = {\n  class: \"meta-value\"\n};\nconst _hoisted_6 = {\n  key: 0,\n  class: \"loading-state\"\n};\nconst _hoisted_7 = {\n  key: 1\n};\nconst _hoisted_8 = {\n  key: 0,\n  class: \"error-state\"\n};\nconst _hoisted_9 = {\n  class: \"top-grid\"\n};\nconst _hoisted_10 = {\n  class: \"card hero-card\"\n};\nconst _hoisted_11 = {\n  class: \"hero-content\"\n};\nconst _hoisted_12 = {\n  class: \"hero-header\"\n};\nconst _hoisted_13 = {\n  class: \"hero-number\"\n};\nconst _hoisted_14 = {\n  class: \"hero-summary\"\n};\nconst _hoisted_15 = {\n  class: \"chip-label\"\n};\nconst _hoisted_16 = {\n  class: \"chip-value\"\n};\nconst _hoisted_17 = {\n  class: \"card metrics-card\"\n};\nconst _hoisted_18 = {\n  class: \"metrics-grid\"\n};\nconst _hoisted_19 = {\n  class: \"metric-label\"\n};\nconst _hoisted_20 = {\n  class: \"metric-value\"\n};\nconst _hoisted_21 = {\n  key: 0\n};\nconst _hoisted_22 = {\n  key: 1\n};\nconst _hoisted_23 = {\n  key: 2\n};\nconst _hoisted_24 = {\n  class: \"card donut-card\"\n};\nconst _hoisted_25 = {\n  class: \"donut-content\"\n};\nconst _hoisted_26 = {\n  class: \"donut-chart\",\n  viewBox: \"0 0 140 140\",\n  role: \"img\",\n  \"aria-label\": \"异常占比\"\n};\nconst _hoisted_27 = [\"stroke\", \"stroke-dasharray\", \"stroke-dashoffset\"];\nconst _hoisted_28 = {\n  x: \"70\",\n  y: \"84\",\n  \"text-anchor\": \"middle\",\n  class: \"donut-value\"\n};\nconst _hoisted_29 = {\n  class: \"donut-legend\"\n};\nconst _hoisted_30 = {\n  class: \"legend-text\"\n};\nconst _hoisted_31 = {\n  class: \"legend-name\"\n};\nconst _hoisted_32 = {\n  class: \"legend-value\"\n};\nconst _hoisted_33 = {\n  class: \"card chart-card\"\n};\nconst _hoisted_34 = {\n  class: \"card-header\"\n};\nconst _hoisted_35 = {\n  class: \"series-legend\"\n};\nconst _hoisted_36 = {\n  class: \"legend-name\"\n};\nconst _hoisted_37 = {\n  key: 0,\n  class: \"line-chart-wrapper\"\n};\nconst _hoisted_38 = [\"viewBox\"];\nconst _hoisted_39 = {\n  class: \"grid-lines\"\n};\nconst _hoisted_40 = [\"y1\", \"x2\", \"y2\"];\nconst _hoisted_41 = {\n  class: \"chart-series\"\n};\nconst _hoisted_42 = [\"d\", \"stroke\"];\nconst _hoisted_43 = {\n  class: \"data-points\"\n};\nconst _hoisted_44 = [\"cx\", \"cy\", \"fill\", \"onClick\"];\nconst _hoisted_45 = {\n  key: 1,\n  class: \"empty-state\"\n};\nconst _hoisted_46 = {\n  class: \"modal-premium detail-modal\"\n};\nconst _hoisted_47 = {\n  class: \"modal-header\"\n};\nconst _hoisted_48 = {\n  class: \"modal-title\"\n};\nconst _hoisted_49 = {\n  class: \"modal-body\"\n};\nconst _hoisted_50 = {\n  key: 0,\n  class: \"loading-state\"\n};\nconst _hoisted_51 = {\n  key: 1\n};\nconst _hoisted_52 = {\n  key: 0,\n  class: \"empty-state\"\n};\nconst _hoisted_53 = {\n  key: 1,\n  class: \"detail-list\"\n};\nconst _hoisted_54 = {\n  class: \"detail-main\"\n};\nconst _hoisted_55 = {\n  class: \"detail-title\"\n};\nconst _hoisted_56 = {\n  class: \"detail-meta\"\n};\nconst _hoisted_57 = {\n  key: 0\n};\nconst _hoisted_58 = {\n  class: \"detail-badges\"\n};\nconst _hoisted_59 = {\n  class: \"status-pill\"\n};\nconst _hoisted_60 = {\n  class: \"status-pill\"\n};\nconst _hoisted_61 = {\n  class: \"modal-footer\"\n};\nconst _hoisted_62 = {\n  class: \"selection-header\"\n};\nconst _hoisted_63 = {\n  class: \"selection-options\"\n};\nconst _hoisted_64 = [\"onClick\"];\nconst _hoisted_65 = {\n  class: \"option-name\"\n};\nconst _hoisted_66 = {\n  class: \"option-value\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[6] || (_cache[6] = _createElementVNode(\"div\", {\n    class: \"title-block\"\n  }, [_createElementVNode(\"p\", {\n    class: \"page-kicker\"\n  }, \"沈阳地铁三号线 智能轨道巡检无人机\"), _createElementVNode(\"h1\", {\n    class: \"page-title\"\n  }, \"告警统计\"), _createElementVNode(\"p\", {\n    class: \"page-subtitle\"\n  }, \"近一年各航线月度告警趋势，可点击节点查看当月详情\")], -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_3, [_cache[5] || (_cache[5] = _createElementVNode(\"div\", {\n    class: \"meta-chip\"\n  }, [_createElementVNode(\"span\", {\n    class: \"meta-label\"\n  }, \"统计周期\"), _createElementVNode(\"span\", {\n    class: \"meta-value\"\n  }, \"近 12 个月\")], -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_4, [_cache[4] || (_cache[4] = _createElementVNode(\"span\", {\n    class: \"meta-label\"\n  }, \"更新时间\", -1 /* CACHED */)), _createElementVNode(\"span\", _hoisted_5, _toDisplayString($data.lastUpdated), 1 /* TEXT */)])])]), $data.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [...(_cache[7] || (_cache[7] = [_createElementVNode(\"div\", {\n    class: \"loading-spinner\"\n  }, null, -1 /* CACHED */), _createElementVNode(\"p\", null, \"正在加载告警统计...\", -1 /* CACHED */)]))])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [$data.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, _toDisplayString($data.error), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, [_cache[11] || (_cache[11] = _createElementVNode(\"div\", {\n    class: \"hero-overlay\"\n  }, null, -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"div\", null, [_cache[9] || (_cache[9] = _createElementVNode(\"p\", {\n    class: \"hero-label\"\n  }, \"安全运行天数\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_13, [_createTextVNode(_toDisplayString($data.stats.safetyDays) + \" \", 1 /* TEXT */), _cache[8] || (_cache[8] = _createElementVNode(\"span\", {\n    class: \"hero-unit\"\n  }, \"天\", -1 /* CACHED */))])]), _cache[10] || (_cache[10] = _createElementVNode(\"span\", {\n    class: \"hero-tag\"\n  }, \"近一年\", -1 /* CACHED */))]), _createElementVNode(\"div\", _hoisted_14, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.safetyStatuses, status => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: status.label,\n      class: \"summary-chip\"\n    }, [_createElementVNode(\"span\", {\n      class: \"chip-dot\",\n      style: _normalizeStyle({\n        background: status.color\n      })\n    }, null, 4 /* STYLE */), _createElementVNode(\"span\", _hoisted_15, _toDisplayString(status.label), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_16, _toDisplayString(status.value), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))])])]), _createElementVNode(\"div\", _hoisted_17, [_cache[12] || (_cache[12] = _createElementVNode(\"div\", {\n    class: \"card-header\"\n  }, [_createElementVNode(\"h3\", {\n    class: \"card-title\"\n  }, \"巡检指标\"), _createElementVNode(\"span\", {\n    class: \"card-subtitle\"\n  }, \"累计与当日概览\")], -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_18, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.metrics, metric => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: metric.label,\n      class: \"metric-item\"\n    }, [_createElementVNode(\"div\", _hoisted_19, _toDisplayString(metric.label), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_20, [_createTextVNode(_toDisplayString(metric.value) + \" \", 1 /* TEXT */), metric.delta ? (_openBlock(), _createElementBlock(\"span\", {\n      key: 0,\n      class: _normalizeClass([\"metric-trend\", metric.trend])\n    }, [metric.trend === 'up' ? (_openBlock(), _createElementBlock(\"span\", _hoisted_21, \"↑\")) : metric.trend === 'down' ? (_openBlock(), _createElementBlock(\"span\", _hoisted_22, \"↓\")) : (_openBlock(), _createElementBlock(\"span\", _hoisted_23, \"→\")), _createTextVNode(\" \" + _toDisplayString(metric.delta), 1 /* TEXT */)], 2 /* CLASS */)) : _createCommentVNode(\"v-if\", true)])]);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createElementVNode(\"div\", _hoisted_24, [_cache[15] || (_cache[15] = _createElementVNode(\"div\", {\n    class: \"card-header\"\n  }, [_createElementVNode(\"h3\", {\n    class: \"card-title\"\n  }, \"异常点位趋势分布\"), _createElementVNode(\"span\", {\n    class: \"card-subtitle\"\n  }, \"按航线占比\")], -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_25, [(_openBlock(), _createElementBlock(\"svg\", _hoisted_26, [_cache[13] || (_cache[13] = _createStaticVNode(\"<defs data-v-a3cd80f0><filter id=\\\"glow\\\" x=\\\"-40%\\\" y=\\\"-40%\\\" width=\\\"180%\\\" height=\\\"180%\\\" data-v-a3cd80f0><feGaussianBlur stdDeviation=\\\"3\\\" result=\\\"coloredBlur\\\" data-v-a3cd80f0></feGaussianBlur><feMerge data-v-a3cd80f0><feMergeNode in=\\\"coloredBlur\\\" data-v-a3cd80f0></feMergeNode><feMergeNode in=\\\"SourceGraphic\\\" data-v-a3cd80f0></feMergeNode></feMerge></filter></defs><circle class=\\\"donut-track\\\" cx=\\\"70\\\" cy=\\\"70\\\" r=\\\"44\\\" fill=\\\"none\\\" stroke=\\\"rgba(255,255,255,0.05)\\\" stroke-width=\\\"14\\\" data-v-a3cd80f0></circle>\", 2)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.donutSeries, (item, idx) => {\n    return _openBlock(), _createElementBlock(\"circle\", {\n      key: item.name,\n      class: \"donut-segment\",\n      filter: \"url(#glow)\",\n      cx: \"70\",\n      cy: \"70\",\n      r: \"44\",\n      fill: \"none\",\n      stroke: item.color,\n      \"stroke-linecap\": \"round\",\n      \"stroke-width\": \"14\",\n      \"stroke-dasharray\": $options.getDonutDash(item.value),\n      \"stroke-dashoffset\": $options.getDonutOffset(idx),\n      transform: \"rotate(-90 70 70)\"\n    }, null, 8 /* PROPS */, _hoisted_27);\n  }), 128 /* KEYED_FRAGMENT */)), _cache[14] || (_cache[14] = _createElementVNode(\"text\", {\n    x: \"70\",\n    y: \"64\",\n    \"text-anchor\": \"middle\",\n    class: \"donut-label\"\n  }, \"总异常\", -1 /* CACHED */)), _createElementVNode(\"text\", _hoisted_28, _toDisplayString($options.donutTotal), 1 /* TEXT */)])), _createElementVNode(\"div\", _hoisted_29, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.donutSeries, item => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: item.name,\n      class: \"legend-item\"\n    }, [_createElementVNode(\"span\", {\n      class: \"legend-dot\",\n      style: _normalizeStyle({\n        background: item.color\n      })\n    }, null, 4 /* STYLE */), _createElementVNode(\"div\", _hoisted_30, [_createElementVNode(\"span\", _hoisted_31, _toDisplayString(item.name), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_32, _toDisplayString($options.getDonutPercent(item.value)) + \"%\", 1 /* TEXT */)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])])]), _createElementVNode(\"div\", _hoisted_33, [_createElementVNode(\"div\", _hoisted_34, [_cache[16] || (_cache[16] = _createElementVNode(\"div\", null, [_createElementVNode(\"h3\", {\n    class: \"card-title\"\n  }, \"异常点位时间分布\"), _createElementVNode(\"span\", {\n    class: \"card-subtitle\"\n  }, \"按月份分布的航线异常趋势（点击节点查看当月告警）\")], -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_35, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.lineChart.series, serie => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: serie.id,\n      class: \"series-chip\"\n    }, [_createElementVNode(\"span\", {\n      class: \"legend-dot\",\n      style: _normalizeStyle({\n        background: serie.color\n      })\n    }, null, 4 /* STYLE */), _createElementVNode(\"span\", _hoisted_36, _toDisplayString(serie.name), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))])]), $data.lineChart.series.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_37, [(_openBlock(), _createElementBlock(\"svg\", {\n    class: \"line-chart\",\n    viewBox: `0 0 ${$data.chartSize.width} ${$data.chartSize.height}`,\n    preserveAspectRatio: \"none\"\n  }, [_createElementVNode(\"g\", _hoisted_39, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.gridLines, (line, idx) => {\n    return _openBlock(), _createElementBlock(\"line\", {\n      key: idx,\n      x1: 0,\n      y1: line.y,\n      x2: $data.chartSize.width,\n      y2: line.y,\n      stroke: \"rgba(255,255,255,0.05)\",\n      \"stroke-width\": \"1\"\n    }, null, 8 /* PROPS */, _hoisted_40);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"g\", _hoisted_41, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.lineChart.series, serie => {\n    return _openBlock(), _createElementBlock(\"g\", {\n      key: serie.id\n    }, [_createElementVNode(\"path\", {\n      d: $options.getLinePath(serie.data),\n      stroke: serie.color,\n      fill: \"none\",\n      \"stroke-width\": \"3\",\n      \"stroke-linecap\": \"round\",\n      \"stroke-linejoin\": \"round\"\n    }, null, 8 /* PROPS */, _hoisted_42), _createElementVNode(\"g\", _hoisted_43, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.getLinePoints(serie.data), (point, idx) => {\n      return _openBlock(), _createElementBlock(\"g\", {\n        key: point.x + '-' + point.y\n      }, [_createElementVNode(\"circle\", {\n        cx: point.x,\n        cy: point.y,\n        r: 5,\n        fill: serie.color,\n        stroke: \"rgba(255,255,255,0.8)\",\n        \"stroke-width\": \"1.5\",\n        class: \"chart-point\",\n        onClick: $event => $options.handlePointClick(serie, idx, $event)\n      }, null, 8 /* PROPS */, _hoisted_44)]);\n    }), 128 /* KEYED_FRAGMENT */))])]);\n  }), 128 /* KEYED_FRAGMENT */))])], 8 /* PROPS */, _hoisted_38)), _createElementVNode(\"div\", {\n    class: \"x-axis\",\n    style: _normalizeStyle($options.axisPaddingStyle)\n  }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.lineChart.categories, label => {\n    return _openBlock(), _createElementBlock(\"span\", {\n      key: label\n    }, _toDisplayString(label), 1 /* TEXT */);\n  }), 128 /* KEYED_FRAGMENT */))], 4 /* STYLE */)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_45, \"暂无告警数据\"))])])), $data.detailModal.visible ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 2,\n    class: \"modal-overlay\",\n    onClick: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.closeDetailModal && $options.closeDetailModal(...args), [\"self\"]))\n  }, [_createElementVNode(\"div\", _hoisted_46, [_createElementVNode(\"div\", _hoisted_47, [_createElementVNode(\"h3\", _hoisted_48, _toDisplayString($data.detailModal.waylineName) + \" · \" + _toDisplayString($data.detailModal.monthLabel) + \" 告警\", 1 /* TEXT */), _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.closeDetailModal && $options.closeDetailModal(...args)),\n    class: \"modal-close\"\n  }, \"×\")]), _createElementVNode(\"div\", _hoisted_49, [$data.detailModal.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_50, [...(_cache[17] || (_cache[17] = [_createElementVNode(\"div\", {\n    class: \"loading-spinner\"\n  }, null, -1 /* CACHED */), _createElementVNode(\"p\", null, \"正在加载当月告警...\", -1 /* CACHED */)]))])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_51, [!$data.detailModal.alarms.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_52, \"该月份暂无告警\")) : (_openBlock(), _createElementBlock(\"div\", _hoisted_53, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.detailModal.alarms, alarm => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: alarm.id,\n      class: \"detail-row\"\n    }, [_createElementVNode(\"div\", _hoisted_54, [_createElementVNode(\"div\", _hoisted_55, _toDisplayString(alarm.content || '未填写描述'), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_56, [_createElementVNode(\"span\", null, \"时间：\" + _toDisplayString($options.formatDateTime(alarm.created_at)), 1 /* TEXT */), _createElementVNode(\"span\", null, \"航线：\" + _toDisplayString($options.resolveWaylineName(alarm)), 1 /* TEXT */), alarm.latitude && alarm.longitude ? (_openBlock(), _createElementBlock(\"span\", _hoisted_57, \"坐标：\" + _toDisplayString(alarm.latitude) + \", \" + _toDisplayString(alarm.longitude), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])]), _createElementVNode(\"div\", _hoisted_58, [_createElementVNode(\"span\", _hoisted_59, \"ID: \" + _toDisplayString(alarm.id), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_60, _toDisplayString(alarm.status || '未知状态'), 1 /* TEXT */)])]);\n  }), 128 /* KEYED_FRAGMENT */))]))]))]), _createElementVNode(\"div\", _hoisted_61, [_createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.closeDetailModal && $options.closeDetailModal(...args)),\n    class: \"modal-btn secondary-btn\"\n  }, \"关闭\")])])])) : _createCommentVNode(\"v-if\", true), $data.selectionMenu.visible ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 3,\n    class: \"selection-pop\",\n    style: _normalizeStyle({\n      top: `${$data.selectionMenu.y}px`,\n      left: `${$data.selectionMenu.x}px`\n    })\n  }, [_createElementVNode(\"div\", _hoisted_62, [_cache[18] || (_cache[18] = _createElementVNode(\"span\", null, \"选择航线查看当月告警\", -1 /* CACHED */)), _createElementVNode(\"button\", {\n    class: \"close-btn\",\n    onClick: _cache[3] || (_cache[3] = $event => $data.selectionMenu.visible = false)\n  }, \"×\")]), _createElementVNode(\"div\", _hoisted_63, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.selectionMenu.options, option => {\n    return _openBlock(), _createElementBlock(\"button\", {\n      key: option.id,\n      class: \"selection-item\",\n      onClick: $event => $options.selectSeriesOption(option)\n    }, [_createElementVNode(\"span\", {\n      class: \"legend-dot\",\n      style: _normalizeStyle({\n        background: option.color || '#38bdf8'\n      })\n    }, null, 4 /* STYLE */), _createElementVNode(\"span\", _hoisted_65, _toDisplayString(option.name), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_66, _toDisplayString(option.data?.[$data.selectionMenu.monthIndex] || 0) + \" 条\", 1 /* TEXT */)], 8 /* PROPS */, _hoisted_64);\n  }), 128 /* KEYED_FRAGMENT */))])], 4 /* STYLE */)) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","viewBox","role","x","y","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_toDisplayString","$data","lastUpdated","loading","_hoisted_6","_cache","_hoisted_7","error","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","stats","safetyDays","_hoisted_14","_Fragment","_renderList","safetyStatuses","status","key","label","style","_normalizeStyle","background","color","_hoisted_15","_hoisted_16","value","_hoisted_17","_hoisted_18","metrics","metric","_hoisted_19","_hoisted_20","delta","_normalizeClass","trend","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","donutSeries","item","idx","name","filter","cx","cy","r","fill","stroke","$options","getDonutDash","getDonutOffset","transform","_hoisted_28","donutTotal","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","getDonutPercent","_hoisted_33","_hoisted_34","_hoisted_35","lineChart","series","serie","id","_hoisted_36","length","_hoisted_37","chartSize","width","height","preserveAspectRatio","_hoisted_39","gridLines","line","x1","y1","x2","y2","_hoisted_41","d","getLinePath","data","_hoisted_43","getLinePoints","point","onClick","$event","handlePointClick","axisPaddingStyle","categories","_hoisted_45","detailModal","visible","_withModifiers","args","closeDetailModal","_hoisted_46","_hoisted_47","_hoisted_48","waylineName","monthLabel","_hoisted_49","_hoisted_50","_hoisted_51","alarms","_hoisted_52","_hoisted_53","alarm","_hoisted_54","_hoisted_55","content","_hoisted_56","formatDateTime","created_at","resolveWaylineName","latitude","longitude","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","selectionMenu","top","left","_hoisted_62","_hoisted_63","options","option","selectSeriesOption","_hoisted_65","_hoisted_66","monthIndex"],"sources":["D:\\projects\\FlightHub-2-Frontend-Standalone-Component\\frontend\\src\\views\\AlarmStats.vue"],"sourcesContent":["<template>\n  <div class=\"alarm-stats-page\">\n    <div class=\"page-header\">\n      <div class=\"title-block\">\n        <p class=\"page-kicker\">沈阳地铁三号线 智能轨道巡检无人机</p>\n        <h1 class=\"page-title\">告警统计</h1>\n        <p class=\"page-subtitle\">近一年各航线月度告警趋势，可点击节点查看当月详情</p>\n      </div>\n      <div class=\"header-meta\">\n        <div class=\"meta-chip\">\n          <span class=\"meta-label\">统计周期</span>\n          <span class=\"meta-value\">近 12 个月</span>\n        </div>\n        <div class=\"meta-chip\">\n          <span class=\"meta-label\">更新时间</span>\n          <span class=\"meta-value\">{{ lastUpdated }}</span>\n        </div>\n      </div>\n    </div>\n\n    <div v-if=\"loading\" class=\"loading-state\">\n      <div class=\"loading-spinner\"></div>\n      <p>正在加载告警统计...</p>\n    </div>\n    <div v-else>\n      <div v-if=\"error\" class=\"error-state\">{{ error }}</div>\n\n      <div class=\"top-grid\">\n        <div class=\"card hero-card\">\n          <div class=\"hero-overlay\"></div>\n          <div class=\"hero-content\">\n            <div class=\"hero-header\">\n              <div>\n                <p class=\"hero-label\">安全运行天数</p>\n                <div class=\"hero-number\">\n                  {{ stats.safetyDays }}\n                  <span class=\"hero-unit\">天</span>\n                </div>\n              </div>\n              <span class=\"hero-tag\">近一年</span>\n            </div>\n            <div class=\"hero-summary\">\n              <div v-for=\"status in safetyStatuses\" :key=\"status.label\" class=\"summary-chip\">\n                <span class=\"chip-dot\" :style=\"{ background: status.color }\"></span>\n                <span class=\"chip-label\">{{ status.label }}</span>\n                <span class=\"chip-value\">{{ status.value }}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"card metrics-card\">\n          <div class=\"card-header\">\n            <h3 class=\"card-title\">巡检指标</h3>\n            <span class=\"card-subtitle\">累计与当日概览</span>\n          </div>\n          <div class=\"metrics-grid\">\n            <div v-for=\"metric in metrics\" :key=\"metric.label\" class=\"metric-item\">\n              <div class=\"metric-label\">{{ metric.label }}</div>\n              <div class=\"metric-value\">\n                {{ metric.value }}\n                <span v-if=\"metric.delta\" class=\"metric-trend\" :class=\"metric.trend\">\n                  <span v-if=\"metric.trend === 'up'\">↑</span>\n                  <span v-else-if=\"metric.trend === 'down'\">↓</span>\n                  <span v-else>→</span>\n                  {{ metric.delta }}\n                </span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"card donut-card\">\n          <div class=\"card-header\">\n            <h3 class=\"card-title\">异常点位趋势分布</h3>\n            <span class=\"card-subtitle\">按航线占比</span>\n          </div>\n          <div class=\"donut-content\">\n            <svg class=\"donut-chart\" viewBox=\"0 0 140 140\" role=\"img\" aria-label=\"异常占比\">\n              <defs>\n                <filter id=\"glow\" x=\"-40%\" y=\"-40%\" width=\"180%\" height=\"180%\">\n                  <feGaussianBlur stdDeviation=\"3\" result=\"coloredBlur\" />\n                  <feMerge>\n                    <feMergeNode in=\"coloredBlur\" />\n                    <feMergeNode in=\"SourceGraphic\" />\n                  </feMerge>\n                </filter>\n              </defs>\n              <circle\n                class=\"donut-track\"\n                cx=\"70\"\n                cy=\"70\"\n                r=\"44\"\n                fill=\"none\"\n                stroke=\"rgba(255,255,255,0.05)\"\n                stroke-width=\"14\"\n              />\n              <circle\n                v-for=\"(item, idx) in donutSeries\"\n                :key=\"item.name\"\n                class=\"donut-segment\"\n                filter=\"url(#glow)\"\n                cx=\"70\"\n                cy=\"70\"\n                r=\"44\"\n                fill=\"none\"\n                :stroke=\"item.color\"\n                stroke-linecap=\"round\"\n                stroke-width=\"14\"\n                :stroke-dasharray=\"getDonutDash(item.value)\"\n                :stroke-dashoffset=\"getDonutOffset(idx)\"\n                transform=\"rotate(-90 70 70)\"\n              />\n              <text x=\"70\" y=\"64\" text-anchor=\"middle\" class=\"donut-label\">总异常</text>\n              <text x=\"70\" y=\"84\" text-anchor=\"middle\" class=\"donut-value\">\n                {{ donutTotal }}\n              </text>\n            </svg>\n            <div class=\"donut-legend\">\n              <div v-for=\"item in donutSeries\" :key=\"item.name\" class=\"legend-item\">\n                <span class=\"legend-dot\" :style=\"{ background: item.color }\"></span>\n                <div class=\"legend-text\">\n                  <span class=\"legend-name\">{{ item.name }}</span>\n                  <span class=\"legend-value\">{{ getDonutPercent(item.value) }}%</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"card chart-card\">\n        <div class=\"card-header\">\n          <div>\n            <h3 class=\"card-title\">异常点位时间分布</h3>\n            <span class=\"card-subtitle\">按月份分布的航线异常趋势（点击节点查看当月告警）</span>\n          </div>\n          <div class=\"series-legend\">\n            <div v-for=\"serie in lineChart.series\" :key=\"serie.id\" class=\"series-chip\">\n              <span class=\"legend-dot\" :style=\"{ background: serie.color }\"></span>\n              <span class=\"legend-name\">{{ serie.name }}</span>\n            </div>\n          </div>\n        </div>\n        <div class=\"line-chart-wrapper\" v-if=\"lineChart.series.length\">\n          <svg\n            class=\"line-chart\"\n            :viewBox=\"`0 0 ${chartSize.width} ${chartSize.height}`\"\n            preserveAspectRatio=\"none\"\n          >\n            <g class=\"grid-lines\">\n              <line\n                v-for=\"(line, idx) in gridLines\"\n                :key=\"idx\"\n                :x1=\"0\"\n                :y1=\"line.y\"\n                :x2=\"chartSize.width\"\n                :y2=\"line.y\"\n                stroke=\"rgba(255,255,255,0.05)\"\n                stroke-width=\"1\"\n              />\n            </g>\n            <g class=\"chart-series\">\n              <g v-for=\"serie in lineChart.series\" :key=\"serie.id\">\n                <path\n                  :d=\"getLinePath(serie.data)\"\n                  :stroke=\"serie.color\"\n                  fill=\"none\"\n                  stroke-width=\"3\"\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"\n                />\n                <g class=\"data-points\">\n                  <g v-for=\"(point, idx) in getLinePoints(serie.data)\" :key=\"point.x + '-' + point.y\">\n                    <circle\n                      :cx=\"point.x\"\n                      :cy=\"point.y\"\n                      :r=\"5\"\n                      :fill=\"serie.color\"\n                      stroke=\"rgba(255,255,255,0.8)\"\n                      stroke-width=\"1.5\"\n                      class=\"chart-point\"\n                      @click=\"handlePointClick(serie, idx, $event)\"\n                    />\n                  </g>\n                </g>\n              </g>\n            </g>\n          </svg>\n          <div class=\"x-axis\" :style=\"axisPaddingStyle\">\n            <span v-for=\"label in lineChart.categories\" :key=\"label\">{{ label }}</span>\n          </div>\n        </div>\n        <div v-else class=\"empty-state\">暂无告警数据</div>\n      </div>\n    </div>\n\n    <div v-if=\"detailModal.visible\" class=\"modal-overlay\" @click.self=\"closeDetailModal\">\n      <div class=\"modal-premium detail-modal\">\n        <div class=\"modal-header\">\n          <h3 class=\"modal-title\">{{ detailModal.waylineName }} · {{ detailModal.monthLabel }} 告警</h3>\n          <button @click=\"closeDetailModal\" class=\"modal-close\">×</button>\n        </div>\n        <div class=\"modal-body\">\n          <div v-if=\"detailModal.loading\" class=\"loading-state\">\n            <div class=\"loading-spinner\"></div>\n            <p>正在加载当月告警...</p>\n          </div>\n          <div v-else>\n            <div v-if=\"!detailModal.alarms.length\" class=\"empty-state\">该月份暂无告警</div>\n            <div v-else class=\"detail-list\">\n              <div v-for=\"alarm in detailModal.alarms\" :key=\"alarm.id\" class=\"detail-row\">\n                <div class=\"detail-main\">\n                  <div class=\"detail-title\">{{ alarm.content || '未填写描述' }}</div>\n                  <div class=\"detail-meta\">\n                    <span>时间：{{ formatDateTime(alarm.created_at) }}</span>\n                    <span>航线：{{ resolveWaylineName(alarm) }}</span>\n                    <span v-if=\"alarm.latitude && alarm.longitude\">坐标：{{ alarm.latitude }}, {{ alarm.longitude }}</span>\n                  </div>\n                </div>\n                <div class=\"detail-badges\">\n                  <span class=\"status-pill\">ID: {{ alarm.id }}</span>\n                  <span class=\"status-pill\">{{ alarm.status || '未知状态' }}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button @click=\"closeDetailModal\" class=\"modal-btn secondary-btn\">关闭</button>\n        </div>\n      </div>\n    </div>\n\n    <div\n      v-if=\"selectionMenu.visible\"\n      class=\"selection-pop\"\n      :style=\"{ top: `${selectionMenu.y}px`, left: `${selectionMenu.x}px` }\"\n    >\n      <div class=\"selection-header\">\n        <span>选择航线查看当月告警</span>\n        <button class=\"close-btn\" @click=\"selectionMenu.visible = false\">×</button>\n      </div>\n      <div class=\"selection-options\">\n        <button\n          v-for=\"option in selectionMenu.options\"\n          :key=\"option.id\"\n          class=\"selection-item\"\n          @click=\"selectSeriesOption(option)\"\n        >\n          <span class=\"legend-dot\" :style=\"{ background: option.color || '#38bdf8' }\"></span>\n          <span class=\"option-name\">{{ option.name }}</span>\n          <span class=\"option-value\">{{ option.data?.[selectionMenu.monthIndex] || 0 }} 条</span>\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport alarmApi from '../api/alarmApi'\n\nexport default {\n  name: 'AlarmStats',\n  data() {\n    return {\n      loading: true,\n      error: '',\n      lastUpdated: '',\n      months: [],\n      waylines: [],\n      waylineNameMap: {},\n      stats: {\n        safetyDays: 0,\n        totalAlarms: 0,\n        todayAlarms: 0,\n        totalMileage: '--',\n        todayMileage: '--'\n      },\n      safetyStatuses: [\n        { label: '同里程位', value: 0, color: '#38bdf8' },\n        { label: '重要点位', value: 0, color: '#a855f7' },\n        { label: '安全位', value: 0, color: '#22c55e' }\n      ],\n      metrics: [],\n      lineChart: {\n        categories: [],\n        series: []\n      },\n      donutSeries: [],\n      chartSize: {\n        width: 1080,\n        height: 320\n      },\n      chartPaddingX: 28,\n      chartPaddingY: 16,\n      latestAlarmDate: null,\n      windowAlarms: [],\n      detailModal: {\n        visible: false,\n        loading: false,\n        waylineId: null,\n        waylineName: '',\n        monthLabel: '',\n        alarms: []\n      },\n      // 高对比度调色板（顺序循环使用）\n      seriesColors: [\n        '#20A4F3', // 鲜亮蓝\n        '#FF6B6B', // 亮红\n        '#7C3AED', // 深紫\n        '#16A34A', // 纯绿\n        '#F59E0B', // 琥珀橙\n        '#0EA5E9', // 青蓝\n        '#EF4444', // 鲜红\n        '#14B8A6', // 松石绿\n        '#8B5CF6', // 紫罗兰\n        '#F97316', // 亮橙\n        '#22C55E', // 草绿\n        '#C026D3'  // 品红\n      ],\n      selectionMenu: {\n        visible: false,\n        options: [],\n        monthIndex: null,\n        x: 0,\n        y: 0\n      }\n    }\n  },\n  computed: {\n    donutTotal() {\n      return this.donutSeries.reduce((sum, item) => sum + item.value, 0)\n    },\n    maxLineValue() {\n      const values = this.lineChart.series.flatMap(item => item.data)\n      return Math.max(...values, 1)\n    },\n    gridLines() {\n      const lines = []\n      const steps = 5\n      const innerHeight = Math.max(this.chartSize.height - this.chartPaddingY * 2, 1)\n      for (let i = 0; i <= steps; i++) {\n        const y = this.chartPaddingY + (innerHeight / steps) * i\n        lines.push({ y })\n      }\n      return lines\n    },\n    axisPaddingStyle() {\n      return {\n        paddingLeft: `${this.chartPaddingX}px`,\n        paddingRight: `${this.chartPaddingX}px`\n      }\n    }\n  },\n  mounted() {\n    this.loadData()\n  },\n  methods: {\n    async loadData() {\n      this.loading = true\n      this.error = ''\n      try {\n        // 先获取最新告警时间，用作时间轴锚点\n        const latest = await this.fetchLatestCreatedAt()\n        this.initMonths(latest || new Date())\n        await Promise.all([this.fetchWaylines(), this.fetchAndAggregateAlarms()])\n        if (!this.lastUpdated && latest) {\n          this.lastUpdated = this.formatDateTime(latest)\n        }\n      } catch (err) {\n        console.error('加载告警统计失败', err)\n        this.error = '加载告警统计失败，请稍后重试'\n      } finally {\n        this.loading = false\n      }\n    },\n    initMonths(baseDate = new Date()) {\n      const months = []\n      const anchor = this.parsePlainDate(baseDate) || new Date()\n      for (let i = 11; i >= 0; i--) {\n        const date = new Date(anchor.getFullYear(), anchor.getMonth() - i, 1)\n        const start = new Date(date.getFullYear(), date.getMonth(), 1, 0, 0, 0, 0)\n        const end = new Date(date.getFullYear(), date.getMonth() + 1, 0, 23, 59, 59, 999)\n        months.push({\n          label: `${date.getMonth() + 1}月`,\n          key: `${date.getFullYear()}-${date.getMonth()}`,\n          start,\n          end\n        })\n      }\n      this.months = months\n      this.lineChart.categories = months.map(m => m.label)\n    },\n    async fetchWaylines() {\n      try {\n        const res = await alarmApi.getWaylines()\n        const list = this.normalizeList(res)\n        this.waylines = list\n        this.waylineNameMap = list.reduce((map, item) => {\n          const id = item.wayline_id || item.id\n          if (id !== undefined && id !== null) {\n            map[id] = item.name || `航线${id}`\n          }\n          return map\n        }, {})\n      } catch (err) {\n        console.warn('加载航线列表失败，使用空列表', err)\n        this.waylines = []\n        this.waylineNameMap = {}\n      }\n    },\n    normalizeList(res) {\n      if (!res) return []\n      if (Array.isArray(res)) return res\n      if (res.results) return res.results\n      if (res.data) return res.data\n      return []\n    },\n    resolveWaylineId(alarm) {\n      return (\n        alarm?.wayline_id ??\n        alarm?.wayline?.id ??\n        alarm?.wayline?.wayline_id ??\n        alarm?.wayline_details?.id ??\n        alarm?.wayline_details?.wayline_id ??\n        null\n      )\n    },\n    resolveWaylineName(alarm) {\n      const id = this.resolveWaylineId(alarm)\n      return (\n        alarm?.wayline?.name ||\n        alarm?.wayline_details?.name ||\n        this.waylineNameMap[id] ||\n        (id ? `航线${id}` : '未知航线')\n      )\n    },\n    async fetchAndAggregateAlarms() {\n      const res = await alarmApi.getAlarms({ page_size: 5000 })\n      const alarms = this.normalizeList(res)\n      const latest = this.getLatestCreatedAt(alarms)\n\n      // 用最新告警时间重建月份范围\n      const anchor = latest || this.latestAlarmDate || new Date()\n      this.initMonths(anchor)\n\n      // 过滤出窗口内的数据再聚合\n      const inWindowAlarms = alarms.filter(item => {\n        const dt = this.parsePlainDate(item.created_at)\n        return this.getMonthIndexForDate(dt) !== -1\n      })\n      this.windowAlarms = inWindowAlarms\n\n      this.buildStatsFromAlarms(inWindowAlarms)\n      this.buildSeries(inWindowAlarms)\n\n      if (latest) {\n        this.lastUpdated = this.formatDateTime(latest)\n      } else if (!this.lastUpdated && this.latestAlarmDate) {\n        this.lastUpdated = this.formatDateTime(this.latestAlarmDate)\n      }\n    },\n    async fetchLatestCreatedAt() {\n      try {\n        const res = await alarmApi.getAlarms({ page_size: 1, ordering: '-created_at' })\n        const list = this.normalizeList(res)\n        if (list.length && list[0].created_at) {\n          const ts = this.parsePlainDate(list[0].created_at)\n          this.latestAlarmDate = ts\n          this.lastUpdated = this.formatDateTime(ts)\n          return ts\n        }\n      } catch (err) {\n        console.warn('获取最新告警时间失败', err)\n      }\n      return null\n    },\n    buildStatsFromAlarms(alarms) {\n      this.stats.totalAlarms = alarms.length\n      const todayKey = this.formatDateParam(new Date())\n      this.stats.todayAlarms = alarms.filter(item => this.formatDateParam(this.parsePlainDate(item.created_at)) === todayKey).length\n      const lastAlarm = alarms.reduce((latest, alarm) => {\n        const ts = this.parsePlainDate(alarm.created_at)\n        if (!latest) return alarm\n        return ts > this.parsePlainDate(latest.created_at) ? alarm : latest\n      }, null)\n      if (lastAlarm) {\n        const diffDays = Math.floor((Date.now() - this.parsePlainDate(lastAlarm.created_at).getTime()) / (1000 * 60 * 60 * 24))\n        this.stats.safetyDays = Math.max(diffDays, 0)\n      } else {\n        this.stats.safetyDays = 0\n      }\n      this.safetyStatuses = [\n        { label: '今日异常', value: this.stats.todayAlarms, color: '#38bdf8' },\n        { label: '近月异常', value: alarms.filter(a => this.isInCurrentMonth(a.created_at)).length, color: '#a855f7' },\n        { label: '全年异常', value: this.stats.totalAlarms, color: '#22c55e' }\n      ]\n      this.metrics = [\n        { label: '发现异常总数', value: this.stats.totalAlarms, trend: 'up', delta: '' },\n        { label: '今日发现异常数', value: this.stats.todayAlarms, trend: this.stats.todayAlarms ? 'up' : 'flat', delta: this.stats.todayAlarms ? `+${this.stats.todayAlarms}` : '持平' },\n        { label: '巡检总里程', value: this.stats.totalMileage, trend: 'flat', delta: '' },\n        { label: '今日巡检里程', value: this.stats.todayMileage, trend: 'flat', delta: '' }\n      ]\n    },\n    isInCurrentMonth(dateLike) {\n      const dt = this.parsePlainDate(dateLike)\n      const now = new Date()\n      return dt.getFullYear() === now.getFullYear() && dt.getMonth() === now.getMonth()\n    },\n    buildSeries(alarms) {\n      const seriesMap = new Map()\n      alarms.forEach(alarm => {\n        const waylineId = this.resolveWaylineId(alarm)\n        if (waylineId === null || waylineId === undefined) return\n        const createdAt = this.parsePlainDate(alarm.created_at)\n        const monthIndex = this.getMonthIndexForDate(createdAt)\n        if (monthIndex === -1) return\n        if (!seriesMap.has(waylineId)) {\n          seriesMap.set(waylineId, {\n            id: waylineId,\n            name: this.resolveWaylineName(alarm),\n            data: Array(this.months.length).fill(0)\n          })\n        }\n        seriesMap.get(waylineId).data[monthIndex] += 1\n      })\n\n      const series = Array.from(seriesMap.values())\n      series.sort((a, b) => b.data.reduce((sum, n) => sum + n, 0) - a.data.reduce((sum, n) => sum + n, 0))\n      series.forEach((item, idx) => {\n        item.color = this.getSeriesColor(idx)\n      })\n      this.lineChart.series = series\n      this.lineChart.categories = this.months.map(m => m.label)\n\n      this.donutSeries = series.map(item => ({\n        name: item.name,\n        value: item.data.reduce((sum, n) => sum + n, 0),\n        color: item.color\n      }))\n    },\n    getSeriesColor(index) {\n      return this.seriesColors[index % this.seriesColors.length]\n    },\n    getDonutDash(value) {\n      const circumference = 2 * Math.PI * 44\n      const length = (value / (this.donutTotal || 1)) * circumference\n      return `${length} ${circumference}`\n    },\n    getDonutOffset(index) {\n      const circumference = 2 * Math.PI * 44\n      const previous = this.donutSeries.slice(0, index).reduce((sum, item) => sum + item.value, 0)\n      return -((previous / (this.donutTotal || 1)) * circumference)\n    },\n    getDonutPercent(value) {\n      if (!this.donutTotal) return 0\n      return Math.round((value / this.donutTotal) * 100)\n    },\n    getLinePoints(seriesData) {\n      const count = this.lineChart.categories.length || 1\n      const innerWidth = Math.max(this.chartSize.width - this.chartPaddingX * 2, 1)\n      const innerHeight = Math.max(this.chartSize.height - this.chartPaddingY * 2, 1)\n      const max = this.maxLineValue || 1\n      const step = count > 1 ? innerWidth / (count - 1) : innerWidth\n      return seriesData.map((value, idx) => {\n        const x =\n          count > 1\n            ? this.chartPaddingX + step * idx\n            : this.chartPaddingX + innerWidth / 2\n        const y = this.chartPaddingY + innerHeight - (value / max) * innerHeight\n        return { x, y }\n      })\n    },\n    getLinePath(seriesData) {\n      const points = this.getLinePoints(seriesData)\n      if (!points.length) return ''\n      const [first, ...rest] = points\n      const pathParts = rest.map(point => `L ${point.x} ${point.y}`)\n      return `M ${first.x} ${first.y} ${pathParts.join(' ')}`\n    },\n    getLatestCreatedAt(list) {\n      const latest = list.reduce((acc, item) => {\n        const ts = this.parsePlainDate(item.created_at)\n        if (Number.isNaN(ts.getTime())) return acc\n        if (!acc) return ts\n        return ts > acc ? ts : acc\n      }, null)\n      return latest\n    },\n    handlePointClick(serie, monthIndex, event) {\n      const month = this.months[monthIndex]\n      if (!month) return\n      const pointValue = serie.data?.[monthIndex] || 0\n      const candidates = this.lineChart.series.filter(item => {\n        const v = item.data?.[monthIndex] || 0\n        return v > 0 && v === pointValue\n      })\n      if (candidates.length <= 1 || !event) {\n        return this.openDetailFor(serie, monthIndex)\n      }\n      this.selectionMenu.visible = true\n      this.selectionMenu.options = candidates\n      this.selectionMenu.monthIndex = monthIndex\n      this.selectionMenu.x = event.clientX + 12\n      this.selectionMenu.y = event.clientY + 12 + window.scrollY\n    },\n    async openDetailFor(serie, monthIndex) {\n      const month = this.months[monthIndex]\n      if (!month) return\n      this.selectionMenu.visible = false\n      this.detailModal.visible = true\n      this.detailModal.loading = true\n      this.detailModal.alarms = []\n      this.detailModal.waylineId = serie.id\n      this.detailModal.waylineName = serie.name\n      this.detailModal.monthLabel = month.label\n      try {\n        // 先使用已加载的数据，避免接口筛选造成偏差\n        const filtered = this.windowAlarms.filter(alarm => {\n          const waylineId = this.resolveWaylineId(alarm)\n          const dt = this.parsePlainDate(alarm.created_at)\n          return waylineId === serie.id && this.getMonthIndexForDate(dt) === monthIndex\n        })\n        if (filtered.length) {\n          this.detailModal.alarms = filtered\n        } else {\n          const res = await alarmApi.getAlarms({\n            wayline_id: serie.id,\n            start_date: this.formatDateParam(month.start),\n            end_date: this.formatDateParam(month.end),\n            page_size: 500\n          })\n          this.detailModal.alarms = this.normalizeList(res)\n        }\n      } catch (err) {\n        console.error('加载单月告警失败', err)\n        this.detailModal.alarms = []\n      } finally {\n        this.detailModal.loading = false\n      }\n    },\n    selectSeriesOption(option) {\n      const monthIdx = this.selectionMenu.monthIndex\n      this.selectionMenu.visible = false\n      if (option) {\n        this.openDetailFor(option, monthIdx)\n      }\n    },\n    closeDetailModal() {\n      this.detailModal.visible = false\n    },\n    formatDateTime(dateLike) {\n      if (typeof dateLike === 'string') {\n        const dt = this.parsePlainDate(dateLike)\n        if (Number.isNaN(dt.getTime())) {\n          const raw = dateLike.trim().replace('T', ' ')\n          const noMs = raw.split('.')[0]\n          return noMs || raw\n        }\n        return this.formatDateTime(dt)\n      }\n      const dt = this.parsePlainDate(dateLike)\n      if (Number.isNaN(dt.getTime())) return '--'\n      const pad = num => String(num).padStart(2, '0')\n      return `${dt.getFullYear()}-${pad(dt.getMonth() + 1)}-${pad(dt.getDate())} ${pad(dt.getHours())}:${pad(dt.getMinutes())}`\n    },\n    formatDateParam(date) {\n      const dt = this.parsePlainDate(date)\n      const pad = num => String(num).padStart(2, '0')\n      return `${dt.getFullYear()}-${pad(dt.getMonth() + 1)}-${pad(dt.getDate())}`\n    },\n    getMonthIndexForDate(dt) {\n      const key = `${dt.getFullYear()}-${dt.getMonth()}`\n      return this.months.findIndex(m => m.key === key)\n    },\n    parsePlainDate(dateLike) {\n      if (typeof dateLike === 'string') {\n        const raw = dateLike.trim()\n        const cleaned = raw.replace(/([+-]\\d{2}:?\\d{2}|Z)$/i, '')\n        const match = cleaned.match(/^(\\d{4})-(\\d{2})-(\\d{2})[ T](\\d{2}):(\\d{2})(?::(\\d{2})(?:\\.(\\d+))?)?/)\n        if (match) {\n          const [, y, m, d, h, mi, s, ms = '0'] = match\n          const milli = Number(String(ms).padEnd(3, '0').slice(0, 3))\n          // 使用 UTC 构造避免本地时区偏移影响月末归属\n          const dt = new Date(Date.UTC(\n            Number(y),\n            Number(m) - 1,\n            Number(d),\n            Number(h),\n            Number(mi),\n            Number(s || 0),\n            milli\n          ))\n          return dt\n        }\n      }\n      const dt = new Date(dateLike)\n      return dt\n    }\n  }\n}\n</script>\n\n<style scoped>\n.alarm-stats-page {\n  max-width: 1640px;\n  margin: 0 auto;\n  padding: 24px 18px 48px;\n  color: #e2e8f0;\n  font-family: 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;\n}\n\n.page-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 24px;\n  margin-bottom: 24px;\n}\n\n.title-block {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.page-kicker {\n  color: #7dd3fc;\n  letter-spacing: 2px;\n  font-size: 13px;\n  text-transform: uppercase;\n}\n\n.page-title {\n  font-size: 32px;\n  font-weight: 800;\n  color: #e0f2fe;\n  letter-spacing: 1px;\n}\n\n.page-subtitle {\n  color: #94a3b8;\n  font-size: 14px;\n}\n\n.header-meta {\n  display: flex;\n  gap: 12px;\n  flex-wrap: wrap;\n}\n\n.meta-chip {\n  padding: 10px 14px;\n  background: rgba(51, 65, 85, 0.6);\n  border: 1px solid rgba(56, 189, 248, 0.35);\n  border-radius: 12px;\n  min-width: 160px;\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);\n}\n\n.meta-label {\n  display: block;\n  color: #94a3b8;\n  font-size: 12px;\n  margin-bottom: 4px;\n}\n\n.meta-value {\n  color: #e0f2fe;\n  font-weight: 700;\n}\n\n.top-grid {\n  display: grid;\n  grid-template-columns: 1.25fr 1.1fr 1fr;\n  gap: 16px;\n  margin-bottom: 16px;\n}\n\n.card {\n  position: relative;\n  background: linear-gradient(145deg, rgba(15, 23, 50, 0.95) 0%, rgba(15, 23, 42, 0.7) 100%);\n  border: 1px solid rgba(59, 130, 246, 0.25);\n  border-radius: 16px;\n  overflow: hidden;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35), 0 0 60px rgba(56, 189, 248, 0.12);\n  backdrop-filter: blur(6px);\n}\n\n.hero-card {\n  background: linear-gradient(135deg, rgba(12, 74, 110, 0.85), rgba(30, 64, 175, 0.85));\n  min-height: 220px;\n}\n\n.hero-overlay {\n  position: absolute;\n  inset: 0;\n  background:\n    radial-gradient(circle at 80% 20%, rgba(56, 189, 248, 0.35), transparent 45%),\n    radial-gradient(circle at 20% 80%, rgba(94, 234, 212, 0.25), transparent 40%);\n  filter: blur(10px);\n  opacity: 0.8;\n}\n\n.hero-content {\n  position: relative;\n  padding: 22px 24px;\n  display: flex;\n  flex-direction: column;\n  gap: 18px;\n  z-index: 1;\n}\n\n.hero-header {\n  display: flex;\n  align-items: flex-start;\n  justify-content: space-between;\n}\n\n.hero-label {\n  color: #cbd5e1;\n  font-size: 14px;\n  letter-spacing: 1px;\n}\n\n.hero-number {\n  font-size: 48px;\n  font-weight: 800;\n  color: #e0f2fe;\n  text-shadow: 0 0 16px rgba(14, 165, 233, 0.7);\n}\n\n.hero-unit {\n  font-size: 16px;\n  color: #bae6fd;\n  margin-left: 6px;\n}\n\n.hero-tag {\n  padding: 8px 12px;\n  background: rgba(59, 130, 246, 0.2);\n  border: 1px solid rgba(59, 130, 246, 0.4);\n  border-radius: 999px;\n  color: #e0f2fe;\n  font-size: 12px;\n}\n\n.hero-summary {\n  display: flex;\n  gap: 12px;\n  flex-wrap: wrap;\n}\n\n.summary-chip {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 10px 12px;\n  background: rgba(15, 23, 42, 0.35);\n  border: 1px solid rgba(255, 255, 255, 0.08);\n  border-radius: 12px;\n  color: #cbd5e1;\n}\n\n.chip-dot {\n  width: 10px;\n  height: 10px;\n  border-radius: 999px;\n}\n\n.chip-label {\n  font-size: 13px;\n}\n\n.chip-value {\n  font-size: 16px;\n  font-weight: 700;\n  color: #e2e8f0;\n}\n\n.card-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 16px 18px 8px;\n}\n\n.card-title {\n  font-size: 18px;\n  font-weight: 700;\n  color: #e0f2fe;\n}\n\n.card-subtitle {\n  color: #94a3b8;\n  font-size: 13px;\n}\n\n.metrics-card {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.metrics-grid {\n  display: grid;\n  grid-template-columns: repeat(2, minmax(0, 1fr));\n  gap: 12px;\n  padding: 0 16px 16px;\n}\n\n.metric-item {\n  background: rgba(15, 23, 42, 0.4);\n  border: 1px solid rgba(255, 255, 255, 0.06);\n  border-radius: 12px;\n  padding: 14px;\n  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.04);\n}\n\n.metric-label {\n  color: #94a3b8;\n  font-size: 13px;\n  margin-bottom: 6px;\n  letter-spacing: 0.3px;\n}\n\n.metric-value {\n  font-size: 20px;\n  font-weight: 700;\n  color: #e0f2fe;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.metric-trend {\n  font-size: 12px;\n  padding: 4px 8px;\n  border-radius: 999px;\n  background: rgba(59, 130, 246, 0.15);\n  border: 1px solid rgba(59, 130, 246, 0.35);\n}\n\n.metric-trend.up {\n  color: #22d3ee;\n}\n\n.metric-trend.down {\n  color: #f97316;\n}\n\n.metric-trend.flat {\n  color: #cbd5e1;\n}\n\n.donut-card {\n  display: flex;\n  flex-direction: column;\n}\n\n.donut-content {\n  display: flex;\n  gap: 12px;\n  padding: 4px 14px 16px;\n  align-items: center;\n}\n\n.donut-chart {\n  width: 180px;\n  height: 180px;\n  flex-shrink: 0;\n}\n\n.donut-track {\n  opacity: 0.7;\n}\n\n.donut-segment {\n  transition: opacity 0.2s ease;\n}\n\n.donut-card:hover .donut-segment {\n  opacity: 0.85;\n}\n\n.donut-label {\n  fill: #94a3b8;\n  font-size: 12px;\n  letter-spacing: 1px;\n}\n\n.donut-value {\n  fill: #e0f2fe;\n  font-size: 22px;\n  font-weight: 800;\n}\n\n.donut-legend {\n  display: grid;\n  grid-template-columns: repeat(2, minmax(0, 1fr));\n  gap: 8px 16px;\n  width: 100%;\n}\n\n.legend-item {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  background: rgba(15, 23, 42, 0.35);\n  border: 1px solid rgba(255, 255, 255, 0.06);\n  border-radius: 12px;\n  padding: 10px 12px;\n}\n\n.legend-dot {\n  width: 10px;\n  height: 10px;\n  border-radius: 999px;\n}\n\n.legend-text {\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n  color: #cbd5e1;\n  font-size: 13px;\n}\n\n.legend-name {\n  font-weight: 600;\n}\n\n.legend-value {\n  color: #e0f2fe;\n  font-weight: 700;\n}\n\n.chart-card {\n  margin-top: 12px;\n  padding-bottom: 12px;\n}\n\n.series-legend {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n}\n\n.series-chip {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 10px;\n  background: rgba(15, 23, 42, 0.45);\n  border: 1px solid rgba(255, 255, 255, 0.08);\n  border-radius: 10px;\n  color: #cbd5e1;\n  font-size: 12px;\n}\n\n.line-chart-wrapper {\n  padding: 6px 14px 16px;\n}\n\n.line-chart {\n  width: 100%;\n  height: auto;\n}\n\n.grid-lines line {\n  stroke-dasharray: 4 4;\n}\n\n.x-axis {\n  display: flex;\n  justify-content: space-between;\n  color: #94a3b8;\n  font-size: 12px;\n  margin-top: 6px;\n}\n\n.x-axis span {\n  text-align: center;\n}\n\n.loading-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 12px;\n  padding: 24px;\n  color: #cbd5e1;\n}\n\n.loading-spinner {\n  width: 28px;\n  height: 28px;\n  border: 3px solid rgba(56, 189, 248, 0.3);\n  border-top-color: #38bdf8;\n  border-radius: 999px;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n.error-state {\n  margin-bottom: 16px;\n  padding: 12px 16px;\n  border-radius: 12px;\n  background: rgba(248, 113, 113, 0.1);\n  border: 1px solid rgba(248, 113, 113, 0.4);\n  color: #fecaca;\n}\n\n.empty-state {\n  padding: 18px;\n  text-align: center;\n  color: #94a3b8;\n}\n\n.chart-point {\n  cursor: pointer;\n  transition: r 0.15s ease, opacity 0.15s ease;\n}\n\n.chart-point:hover {\n  r: 7;\n  opacity: 0.95;\n}\n\n.selection-pop {\n  position: absolute;\n  z-index: 1500;\n  min-width: 220px;\n  background: rgba(15, 23, 42, 0.95);\n  border: 1px solid rgba(59, 130, 246, 0.3);\n  border-radius: 12px;\n  box-shadow: 0 16px 40px rgba(0, 0, 0, 0.35);\n  overflow: hidden;\n}\n\n.selection-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 10px 12px;\n  color: #e0f2fe;\n  font-size: 13px;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.06);\n}\n\n.selection-header .close-btn {\n  background: transparent;\n  border: none;\n  color: #cbd5e1;\n  font-size: 18px;\n  cursor: pointer;\n}\n\n.selection-options {\n  display: flex;\n  flex-direction: column;\n  max-height: 260px;\n  overflow: auto;\n}\n\n.selection-item {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 10px 12px;\n  background: transparent;\n  border: none;\n  color: #e2e8f0;\n  cursor: pointer;\n  text-align: left;\n}\n\n.selection-item:hover {\n  background: rgba(59, 130, 246, 0.08);\n}\n\n.selection-item .option-name {\n  flex: 1;\n  font-weight: 600;\n}\n\n.selection-item .option-value {\n  color: #94a3b8;\n  font-size: 12px;\n}\n.modal-overlay {\n  position: fixed;\n  inset: 0;\n  background: rgba(0, 0, 0, 0.55);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1200;\n}\n\n.modal-premium {\n  background: rgba(15, 23, 42, 0.95);\n  border: 1px solid rgba(59, 130, 246, 0.3);\n  border-radius: 16px;\n  width: min(1080px, 90vw);\n  max-height: 80vh;\n  overflow: hidden;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);\n}\n\n.detail-modal {\n  display: flex;\n  flex-direction: column;\n}\n\n.modal-header {\n  padding: 16px 18px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.06);\n}\n\n.modal-title {\n  color: #e0f2fe;\n  font-size: 18px;\n  font-weight: 700;\n}\n\n.modal-close {\n  background: transparent;\n  border: none;\n  color: #cbd5e1;\n  font-size: 22px;\n  cursor: pointer;\n}\n\n.modal-body {\n  padding: 16px 18px;\n  overflow: auto;\n}\n\n.modal-footer {\n  padding: 12px 18px 16px;\n  border-top: 1px solid rgba(255, 255, 255, 0.06);\n  display: flex;\n  justify-content: flex-end;\n  gap: 10px;\n}\n\n.modal-btn {\n  padding: 10px 16px;\n  border-radius: 10px;\n  border: 1px solid rgba(59, 130, 246, 0.4);\n  background: rgba(59, 130, 246, 0.2);\n  color: #e0f2fe;\n  cursor: pointer;\n}\n\n.secondary-btn {\n  background: rgba(148, 163, 184, 0.15);\n  border-color: rgba(148, 163, 184, 0.4);\n}\n\n.detail-list {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.detail-row {\n  display: flex;\n  justify-content: space-between;\n  gap: 10px;\n  padding: 12px 14px;\n  border: 1px solid rgba(255, 255, 255, 0.08);\n  border-radius: 12px;\n  background: rgba(15, 23, 42, 0.4);\n}\n\n.detail-title {\n  font-weight: 700;\n  color: #e2e8f0;\n  margin-bottom: 6px;\n}\n\n.detail-meta {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n  color: #94a3b8;\n  font-size: 12px;\n}\n\n.detail-badges {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n  align-items: flex-end;\n}\n\n.status-pill {\n  padding: 6px 10px;\n  background: rgba(59, 130, 246, 0.15);\n  border: 1px solid rgba(59, 130, 246, 0.25);\n  border-radius: 10px;\n  color: #cbd5e1;\n  font-size: 12px;\n}\n\n@media (max-width: 1280px) {\n  .top-grid {\n    grid-template-columns: 1fr;\n  }\n\n  .donut-content {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n\n  .donut-legend {\n    grid-template-columns: repeat(3, minmax(0, 1fr));\n  }\n}\n\n@media (max-width: 960px) {\n  .page-header {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n\n  .donut-legend {\n    grid-template-columns: repeat(2, minmax(0, 1fr));\n  }\n}\n\n@media (max-width: 640px) {\n  .alarm-stats-page {\n    padding: 16px 12px 32px;\n  }\n\n  .metrics-grid {\n    grid-template-columns: 1fr;\n  }\n\n  .donut-legend {\n    grid-template-columns: 1fr;\n  }\n\n  .detail-row {\n    flex-direction: column;\n  }\n\n  .detail-badges {\n    flex-direction: row;\n  }\n}\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}