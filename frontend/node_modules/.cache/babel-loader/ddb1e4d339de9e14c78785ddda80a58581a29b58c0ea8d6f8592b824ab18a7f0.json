{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"login-container\"\n};\nconst _hoisted_2 = {\n  class: \"login-form-wrapper\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[3] || (_cache[3] = _createElementVNode(\"div\", {\n    class: \"login-title\"\n  }, [_createElementVNode(\"h2\", null, \"无人机巡检数字孪生系统\"), _createElementVNode(\"p\", null, \"请输入账号密码登录\")], -1 /* CACHED */)), _createVNode(_component_el_form, {\n    model: $data.loginForm,\n    rules: $data.rules,\n    ref: \"loginFormRef\",\n    class: \"login-form\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_form_item, {\n      prop: \"username\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $data.loginForm.username,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.loginForm.username = $event),\n        placeholder: \"请输入用户名\",\n        \"prefix-icon\": \"el-icon-user\"\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      prop: \"password\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $data.loginForm.password,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.loginForm.password = $event),\n        type: \"password\",\n        placeholder: \"请输入密码\",\n        \"prefix-icon\": \"el-icon-lock\",\n        \"show-password\": \"\"\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, null, {\n      default: _withCtx(() => [_createVNode(_component_el_button, {\n        type: \"primary\",\n        loading: $data.isLoading,\n        onClick: $options.handleLogin,\n        class: \"login-button\",\n        disabled: $data.isLoading\n      }, {\n        default: _withCtx(() => [...(_cache[2] || (_cache[2] = [_createTextVNode(\" 登录 \", -1 /* CACHED */)]))]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"loading\", \"onClick\", \"disabled\"])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"model\", \"rules\"])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_el_form","model","$data","loginForm","rules","ref","_component_el_form_item","prop","_component_el_input","username","$event","placeholder","password","type","_component_el_button","loading","isLoading","onClick","$options","handleLogin","disabled","_cache"],"sources":["D:\\projects\\FlightHub-2-Frontend-Standalone-Component\\frontend\\src\\views\\Login.vue"],"sourcesContent":["<template>\n  <div class=\"login-container\">\n    <div class=\"login-form-wrapper\">\n      <div class=\"login-title\">\n        <h2>无人机巡检数字孪生系统</h2>\n        <p>请输入账号密码登录</p>\n      </div>\n      <el-form :model=\"loginForm\" :rules=\"rules\" ref=\"loginFormRef\" class=\"login-form\">\n        <el-form-item prop=\"username\">\n          <el-input \n            v-model=\"loginForm.username\" \n            placeholder=\"请输入用户名\" \n            prefix-icon=\"el-icon-user\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item prop=\"password\">\n          <el-input \n            v-model=\"loginForm.password\" \n            type=\"password\" \n            placeholder=\"请输入密码\" \n            prefix-icon=\"el-icon-lock\"\n            show-password\n          ></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button \n            type=\"primary\" \n            :loading=\"isLoading\"\n            @click=\"handleLogin\" \n            class=\"login-button\"\n            :disabled=\"isLoading\"\n          >\n            登录\n          </el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Login',\n  data() {\n    return {\n      loginForm: {\n        username: '',\n        password: ''\n      },\n      isLoading: false,\n      rules: {\n        username: [\n          { required: true, message: '请输入用户名', trigger: 'blur' }\n        ],\n        password: [\n          { required: true, message: '请输入密码', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  methods: {\n    handleLogin() {\n      this.$refs.loginFormRef.validate(async (valid) => {\n        if (valid) {\n          this.isLoading = true\n          try {\n          // 调用登录action\n          const { user } = await this.$store.dispatch('login', this.loginForm)\n          // 保存用户信息到localStorage，供路由守卫使用\n          localStorage.setItem('userInfo', JSON.stringify(user))\n          // 登录成功后跳转到首页或之前尝试访问的页面\n          const redirect = this.$route.query.redirect || '/'\n          this.$router.push(redirect)\n          } catch (error) {\n            this.$message.error(error.message || '登录失败，请重试')\n          } finally {\n            this.isLoading = false\n          }\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.login-container {\n  min-height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: linear-gradient(135deg, #0c4a6e 0%, #0369a1 100%);\n  padding: 20px;\n}\n\n.login-form-wrapper {\n  width: 100%;\n  max-width: 400px;\n  background: rgba(15, 23, 42, 0.95);\n  backdrop-filter: blur(10px);\n  border-radius: 16px;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\n  padding: 40px;\n  border: 1px solid rgba(14, 165, 233, 0.2);\n}\n\n.login-title {\n  text-align: center;\n  margin-bottom: 30px;\n}\n\n.login-title h2 {\n  color: #e0f2fe;\n  margin-bottom: 10px;\n  font-size: 24px;\n  font-weight: 600;\n}\n\n.login-title p {\n  color: #7dd3fc;\n  font-size: 14px;\n}\n\n.login-form {\n  width: 100%;\n}\n\n.login-form .el-form-item {\n  margin-bottom: 24px;\n}\n\n.login-form .el-input__wrapper {\n  background-color: rgba(12, 74, 110, 0.5);\n  border-color: #0ea5e9;\n}\n\n.login-form .el-input__wrapper:hover {\n  border-color: #7dd3fc;\n  box-shadow: 0 0 0 1px rgba(125, 211, 252, 0.2);\n}\n\n.login-form .el-input__wrapper.is-focus {\n  border-color: #7dd3fc;\n  box-shadow: 0 0 0 1px rgba(125, 211, 252, 0.2);\n}\n\n.login-form .el-input__inner {\n  color: #e0f2fe;\n  background-color: transparent;\n}\n\n.login-form .el-input__prefix-inner .el-icon {\n  color: #7dd3fc;\n}\n\n.login-button {\n  width: 100%;\n  height: 44px;\n  font-size: 16px;\n  background: linear-gradient(90deg, #0ea5e9 0%, #0891b2 100%);\n  border: none;\n  transition: all 0.3s ease;\n}\n\n.login-button:hover {\n  background: linear-gradient(90deg, #0ea5e9 0%, #0284c7 100%);\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(14, 165, 233, 0.3);\n}\n\n.login-button.is-loading {\n  background: linear-gradient(90deg, #0ea5e9 0%, #0891b2 100%);\n  opacity: 0.8;\n}\n</style>"],"mappings":";;EACOA,KAAK,EAAC;AAAiB;;EACrBA,KAAK,EAAC;AAAoB;;;;;;uBADjCC,mBAAA,CAoCM,OApCNC,UAoCM,GAnCJC,mBAAA,CAkCM,OAlCNC,UAkCM,G,0BAjCJD,mBAAA,CAGM;IAHDH,KAAK,EAAC;EAAa,IACtBG,mBAAA,CAAoB,YAAhB,aAAW,GACfA,mBAAA,CAAgB,WAAb,WAAS,E,qBAEdE,YAAA,CA4BUC,kBAAA;IA5BAC,KAAK,EAAEC,KAAA,CAAAC,SAAS;IAAGC,KAAK,EAAEF,KAAA,CAAAE,KAAK;IAAEC,GAAG,EAAC,cAAc;IAACX,KAAK,EAAC;;sBAClE,MAMe,CANfK,YAAA,CAMeO,uBAAA;MANDC,IAAI,EAAC;IAAU;wBAC3B,MAIY,CAJZR,YAAA,CAIYS,mBAAA;oBAHDN,KAAA,CAAAC,SAAS,CAACM,QAAQ;mEAAlBP,KAAA,CAAAC,SAAS,CAACM,QAAQ,GAAAC,MAAA;QAC3BC,WAAW,EAAC,QAAQ;QACpB,aAAW,EAAC;;;QAGhBZ,YAAA,CAQeO,uBAAA;MARDC,IAAI,EAAC;IAAU;wBAC3B,MAMY,CANZR,YAAA,CAMYS,mBAAA;oBALDN,KAAA,CAAAC,SAAS,CAACS,QAAQ;mEAAlBV,KAAA,CAAAC,SAAS,CAACS,QAAQ,GAAAF,MAAA;QAC3BG,IAAI,EAAC,UAAU;QACfF,WAAW,EAAC,OAAO;QACnB,aAAW,EAAC,cAAc;QAC1B,eAAa,EAAb;;;QAGJZ,YAAA,CAUeO,uBAAA;wBATb,MAQY,CARZP,YAAA,CAQYe,oBAAA;QAPVD,IAAI,EAAC,SAAS;QACbE,OAAO,EAAEb,KAAA,CAAAc,SAAS;QAClBC,OAAK,EAAEC,QAAA,CAAAC,WAAW;QACnBzB,KAAK,EAAC,cAAc;QACnB0B,QAAQ,EAAElB,KAAA,CAAAc;;0BACZ,MAED,KAAAK,MAAA,QAAAA,MAAA,O,iBAFC,MAED,mB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}