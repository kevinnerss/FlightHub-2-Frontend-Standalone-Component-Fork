{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nexport default {\n  name: 'ApiTestPage',\n  data() {\n    return {\n      baseConfig: {\n        baseUrl: 'https://es-flight-api-cn.djigate.com',\n        userToken: '',\n        projectUuid: ''\n      },\n      apis: [{\n        name: '获取项目下的航线列表',\n        path: '/openapi/v0.1/wayline',\n        method: 'GET',\n        description: '获取项目下所有航线列表信息',\n        status: 'idle',\n        // idle, loading, success, error\n        response: null,\n        error: null,\n        params: []\n      }, {\n        name: '获取航线详情',\n        path: '/openapi/v0.1/wayline/{wayline_id}',\n        method: 'GET',\n        description: '拉取航线详情，获取下载链接等信息',\n        status: 'idle',\n        response: null,\n        error: null,\n        params: [{\n          name: 'wayline_id',\n          in: 'path',\n          example: '9685c7fe-a231-4612-9ced-1d2921db04ad',\n          value: ''\n        }]\n      }, {\n        name: '获取项目下的模型列表',\n        path: '/openapi/v0.1/model',\n        method: 'GET',\n        description: '获取项目下的模型列表',\n        status: 'idle',\n        response: null,\n        error: null,\n        params: []\n      }]\n    };\n  },\n  methods: {\n    getStatusText(status) {\n      const statusMap = {\n        idle: '等待测试',\n        loading: '测试中...',\n        success: '测试成功',\n        error: '测试失败'\n      };\n      return statusMap[status] || '未知状态';\n    },\n    formatResponse(response) {\n      try {\n        return JSON.stringify(response, null, 2);\n      } catch (e) {\n        return response;\n      }\n    },\n    async testApi(api) {\n      // 设置为加载中状态\n      api.status = 'loading';\n      api.response = null;\n      api.error = null;\n      try {\n        // 构建请求头\n        const headers = {\n          'X-User-Token': this.baseConfig.userToken,\n          'X-Project-Uuid': this.baseConfig.projectUuid,\n          'X-Request-Id': this.generateUUID(),\n          'X-Language': 'zh',\n          'Content-Type': 'application/json'\n        };\n\n        // 构建请求URL\n        let url = `${this.baseConfig.baseUrl}${api.path}`;\n\n        // 替换路径参数\n        if (api.params && api.params.length > 0) {\n          api.params.forEach(param => {\n            if (param.in === 'path' && param.value) {\n              url = url.replace(`{${param.name}}`, param.value);\n            }\n          });\n        }\n\n        // 发送请求\n        const response = await fetch(url, {\n          method: api.method,\n          headers: headers\n        });\n\n        // 检查响应状态\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n        // 解析响应数据\n        const data = await response.json();\n\n        // 更新状态\n        api.status = 'success';\n        api.response = data;\n      } catch (error) {\n        // 更新错误状态\n        api.status = 'error';\n        api.error = error.message;\n      }\n    },\n    generateUUID() {\n      return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        const r = Math.random() * 16 | 0;\n        const v = c === 'x' ? r : r & 0x3 | 0x8;\n        return v.toString(16);\n      });\n    }\n  },\n  mounted() {\n    // 尝试从localStorage恢复配置\n    const savedConfig = localStorage.getItem('apiTestConfig');\n    if (savedConfig) {\n      try {\n        this.baseConfig = {\n          ...this.baseConfig,\n          ...JSON.parse(savedConfig)\n        };\n      } catch (e) {\n        console.error('Failed to load saved config:', e);\n      }\n    }\n  },\n  watch: {\n    baseConfig: {\n      deep: true,\n      handler(newConfig) {\n        // 保存配置到localStorage\n        localStorage.setItem('apiTestConfig', JSON.stringify(newConfig));\n      }\n    }\n  }\n};","map":{"version":3,"names":["name","data","baseConfig","baseUrl","userToken","projectUuid","apis","path","method","description","status","response","error","params","in","example","value","methods","getStatusText","statusMap","idle","loading","success","formatResponse","JSON","stringify","e","testApi","api","headers","generateUUID","url","length","forEach","param","replace","fetch","ok","Error","json","message","c","r","Math","random","v","toString","mounted","savedConfig","localStorage","getItem","parse","console","watch","deep","handler","newConfig","setItem"],"sources":["D:\\projects\\FlightHub-2-Frontend-Standalone-Component\\frontend\\src\\views\\ApiTestPage.vue"],"sourcesContent":["<template>\n  <div class=\"api-test-container\">\n    <h1 class=\"text-2xl font-bold mb-6\">API 测试工具</h1>\n    \n    <!-- 全局配置部分 -->\n    <div class=\"config-section bg-white p-4 rounded-lg shadow-md mb-6\">\n      <h2 class=\"text-xl font-semibold mb-4\">全局配置</h2>\n      <div class=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <div class=\"form-group\">\n          <label class=\"block text-sm font-medium text-gray-700 mb-1\">API 基础地址</label>\n          <input \n            v-model=\"baseConfig.baseUrl\" \n            type=\"text\" \n            class=\"w-full px-3 py-2 border border-gray-300 rounded-md\" \n            placeholder=\"例如: https://es-flight-api-cn.djigate.com\"\n          />\n        </div>\n        <div class=\"form-group\">\n          <label class=\"block text-sm font-medium text-gray-700 mb-1\">X-User-Token</label>\n          <input \n            v-model=\"baseConfig.userToken\" \n            type=\"text\" \n            class=\"w-full px-3 py-2 border border-gray-300 rounded-md\" \n            placeholder=\"输入用户令牌\"\n          />\n        </div>\n        <div class=\"form-group\">\n          <label class=\"block text-sm font-medium text-gray-700 mb-1\">X-Project-Uuid</label>\n          <input \n            v-model=\"baseConfig.projectUuid\" \n            type=\"text\" \n            class=\"w-full px-3 py-2 border border-gray-300 rounded-md\" \n            placeholder=\"输入项目UUID\"\n          />\n        </div>\n      </div>\n    </div>\n\n    <!-- API列表部分 -->\n    <div class=\"api-list\">\n      <div \n        v-for=\"(api, index) in apis\" \n        :key=\"index\" \n        class=\"api-item bg-white p-4 rounded-lg shadow-md mb-4\"\n      >\n        <div class=\"api-header flex justify-between items-center mb-3\">\n          <h3 class=\"text-lg font-medium\">{{ api.name }}</h3>\n          <span class=\"api-method bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs\">{{ api.method }}</span>\n        </div>\n        <p class=\"api-description text-sm text-gray-600 mb-3\">{{ api.description }}</p>\n        \n        <!-- 接口参数输入 -->\n        <div v-if=\"api.params && api.params.length > 0\" class=\"params-section mb-3\">\n          <h4 class=\"text-sm font-medium text-gray-700 mb-2\">接口参数</h4>\n          <div class=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n            <div \n              v-for=\"(param, paramIndex) in api.params\" \n              :key=\"paramIndex\" \n              class=\"param-item\"\n            >\n              <label class=\"block text-xs text-gray-500 mb-1\">{{ param.name }} ({{ param.in }})</label>\n              <input \n                v-model=\"param.value\" \n                type=\"text\" \n                class=\"w-full px-3 py-1 text-sm border border-gray-300 rounded-md\" \n                :placeholder=\"param.example || '输入参数值'\"\n              />\n            </div>\n          </div>\n        </div>\n        \n        <div class=\"flex justify-between items-center\">\n          <button \n            @click=\"testApi(api)\" \n            class=\"test-button bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition-colors\"\n          >\n            测试接口\n          </button>\n          <div :class=\"['status-indicator', `status-${api.status}`]\">\n            {{ getStatusText(api.status) }}\n          </div>\n        </div>\n        \n        <!-- 响应结果展示 -->\n        <div v-if=\"api.response\" class=\"response-section mt-4\">\n          <h4 class=\"text-sm font-medium text-gray-700 mb-2\">响应结果</h4>\n          <div class=\"response-content bg-gray-50 p-3 rounded-md overflow-x-auto\">\n            <pre class=\"text-xs whitespace-pre-wrap\">{{ formatResponse(api.response) }}</pre>\n          </div>\n        </div>\n        \n        <!-- 错误信息展示 -->\n        <div v-if=\"api.error\" class=\"error-section mt-4\">\n          <h4 class=\"text-sm font-medium text-red-700 mb-2\">错误信息</h4>\n          <div class=\"error-content bg-red-50 p-3 rounded-md text-red-700\">\n            <pre class=\"text-xs whitespace-pre-wrap\">{{ api.error }}</pre>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ApiTestPage',\n  data() {\n    return {\n      baseConfig: {\n        baseUrl: 'https://es-flight-api-cn.djigate.com',\n        userToken: '',\n        projectUuid: ''\n      },\n      apis: [\n        {\n          name: '获取项目下的航线列表',\n          path: '/openapi/v0.1/wayline',\n          method: 'GET',\n          description: '获取项目下所有航线列表信息',\n          status: 'idle', // idle, loading, success, error\n          response: null,\n          error: null,\n          params: []\n        },\n        {\n          name: '获取航线详情',\n          path: '/openapi/v0.1/wayline/{wayline_id}',\n          method: 'GET',\n          description: '拉取航线详情，获取下载链接等信息',\n          status: 'idle',\n          response: null,\n          error: null,\n          params: [\n            {\n              name: 'wayline_id',\n              in: 'path',\n              example: '9685c7fe-a231-4612-9ced-1d2921db04ad',\n              value: ''\n            }\n          ]\n        },\n        {\n          name: '获取项目下的模型列表',\n          path: '/openapi/v0.1/model',\n          method: 'GET',\n          description: '获取项目下的模型列表',\n          status: 'idle',\n          response: null,\n          error: null,\n          params: []\n        }\n      ]\n    }\n  },\n  methods: {\n    getStatusText(status) {\n      const statusMap = {\n        idle: '等待测试',\n        loading: '测试中...',\n        success: '测试成功',\n        error: '测试失败'\n      }\n      return statusMap[status] || '未知状态'\n    },\n    formatResponse(response) {\n      try {\n        return JSON.stringify(response, null, 2)\n      } catch (e) {\n        return response\n      }\n    },\n    async testApi(api) {\n      // 设置为加载中状态\n      api.status = 'loading'\n      api.response = null\n      api.error = null\n      \n      try {\n        // 构建请求头\n        const headers = {\n          'X-User-Token': this.baseConfig.userToken,\n          'X-Project-Uuid': this.baseConfig.projectUuid,\n          'X-Request-Id': this.generateUUID(),\n          'X-Language': 'zh',\n          'Content-Type': 'application/json'\n        }\n        \n        // 构建请求URL\n        let url = `${this.baseConfig.baseUrl}${api.path}`\n        \n        // 替换路径参数\n        if (api.params && api.params.length > 0) {\n          api.params.forEach(param => {\n            if (param.in === 'path' && param.value) {\n              url = url.replace(`{${param.name}}`, param.value)\n            }\n          })\n        }\n        \n        // 发送请求\n        const response = await fetch(url, {\n          method: api.method,\n          headers: headers\n        })\n        \n        // 检查响应状态\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`)\n        }\n        \n        // 解析响应数据\n        const data = await response.json()\n        \n        // 更新状态\n        api.status = 'success'\n        api.response = data\n      } catch (error) {\n        // 更新错误状态\n        api.status = 'error'\n        api.error = error.message\n      }\n    },\n    generateUUID() {\n      return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n        const r = Math.random() * 16 | 0\n        const v = c === 'x' ? r : (r & 0x3 | 0x8)\n        return v.toString(16)\n      })\n    }\n  },\n  mounted() {\n    // 尝试从localStorage恢复配置\n    const savedConfig = localStorage.getItem('apiTestConfig')\n    if (savedConfig) {\n      try {\n        this.baseConfig = { ...this.baseConfig, ...JSON.parse(savedConfig) }\n      } catch (e) {\n        console.error('Failed to load saved config:', e)\n      }\n    }\n  },\n  watch: {\n    baseConfig: {\n      deep: true,\n      handler(newConfig) {\n        // 保存配置到localStorage\n        localStorage.setItem('apiTestConfig', JSON.stringify(newConfig))\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.api-test-container {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 20px;\n}\n\n.status-indicator {\n  padding: 2px 8px;\n  border-radius: 12px;\n  font-size: 12px;\n  font-weight: 500;\n}\n\n.status-idle {\n  background-color: #f3f4f6;\n  color: #6b7280;\n}\n\n.status-loading {\n  background-color: #dbeafe;\n  color: #1e40af;\n}\n\n.status-success {\n  background-color: #dcfce7;\n  color: #166534;\n}\n\n.status-error {\n  background-color: #fee2e2;\n  color: #991b1b;\n}\n\n.response-content,\n.error-content {\n  max-height: 300px;\n  overflow-y: auto;\n}\n\n/* 响应式调整 */\n@media (max-width: 768px) {\n  .config-section .grid-cols-1.md\\:grid-cols-3 {\n    grid-template-columns: 1fr;\n  }\n  \n  .params-section .grid-cols-1.md\\:grid-cols-2 {\n    grid-template-columns: 1fr;\n  }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}