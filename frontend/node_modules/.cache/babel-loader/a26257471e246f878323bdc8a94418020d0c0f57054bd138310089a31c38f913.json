{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport defined from \"../Core/defined.js\";\nimport DeveloperError from \"../Core/DeveloperError.js\";\nimport Rectangle from \"../Core/Rectangle.js\";\nimport QuadtreeTileLoadState from \"./QuadtreeTileLoadState.js\";\nimport TileSelectionResult from \"./TileSelectionResult.js\";\n\n/**\n * A simple Least Recently Used (LRU) cache implementation.\n */\nclass LRUCache {\n  constructor(maxSize) {\n    this.maxSize = maxSize;\n    this.cache = new Map();\n  }\n  get(key) {\n    if (!this.cache.has(key)) {\n      return undefined;\n    }\n    // Move accessed item to the end (most recently used)\n    const value = this.cache.get(key);\n    this.cache.delete(key);\n    this.cache.set(key, value);\n    return value;\n  }\n  set(key, value) {\n    if (this.cache.has(key)) {\n      this.cache.delete(key);\n    } else if (this.cache.size >= this.maxSize) {\n      // Remove the least recently used (first entry)\n      const firstKey = this.cache.keys().next().value;\n      this.cache.delete(firstKey);\n    }\n    this.cache.set(key, value);\n  }\n  clear() {\n    this.cache.clear();\n  }\n}\n\n// Maximum cache entries per tile\nconst MAX_CACHE_ENTRIES = 1000;\n\n/**\n * A single tile in a {@link QuadtreePrimitive}.\n *\n * @alias QuadtreeTile\n * @constructor\n * @private\n *\n * @param {number} options.level The level of the tile in the quadtree.\n * @param {number} options.x The X coordinate of the tile in the quadtree.  0 is the westernmost tile.\n * @param {number} options.y The Y coordinate of the tile in the quadtree.  0 is the northernmost tile.\n * @param {TilingScheme} options.tilingScheme The tiling scheme in which this tile exists.\n * @param {QuadtreeTile} [options.parent] This tile's parent, or undefined if this is a root tile.\n */\nfunction QuadtreeTile(options) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(options)) {\n    throw new DeveloperError(\"options is required.\");\n  }\n  if (!defined(options.x)) {\n    throw new DeveloperError(\"options.x is required.\");\n  } else if (!defined(options.y)) {\n    throw new DeveloperError(\"options.y is required.\");\n  } else if (options.x < 0 || options.y < 0) {\n    throw new DeveloperError(\"options.x and options.y must be greater than or equal to zero.\");\n  }\n  if (!defined(options.level)) {\n    throw new DeveloperError(\"options.level is required and must be greater than or equal to zero.\");\n  }\n  if (!defined(options.tilingScheme)) {\n    throw new DeveloperError(\"options.tilingScheme is required.\");\n  }\n  //>>includeEnd('debug');\n\n  this._tilingScheme = options.tilingScheme;\n  this._x = options.x;\n  this._y = options.y;\n  this._level = options.level;\n  this._parent = options.parent;\n  this._rectangle = this._tilingScheme.tileXYToRectangle(this._x, this._y, this._level);\n  this._southwestChild = undefined;\n  this._southeastChild = undefined;\n  this._northwestChild = undefined;\n  this._northeastChild = undefined;\n\n  // TileReplacementQueue gets/sets these private properties.\n  this.replacementPrevious = undefined;\n  this.replacementNext = undefined;\n\n  // The distance from the camera to this tile, updated when the tile is selected\n  // for rendering.  We can get rid of this if we have a better way to sort by\n  // distance - for example, by using the natural ordering of a quadtree.\n  // QuadtreePrimitive gets/sets this private property.\n  this._distance = 0.0;\n  this._loadPriority = 0.0;\n  this._customData = [];\n  this._frameUpdated = undefined;\n  this._lastSelectionResult = TileSelectionResult.NONE;\n  this._lastSelectionResultFrame = undefined;\n  this._loadedCallbacks = {};\n\n  // Cache for storing computed position values per tile to avoid redundant calculations\n  this._positionCache = new LRUCache(MAX_CACHE_ENTRIES);\n\n  /**\n   * Gets or sets the current state of the tile in the tile load pipeline.\n   * @type {QuadtreeTileLoadState}\n   * @default {@link QuadtreeTileLoadState.START}\n   */\n  this.state = QuadtreeTileLoadState.START;\n\n  /**\n   * Gets or sets a value indicating whether or not the tile is currently renderable.\n   * @type {boolean}\n   * @default false\n   */\n  this.renderable = false;\n\n  /**\n   * Gets or set a value indicating whether or not the tile was entirely upsampled from its\n   * parent tile.  If all four children of a parent tile were upsampled from the parent,\n   * we will render the parent instead of the children even if the LOD indicates that\n   * the children would be preferable.\n   * @type {boolean}\n   * @default false\n   */\n  this.upsampledFromParent = false;\n\n  /**\n   * Gets or sets the additional data associated with this tile.  The exact content is specific to the\n   * {@link QuadtreeTileProvider}.\n   * @type {object}\n   * @default undefined\n   */\n  this.data = undefined;\n}\n\n/**\n * Creates a rectangular set of tiles for level of detail zero, the coarsest, least detailed level.\n *\n * @memberof QuadtreeTile\n *\n * @param {TilingScheme} tilingScheme The tiling scheme for which the tiles are to be created.\n * @returns {QuadtreeTile[]} An array containing the tiles at level of detail zero, starting with the\n * tile in the northwest corner and followed by the tile (if any) to its east.\n */\nQuadtreeTile.createLevelZeroTiles = function (tilingScheme) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(tilingScheme)) {\n    throw new DeveloperError(\"tilingScheme is required.\");\n  }\n  //>>includeEnd('debug');\n\n  const numberOfLevelZeroTilesX = tilingScheme.getNumberOfXTilesAtLevel(0);\n  const numberOfLevelZeroTilesY = tilingScheme.getNumberOfYTilesAtLevel(0);\n  const result = new Array(numberOfLevelZeroTilesX * numberOfLevelZeroTilesY);\n  let index = 0;\n  for (let y = 0; y < numberOfLevelZeroTilesY; ++y) {\n    for (let x = 0; x < numberOfLevelZeroTilesX; ++x) {\n      result[index++] = new QuadtreeTile({\n        tilingScheme: tilingScheme,\n        x: x,\n        y: y,\n        level: 0\n      });\n    }\n  }\n  return result;\n};\n\n/**\n * Creates a spatial hash key for the given longitude, latitude, and tile level.\n * The precision is adjusted based on the tile level and extent to achieve finer precision at higher levels.\n *\n * This function calculates the spatial hash key by first determining the precision at the given tile for the current maximum screenspace error (MAX_ERROR_PX),\n * and then rounding the longitude and latitude to that precision for consistency.\n *\n * The steps for computing the level precision are as follows:\n *\n * 1. Compute the resolution (meters per pixel) at the given level:\n *      level_resolution_m = (2 * PI * RADIUS) / (2^level * TILE_SIZE)\n *\n * 2. Compute the target precision in meters:\n *      level_precision_m = level_resolution_m * MAX_ERROR_PX\n *\n * 3. Compute the target precision to radians:\n *      level_precision_rad = level_precision_m / BODY_RADIUS\n *\n * This simplifies to:\n *      level_precision_rad = (2 * PI * MAX_ERROR_PX) / (2^level * TILE_SIZE)\n * which can also be written as:\n *      level_precision_rad = (PI * MAX_ERROR_PX) / (2^(level-1) * TILE_SIZE)\n *\n * The computed level_precision_rad is then used to round the input longitude and latitude,\n * ensuring that positions that fall within the same spatial bin produce the same hash key.\n *\n * The constants below are computed once since they are fixed for the given configuration.\n *\n * @param {number} longitude - The longitude in radians.\n * @param {number} latitude - The latitude in radians.\n * @param {Rectangle} rectangle - The quadtree tile extents.\n * @returns {string} A string representing the spatial hash key.\n */\nconst TILE_SIZE = 256;\nfunction createSpatialHashKey(longitude, latitude, rectangle, maximumScreenSpaceError) {\n  // Adjust precision based on quadtree level - higher levels get finer precision\n  const maxError = rectangle.width / TILE_SIZE * maximumScreenSpaceError;\n  // Round to the grid precision\n  const lonGrid = Math.floor(longitude / maxError) * maxError;\n  const latGrid = Math.floor(latitude / maxError) * maxError;\n  return `${lonGrid.toFixed(10)},${latGrid.toFixed(10)}`;\n}\n\n/**\n * Generates a unique cache key for a given cartographic position.\n * @memberof QuadtreeTile\n *\n * @param {Cartographic} cartographic The cartographic coordinates.\n * @param {number} maximumScreenSpaceError The maximum screen-space error, in pixels, that is allowed.\n *        A higher maximum error will render fewer tiles and improve performance, while a lower\n *        value will improve visual quality.\n * @returns {string} A string representing the spatial hash key.\n */\nQuadtreeTile.prototype._getCacheKey = function (cartographic, maximumScreenSpaceError) {\n  return createSpatialHashKey(cartographic.longitude, cartographic.latitude, this._rectangle, maximumScreenSpaceError);\n};\n\n/**\n * Retrieves a cached position for the specified cartographic position.\n *\n * @memberof QuadtreeTile\n *\n * @param {Cartographic} cartographic - The cartographic coordinates.\n * @param {number} maximumScreenSpaceError The maximum screen-space error, in pixels, that is allowed.\n *        A higher maximum error will render fewer tiles and improve performance, while a lower\n *        value will improve visual quality.\n * @returns {Object|undefined} The cached position data or undefined if not found.\n */\nQuadtreeTile.prototype.getPositionCacheEntry = function (cartographic, maximumScreenSpaceError) {\n  return this._positionCache.get(this._getCacheKey(cartographic, maximumScreenSpaceError));\n};\n\n/**\n * Sets a position on the cache for this tile.\n *\n * @memberof QuadtreeTile\n *\n * @param {Cartographic} cartographic - The cartographic coordinates.\n * @param {number} maximumScreenSpaceError The maximum screen-space error, in pixels, that is allowed.\n *        A higher maximum error will render fewer tiles and improve performance, while a lower\n *        value will improve visual quality.\n * @param {Object} value - The object to be cached.\n */\nQuadtreeTile.prototype.setPositionCacheEntry = function (cartographic, maximumScreenSpaceError, value) {\n  this._positionCache.set(this._getCacheKey(cartographic, maximumScreenSpaceError), value);\n};\n\n/**\n * Clears the position cache for this tile.\n * This function removes all cached positions that were previously stored\n * to optimize height computations.\n *\n * @memberof QuadtreeTile\n */\nQuadtreeTile.prototype.clearPositionCache = function () {\n  if (this._positionCache.size > 0) {\n    this._positionCache.clear();\n  }\n};\nQuadtreeTile.prototype._updateCustomData = function (frameNumber, added, removed) {\n  let customData = this.customData;\n  let i;\n  let data;\n  let rectangle;\n  if (defined(added) && defined(removed)) {\n    customData = customData.filter(function (value) {\n      return removed.indexOf(value) === -1;\n    });\n    this._customData = customData;\n    rectangle = this._rectangle;\n    for (i = 0; i < added.length; ++i) {\n      data = added[i];\n      if (Rectangle.contains(rectangle, data.positionCartographic)) {\n        customData.push(data);\n      }\n    }\n    this._frameUpdated = frameNumber;\n  } else {\n    // interior or leaf tile, update from parent\n    const parent = this._parent;\n    if (defined(parent) && this._frameUpdated !== parent._frameUpdated) {\n      customData.length = 0;\n      rectangle = this._rectangle;\n      const parentCustomData = parent.customData;\n      for (i = 0; i < parentCustomData.length; ++i) {\n        data = parentCustomData[i];\n        if (Rectangle.contains(rectangle, data.positionCartographic)) {\n          customData.push(data);\n        }\n      }\n      this._frameUpdated = parent._frameUpdated;\n    }\n  }\n};\nObject.defineProperties(QuadtreeTile.prototype, {\n  /**\n   * Gets the tiling scheme used to tile the surface.\n   * @memberof QuadtreeTile.prototype\n   * @type {TilingScheme}\n   */\n  tilingScheme: {\n    get: function () {\n      return this._tilingScheme;\n    }\n  },\n  /**\n   * Gets the tile X coordinate.\n   * @memberof QuadtreeTile.prototype\n   * @type {number}\n   */\n  x: {\n    get: function () {\n      return this._x;\n    }\n  },\n  /**\n   * Gets the tile Y coordinate.\n   * @memberof QuadtreeTile.prototype\n   * @type {number}\n   */\n  y: {\n    get: function () {\n      return this._y;\n    }\n  },\n  /**\n   * Gets the level-of-detail, where zero is the coarsest, least-detailed.\n   * @memberof QuadtreeTile.prototype\n   * @type {number}\n   */\n  level: {\n    get: function () {\n      return this._level;\n    }\n  },\n  /**\n   * Gets the parent tile of this tile.\n   * @memberof QuadtreeTile.prototype\n   * @type {QuadtreeTile}\n   */\n  parent: {\n    get: function () {\n      return this._parent;\n    }\n  },\n  /**\n   * Gets the cartographic rectangle of the tile, with north, south, east and\n   * west properties in radians.\n   * @memberof QuadtreeTile.prototype\n   * @type {Rectangle}\n   */\n  rectangle: {\n    get: function () {\n      return this._rectangle;\n    }\n  },\n  /**\n   * An array of tiles that is at the next level of the tile tree.\n   * @memberof QuadtreeTile.prototype\n   * @type {QuadtreeTile[]}\n   */\n  children: {\n    get: function () {\n      return [this.northwestChild, this.northeastChild, this.southwestChild, this.southeastChild];\n    }\n  },\n  /**\n   * Gets the southwest child tile.\n   * @memberof QuadtreeTile.prototype\n   * @type {QuadtreeTile}\n   */\n  southwestChild: {\n    get: function () {\n      if (!defined(this._southwestChild)) {\n        this._southwestChild = new QuadtreeTile({\n          tilingScheme: this.tilingScheme,\n          x: this.x * 2,\n          y: this.y * 2 + 1,\n          level: this.level + 1,\n          parent: this\n        });\n      }\n      return this._southwestChild;\n    }\n  },\n  /**\n   * Gets the southeast child tile.\n   * @memberof QuadtreeTile.prototype\n   * @type {QuadtreeTile}\n   */\n  southeastChild: {\n    get: function () {\n      if (!defined(this._southeastChild)) {\n        this._southeastChild = new QuadtreeTile({\n          tilingScheme: this.tilingScheme,\n          x: this.x * 2 + 1,\n          y: this.y * 2 + 1,\n          level: this.level + 1,\n          parent: this\n        });\n      }\n      return this._southeastChild;\n    }\n  },\n  /**\n   * Gets the northwest child tile.\n   * @memberof QuadtreeTile.prototype\n   * @type {QuadtreeTile}\n   */\n  northwestChild: {\n    get: function () {\n      if (!defined(this._northwestChild)) {\n        this._northwestChild = new QuadtreeTile({\n          tilingScheme: this.tilingScheme,\n          x: this.x * 2,\n          y: this.y * 2,\n          level: this.level + 1,\n          parent: this\n        });\n      }\n      return this._northwestChild;\n    }\n  },\n  /**\n   * Gets the northeast child tile.\n   * @memberof QuadtreeTile.prototype\n   * @type {QuadtreeTile}\n   */\n  northeastChild: {\n    get: function () {\n      if (!defined(this._northeastChild)) {\n        this._northeastChild = new QuadtreeTile({\n          tilingScheme: this.tilingScheme,\n          x: this.x * 2 + 1,\n          y: this.y * 2,\n          level: this.level + 1,\n          parent: this\n        });\n      }\n      return this._northeastChild;\n    }\n  },\n  /**\n   * An array of objects associated with this tile.\n   * @memberof QuadtreeTile.prototype\n   * @type {Array}\n   */\n  customData: {\n    get: function () {\n      return this._customData;\n    }\n  },\n  /**\n   * Gets a value indicating whether or not this tile needs further loading.\n   * This property will return true if the {@link QuadtreeTile#state} is\n   * <code>START</code> or <code>LOADING</code>.\n   * @memberof QuadtreeTile.prototype\n   * @type {boolean}\n   */\n  needsLoading: {\n    get: function () {\n      return this.state < QuadtreeTileLoadState.DONE;\n    }\n  },\n  /**\n   * Gets a value indicating whether or not this tile is eligible to be unloaded.\n   * Typically, a tile is ineligible to be unloaded while an asynchronous operation,\n   * such as a request for data, is in progress on it.  A tile will never be\n   * unloaded while it is needed for rendering, regardless of the value of this\n   * property.  If {@link QuadtreeTile#data} is defined and has an\n   * <code>eligibleForUnloading</code> property, the value of that property is returned.\n   * Otherwise, this property returns true.\n   * @memberof QuadtreeTile.prototype\n   * @type {boolean}\n   */\n  eligibleForUnloading: {\n    get: function () {\n      let result = true;\n      if (defined(this.data)) {\n        result = this.data.eligibleForUnloading;\n        if (!defined(result)) {\n          result = true;\n        }\n      }\n      return result;\n    }\n  }\n});\nQuadtreeTile.prototype.findLevelZeroTile = function (levelZeroTiles, x, y) {\n  const xTiles = this.tilingScheme.getNumberOfXTilesAtLevel(0);\n  if (x < 0) {\n    x += xTiles;\n  } else if (x >= xTiles) {\n    x -= xTiles;\n  }\n  if (y < 0 || y >= this.tilingScheme.getNumberOfYTilesAtLevel(0)) {\n    return undefined;\n  }\n  return levelZeroTiles.filter(function (tile) {\n    return tile.x === x && tile.y === y;\n  })[0];\n};\nQuadtreeTile.prototype.findTileToWest = function (levelZeroTiles) {\n  const parent = this.parent;\n  if (parent === undefined) {\n    return this.findLevelZeroTile(levelZeroTiles, this.x - 1, this.y);\n  }\n  if (parent.southeastChild === this) {\n    return parent.southwestChild;\n  } else if (parent.northeastChild === this) {\n    return parent.northwestChild;\n  }\n  const westOfParent = parent.findTileToWest(levelZeroTiles);\n  if (westOfParent === undefined) {\n    return undefined;\n  } else if (parent.southwestChild === this) {\n    return westOfParent.southeastChild;\n  }\n  return westOfParent.northeastChild;\n};\nQuadtreeTile.prototype.findTileToEast = function (levelZeroTiles) {\n  const parent = this.parent;\n  if (parent === undefined) {\n    return this.findLevelZeroTile(levelZeroTiles, this.x + 1, this.y);\n  }\n  if (parent.southwestChild === this) {\n    return parent.southeastChild;\n  } else if (parent.northwestChild === this) {\n    return parent.northeastChild;\n  }\n  const eastOfParent = parent.findTileToEast(levelZeroTiles);\n  if (eastOfParent === undefined) {\n    return undefined;\n  } else if (parent.southeastChild === this) {\n    return eastOfParent.southwestChild;\n  }\n  return eastOfParent.northwestChild;\n};\nQuadtreeTile.prototype.findTileToSouth = function (levelZeroTiles) {\n  const parent = this.parent;\n  if (parent === undefined) {\n    return this.findLevelZeroTile(levelZeroTiles, this.x, this.y + 1);\n  }\n  if (parent.northwestChild === this) {\n    return parent.southwestChild;\n  } else if (parent.northeastChild === this) {\n    return parent.southeastChild;\n  }\n  const southOfParent = parent.findTileToSouth(levelZeroTiles);\n  if (southOfParent === undefined) {\n    return undefined;\n  } else if (parent.southwestChild === this) {\n    return southOfParent.northwestChild;\n  }\n  return southOfParent.northeastChild;\n};\nQuadtreeTile.prototype.findTileToNorth = function (levelZeroTiles) {\n  const parent = this.parent;\n  if (parent === undefined) {\n    return this.findLevelZeroTile(levelZeroTiles, this.x, this.y - 1);\n  }\n  if (parent.southwestChild === this) {\n    return parent.northwestChild;\n  } else if (parent.southeastChild === this) {\n    return parent.northeastChild;\n  }\n  const northOfParent = parent.findTileToNorth(levelZeroTiles);\n  if (northOfParent === undefined) {\n    return undefined;\n  } else if (parent.northwestChild === this) {\n    return northOfParent.southwestChild;\n  }\n  return northOfParent.southeastChild;\n};\n\n/**\n * Frees the resources associated with this tile and returns it to the <code>START</code>\n * {@link QuadtreeTileLoadState}.  If the {@link QuadtreeTile#data} property is defined and it\n * has a <code>freeResources</code> method, the method will be invoked.\n *\n * @memberof QuadtreeTile\n */\nQuadtreeTile.prototype.freeResources = function () {\n  // Clears cached heights when the tile is freed\n  this.clearPositionCache();\n  this.state = QuadtreeTileLoadState.START;\n  this.renderable = false;\n  this.upsampledFromParent = false;\n  if (defined(this.data) && defined(this.data.freeResources)) {\n    this.data.freeResources();\n  }\n  freeTile(this._southwestChild);\n  this._southwestChild = undefined;\n  freeTile(this._southeastChild);\n  this._southeastChild = undefined;\n  freeTile(this._northwestChild);\n  this._northwestChild = undefined;\n  freeTile(this._northeastChild);\n  this._northeastChild = undefined;\n};\nfunction freeTile(tile) {\n  if (defined(tile)) {\n    tile.freeResources();\n  }\n}\nexport default QuadtreeTile;","map":{"version":3,"names":["defined","DeveloperError","Rectangle","QuadtreeTileLoadState","TileSelectionResult","LRUCache","constructor","maxSize","cache","Map","get","key","has","undefined","value","delete","set","size","firstKey","keys","next","clear","MAX_CACHE_ENTRIES","QuadtreeTile","options","x","y","level","tilingScheme","_tilingScheme","_x","_y","_level","_parent","parent","_rectangle","tileXYToRectangle","_southwestChild","_southeastChild","_northwestChild","_northeastChild","replacementPrevious","replacementNext","_distance","_loadPriority","_customData","_frameUpdated","_lastSelectionResult","NONE","_lastSelectionResultFrame","_loadedCallbacks","_positionCache","state","START","renderable","upsampledFromParent","data","createLevelZeroTiles","numberOfLevelZeroTilesX","getNumberOfXTilesAtLevel","numberOfLevelZeroTilesY","getNumberOfYTilesAtLevel","result","Array","index","TILE_SIZE","createSpatialHashKey","longitude","latitude","rectangle","maximumScreenSpaceError","maxError","width","lonGrid","Math","floor","latGrid","toFixed","prototype","_getCacheKey","cartographic","getPositionCacheEntry","setPositionCacheEntry","clearPositionCache","_updateCustomData","frameNumber","added","removed","customData","i","filter","indexOf","length","contains","positionCartographic","push","parentCustomData","Object","defineProperties","children","northwestChild","northeastChild","southwestChild","southeastChild","needsLoading","DONE","eligibleForUnloading","findLevelZeroTile","levelZeroTiles","xTiles","tile","findTileToWest","westOfParent","findTileToEast","eastOfParent","findTileToSouth","southOfParent","findTileToNorth","northOfParent","freeResources","freeTile"],"sources":["D:/projects/FlightHub-2-Frontend-Standalone-Component/frontend/node_modules/@cesium/engine/Source/Scene/QuadtreeTile.js"],"sourcesContent":["import defined from \"../Core/defined.js\";\nimport DeveloperError from \"../Core/DeveloperError.js\";\nimport Rectangle from \"../Core/Rectangle.js\";\nimport QuadtreeTileLoadState from \"./QuadtreeTileLoadState.js\";\nimport TileSelectionResult from \"./TileSelectionResult.js\";\n\n/**\n * A simple Least Recently Used (LRU) cache implementation.\n */\nclass LRUCache {\n  constructor(maxSize) {\n    this.maxSize = maxSize;\n    this.cache = new Map();\n  }\n\n  get(key) {\n    if (!this.cache.has(key)) {\n      return undefined;\n    }\n    // Move accessed item to the end (most recently used)\n    const value = this.cache.get(key);\n    this.cache.delete(key);\n    this.cache.set(key, value);\n    return value;\n  }\n\n  set(key, value) {\n    if (this.cache.has(key)) {\n      this.cache.delete(key);\n    } else if (this.cache.size >= this.maxSize) {\n      // Remove the least recently used (first entry)\n      const firstKey = this.cache.keys().next().value;\n      this.cache.delete(firstKey);\n    }\n    this.cache.set(key, value);\n  }\n\n  clear() {\n    this.cache.clear();\n  }\n}\n\n// Maximum cache entries per tile\nconst MAX_CACHE_ENTRIES = 1000;\n\n/**\n * A single tile in a {@link QuadtreePrimitive}.\n *\n * @alias QuadtreeTile\n * @constructor\n * @private\n *\n * @param {number} options.level The level of the tile in the quadtree.\n * @param {number} options.x The X coordinate of the tile in the quadtree.  0 is the westernmost tile.\n * @param {number} options.y The Y coordinate of the tile in the quadtree.  0 is the northernmost tile.\n * @param {TilingScheme} options.tilingScheme The tiling scheme in which this tile exists.\n * @param {QuadtreeTile} [options.parent] This tile's parent, or undefined if this is a root tile.\n */\nfunction QuadtreeTile(options) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(options)) {\n    throw new DeveloperError(\"options is required.\");\n  }\n  if (!defined(options.x)) {\n    throw new DeveloperError(\"options.x is required.\");\n  } else if (!defined(options.y)) {\n    throw new DeveloperError(\"options.y is required.\");\n  } else if (options.x < 0 || options.y < 0) {\n    throw new DeveloperError(\n      \"options.x and options.y must be greater than or equal to zero.\",\n    );\n  }\n  if (!defined(options.level)) {\n    throw new DeveloperError(\n      \"options.level is required and must be greater than or equal to zero.\",\n    );\n  }\n  if (!defined(options.tilingScheme)) {\n    throw new DeveloperError(\"options.tilingScheme is required.\");\n  }\n  //>>includeEnd('debug');\n\n  this._tilingScheme = options.tilingScheme;\n  this._x = options.x;\n  this._y = options.y;\n  this._level = options.level;\n  this._parent = options.parent;\n  this._rectangle = this._tilingScheme.tileXYToRectangle(\n    this._x,\n    this._y,\n    this._level,\n  );\n\n  this._southwestChild = undefined;\n  this._southeastChild = undefined;\n  this._northwestChild = undefined;\n  this._northeastChild = undefined;\n\n  // TileReplacementQueue gets/sets these private properties.\n  this.replacementPrevious = undefined;\n  this.replacementNext = undefined;\n\n  // The distance from the camera to this tile, updated when the tile is selected\n  // for rendering.  We can get rid of this if we have a better way to sort by\n  // distance - for example, by using the natural ordering of a quadtree.\n  // QuadtreePrimitive gets/sets this private property.\n  this._distance = 0.0;\n  this._loadPriority = 0.0;\n\n  this._customData = [];\n  this._frameUpdated = undefined;\n  this._lastSelectionResult = TileSelectionResult.NONE;\n  this._lastSelectionResultFrame = undefined;\n  this._loadedCallbacks = {};\n\n  // Cache for storing computed position values per tile to avoid redundant calculations\n  this._positionCache = new LRUCache(MAX_CACHE_ENTRIES);\n\n  /**\n   * Gets or sets the current state of the tile in the tile load pipeline.\n   * @type {QuadtreeTileLoadState}\n   * @default {@link QuadtreeTileLoadState.START}\n   */\n  this.state = QuadtreeTileLoadState.START;\n\n  /**\n   * Gets or sets a value indicating whether or not the tile is currently renderable.\n   * @type {boolean}\n   * @default false\n   */\n  this.renderable = false;\n\n  /**\n   * Gets or set a value indicating whether or not the tile was entirely upsampled from its\n   * parent tile.  If all four children of a parent tile were upsampled from the parent,\n   * we will render the parent instead of the children even if the LOD indicates that\n   * the children would be preferable.\n   * @type {boolean}\n   * @default false\n   */\n  this.upsampledFromParent = false;\n\n  /**\n   * Gets or sets the additional data associated with this tile.  The exact content is specific to the\n   * {@link QuadtreeTileProvider}.\n   * @type {object}\n   * @default undefined\n   */\n  this.data = undefined;\n}\n\n/**\n * Creates a rectangular set of tiles for level of detail zero, the coarsest, least detailed level.\n *\n * @memberof QuadtreeTile\n *\n * @param {TilingScheme} tilingScheme The tiling scheme for which the tiles are to be created.\n * @returns {QuadtreeTile[]} An array containing the tiles at level of detail zero, starting with the\n * tile in the northwest corner and followed by the tile (if any) to its east.\n */\nQuadtreeTile.createLevelZeroTiles = function (tilingScheme) {\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(tilingScheme)) {\n    throw new DeveloperError(\"tilingScheme is required.\");\n  }\n  //>>includeEnd('debug');\n\n  const numberOfLevelZeroTilesX = tilingScheme.getNumberOfXTilesAtLevel(0);\n  const numberOfLevelZeroTilesY = tilingScheme.getNumberOfYTilesAtLevel(0);\n\n  const result = new Array(numberOfLevelZeroTilesX * numberOfLevelZeroTilesY);\n\n  let index = 0;\n  for (let y = 0; y < numberOfLevelZeroTilesY; ++y) {\n    for (let x = 0; x < numberOfLevelZeroTilesX; ++x) {\n      result[index++] = new QuadtreeTile({\n        tilingScheme: tilingScheme,\n        x: x,\n        y: y,\n        level: 0,\n      });\n    }\n  }\n\n  return result;\n};\n\n/**\n * Creates a spatial hash key for the given longitude, latitude, and tile level.\n * The precision is adjusted based on the tile level and extent to achieve finer precision at higher levels.\n *\n * This function calculates the spatial hash key by first determining the precision at the given tile for the current maximum screenspace error (MAX_ERROR_PX),\n * and then rounding the longitude and latitude to that precision for consistency.\n *\n * The steps for computing the level precision are as follows:\n *\n * 1. Compute the resolution (meters per pixel) at the given level:\n *      level_resolution_m = (2 * PI * RADIUS) / (2^level * TILE_SIZE)\n *\n * 2. Compute the target precision in meters:\n *      level_precision_m = level_resolution_m * MAX_ERROR_PX\n *\n * 3. Compute the target precision to radians:\n *      level_precision_rad = level_precision_m / BODY_RADIUS\n *\n * This simplifies to:\n *      level_precision_rad = (2 * PI * MAX_ERROR_PX) / (2^level * TILE_SIZE)\n * which can also be written as:\n *      level_precision_rad = (PI * MAX_ERROR_PX) / (2^(level-1) * TILE_SIZE)\n *\n * The computed level_precision_rad is then used to round the input longitude and latitude,\n * ensuring that positions that fall within the same spatial bin produce the same hash key.\n *\n * The constants below are computed once since they are fixed for the given configuration.\n *\n * @param {number} longitude - The longitude in radians.\n * @param {number} latitude - The latitude in radians.\n * @param {Rectangle} rectangle - The quadtree tile extents.\n * @returns {string} A string representing the spatial hash key.\n */\nconst TILE_SIZE = 256;\n\nfunction createSpatialHashKey(\n  longitude,\n  latitude,\n  rectangle,\n  maximumScreenSpaceError,\n) {\n  // Adjust precision based on quadtree level - higher levels get finer precision\n  const maxError = (rectangle.width / TILE_SIZE) * maximumScreenSpaceError;\n  // Round to the grid precision\n  const lonGrid = Math.floor(longitude / maxError) * maxError;\n  const latGrid = Math.floor(latitude / maxError) * maxError;\n  return `${lonGrid.toFixed(10)},${latGrid.toFixed(10)}`;\n}\n\n/**\n * Generates a unique cache key for a given cartographic position.\n * @memberof QuadtreeTile\n *\n * @param {Cartographic} cartographic The cartographic coordinates.\n * @param {number} maximumScreenSpaceError The maximum screen-space error, in pixels, that is allowed.\n *        A higher maximum error will render fewer tiles and improve performance, while a lower\n *        value will improve visual quality.\n * @returns {string} A string representing the spatial hash key.\n */\nQuadtreeTile.prototype._getCacheKey = function (\n  cartographic,\n  maximumScreenSpaceError,\n) {\n  return createSpatialHashKey(\n    cartographic.longitude,\n    cartographic.latitude,\n    this._rectangle,\n    maximumScreenSpaceError,\n  );\n};\n\n/**\n * Retrieves a cached position for the specified cartographic position.\n *\n * @memberof QuadtreeTile\n *\n * @param {Cartographic} cartographic - The cartographic coordinates.\n * @param {number} maximumScreenSpaceError The maximum screen-space error, in pixels, that is allowed.\n *        A higher maximum error will render fewer tiles and improve performance, while a lower\n *        value will improve visual quality.\n * @returns {Object|undefined} The cached position data or undefined if not found.\n */\nQuadtreeTile.prototype.getPositionCacheEntry = function (\n  cartographic,\n  maximumScreenSpaceError,\n) {\n  return this._positionCache.get(\n    this._getCacheKey(cartographic, maximumScreenSpaceError),\n  );\n};\n\n/**\n * Sets a position on the cache for this tile.\n *\n * @memberof QuadtreeTile\n *\n * @param {Cartographic} cartographic - The cartographic coordinates.\n * @param {number} maximumScreenSpaceError The maximum screen-space error, in pixels, that is allowed.\n *        A higher maximum error will render fewer tiles and improve performance, while a lower\n *        value will improve visual quality.\n * @param {Object} value - The object to be cached.\n */\nQuadtreeTile.prototype.setPositionCacheEntry = function (\n  cartographic,\n  maximumScreenSpaceError,\n  value,\n) {\n  this._positionCache.set(\n    this._getCacheKey(cartographic, maximumScreenSpaceError),\n    value,\n  );\n};\n\n/**\n * Clears the position cache for this tile.\n * This function removes all cached positions that were previously stored\n * to optimize height computations.\n *\n * @memberof QuadtreeTile\n */\nQuadtreeTile.prototype.clearPositionCache = function () {\n  if (this._positionCache.size > 0) {\n    this._positionCache.clear();\n  }\n};\n\nQuadtreeTile.prototype._updateCustomData = function (\n  frameNumber,\n  added,\n  removed,\n) {\n  let customData = this.customData;\n\n  let i;\n  let data;\n  let rectangle;\n\n  if (defined(added) && defined(removed)) {\n    customData = customData.filter(function (value) {\n      return removed.indexOf(value) === -1;\n    });\n    this._customData = customData;\n\n    rectangle = this._rectangle;\n    for (i = 0; i < added.length; ++i) {\n      data = added[i];\n      if (Rectangle.contains(rectangle, data.positionCartographic)) {\n        customData.push(data);\n      }\n    }\n\n    this._frameUpdated = frameNumber;\n  } else {\n    // interior or leaf tile, update from parent\n    const parent = this._parent;\n    if (defined(parent) && this._frameUpdated !== parent._frameUpdated) {\n      customData.length = 0;\n\n      rectangle = this._rectangle;\n      const parentCustomData = parent.customData;\n      for (i = 0; i < parentCustomData.length; ++i) {\n        data = parentCustomData[i];\n        if (Rectangle.contains(rectangle, data.positionCartographic)) {\n          customData.push(data);\n        }\n      }\n\n      this._frameUpdated = parent._frameUpdated;\n    }\n  }\n};\n\nObject.defineProperties(QuadtreeTile.prototype, {\n  /**\n   * Gets the tiling scheme used to tile the surface.\n   * @memberof QuadtreeTile.prototype\n   * @type {TilingScheme}\n   */\n  tilingScheme: {\n    get: function () {\n      return this._tilingScheme;\n    },\n  },\n\n  /**\n   * Gets the tile X coordinate.\n   * @memberof QuadtreeTile.prototype\n   * @type {number}\n   */\n  x: {\n    get: function () {\n      return this._x;\n    },\n  },\n\n  /**\n   * Gets the tile Y coordinate.\n   * @memberof QuadtreeTile.prototype\n   * @type {number}\n   */\n  y: {\n    get: function () {\n      return this._y;\n    },\n  },\n\n  /**\n   * Gets the level-of-detail, where zero is the coarsest, least-detailed.\n   * @memberof QuadtreeTile.prototype\n   * @type {number}\n   */\n  level: {\n    get: function () {\n      return this._level;\n    },\n  },\n\n  /**\n   * Gets the parent tile of this tile.\n   * @memberof QuadtreeTile.prototype\n   * @type {QuadtreeTile}\n   */\n  parent: {\n    get: function () {\n      return this._parent;\n    },\n  },\n\n  /**\n   * Gets the cartographic rectangle of the tile, with north, south, east and\n   * west properties in radians.\n   * @memberof QuadtreeTile.prototype\n   * @type {Rectangle}\n   */\n  rectangle: {\n    get: function () {\n      return this._rectangle;\n    },\n  },\n\n  /**\n   * An array of tiles that is at the next level of the tile tree.\n   * @memberof QuadtreeTile.prototype\n   * @type {QuadtreeTile[]}\n   */\n  children: {\n    get: function () {\n      return [\n        this.northwestChild,\n        this.northeastChild,\n        this.southwestChild,\n        this.southeastChild,\n      ];\n    },\n  },\n\n  /**\n   * Gets the southwest child tile.\n   * @memberof QuadtreeTile.prototype\n   * @type {QuadtreeTile}\n   */\n  southwestChild: {\n    get: function () {\n      if (!defined(this._southwestChild)) {\n        this._southwestChild = new QuadtreeTile({\n          tilingScheme: this.tilingScheme,\n          x: this.x * 2,\n          y: this.y * 2 + 1,\n          level: this.level + 1,\n          parent: this,\n        });\n      }\n      return this._southwestChild;\n    },\n  },\n\n  /**\n   * Gets the southeast child tile.\n   * @memberof QuadtreeTile.prototype\n   * @type {QuadtreeTile}\n   */\n  southeastChild: {\n    get: function () {\n      if (!defined(this._southeastChild)) {\n        this._southeastChild = new QuadtreeTile({\n          tilingScheme: this.tilingScheme,\n          x: this.x * 2 + 1,\n          y: this.y * 2 + 1,\n          level: this.level + 1,\n          parent: this,\n        });\n      }\n      return this._southeastChild;\n    },\n  },\n\n  /**\n   * Gets the northwest child tile.\n   * @memberof QuadtreeTile.prototype\n   * @type {QuadtreeTile}\n   */\n  northwestChild: {\n    get: function () {\n      if (!defined(this._northwestChild)) {\n        this._northwestChild = new QuadtreeTile({\n          tilingScheme: this.tilingScheme,\n          x: this.x * 2,\n          y: this.y * 2,\n          level: this.level + 1,\n          parent: this,\n        });\n      }\n      return this._northwestChild;\n    },\n  },\n\n  /**\n   * Gets the northeast child tile.\n   * @memberof QuadtreeTile.prototype\n   * @type {QuadtreeTile}\n   */\n  northeastChild: {\n    get: function () {\n      if (!defined(this._northeastChild)) {\n        this._northeastChild = new QuadtreeTile({\n          tilingScheme: this.tilingScheme,\n          x: this.x * 2 + 1,\n          y: this.y * 2,\n          level: this.level + 1,\n          parent: this,\n        });\n      }\n      return this._northeastChild;\n    },\n  },\n\n  /**\n   * An array of objects associated with this tile.\n   * @memberof QuadtreeTile.prototype\n   * @type {Array}\n   */\n  customData: {\n    get: function () {\n      return this._customData;\n    },\n  },\n\n  /**\n   * Gets a value indicating whether or not this tile needs further loading.\n   * This property will return true if the {@link QuadtreeTile#state} is\n   * <code>START</code> or <code>LOADING</code>.\n   * @memberof QuadtreeTile.prototype\n   * @type {boolean}\n   */\n  needsLoading: {\n    get: function () {\n      return this.state < QuadtreeTileLoadState.DONE;\n    },\n  },\n\n  /**\n   * Gets a value indicating whether or not this tile is eligible to be unloaded.\n   * Typically, a tile is ineligible to be unloaded while an asynchronous operation,\n   * such as a request for data, is in progress on it.  A tile will never be\n   * unloaded while it is needed for rendering, regardless of the value of this\n   * property.  If {@link QuadtreeTile#data} is defined and has an\n   * <code>eligibleForUnloading</code> property, the value of that property is returned.\n   * Otherwise, this property returns true.\n   * @memberof QuadtreeTile.prototype\n   * @type {boolean}\n   */\n  eligibleForUnloading: {\n    get: function () {\n      let result = true;\n\n      if (defined(this.data)) {\n        result = this.data.eligibleForUnloading;\n        if (!defined(result)) {\n          result = true;\n        }\n      }\n\n      return result;\n    },\n  },\n});\n\nQuadtreeTile.prototype.findLevelZeroTile = function (levelZeroTiles, x, y) {\n  const xTiles = this.tilingScheme.getNumberOfXTilesAtLevel(0);\n  if (x < 0) {\n    x += xTiles;\n  } else if (x >= xTiles) {\n    x -= xTiles;\n  }\n\n  if (y < 0 || y >= this.tilingScheme.getNumberOfYTilesAtLevel(0)) {\n    return undefined;\n  }\n\n  return levelZeroTiles.filter(function (tile) {\n    return tile.x === x && tile.y === y;\n  })[0];\n};\n\nQuadtreeTile.prototype.findTileToWest = function (levelZeroTiles) {\n  const parent = this.parent;\n  if (parent === undefined) {\n    return this.findLevelZeroTile(levelZeroTiles, this.x - 1, this.y);\n  }\n\n  if (parent.southeastChild === this) {\n    return parent.southwestChild;\n  } else if (parent.northeastChild === this) {\n    return parent.northwestChild;\n  }\n\n  const westOfParent = parent.findTileToWest(levelZeroTiles);\n  if (westOfParent === undefined) {\n    return undefined;\n  } else if (parent.southwestChild === this) {\n    return westOfParent.southeastChild;\n  }\n  return westOfParent.northeastChild;\n};\n\nQuadtreeTile.prototype.findTileToEast = function (levelZeroTiles) {\n  const parent = this.parent;\n  if (parent === undefined) {\n    return this.findLevelZeroTile(levelZeroTiles, this.x + 1, this.y);\n  }\n\n  if (parent.southwestChild === this) {\n    return parent.southeastChild;\n  } else if (parent.northwestChild === this) {\n    return parent.northeastChild;\n  }\n\n  const eastOfParent = parent.findTileToEast(levelZeroTiles);\n  if (eastOfParent === undefined) {\n    return undefined;\n  } else if (parent.southeastChild === this) {\n    return eastOfParent.southwestChild;\n  }\n  return eastOfParent.northwestChild;\n};\n\nQuadtreeTile.prototype.findTileToSouth = function (levelZeroTiles) {\n  const parent = this.parent;\n  if (parent === undefined) {\n    return this.findLevelZeroTile(levelZeroTiles, this.x, this.y + 1);\n  }\n\n  if (parent.northwestChild === this) {\n    return parent.southwestChild;\n  } else if (parent.northeastChild === this) {\n    return parent.southeastChild;\n  }\n\n  const southOfParent = parent.findTileToSouth(levelZeroTiles);\n  if (southOfParent === undefined) {\n    return undefined;\n  } else if (parent.southwestChild === this) {\n    return southOfParent.northwestChild;\n  }\n  return southOfParent.northeastChild;\n};\n\nQuadtreeTile.prototype.findTileToNorth = function (levelZeroTiles) {\n  const parent = this.parent;\n  if (parent === undefined) {\n    return this.findLevelZeroTile(levelZeroTiles, this.x, this.y - 1);\n  }\n\n  if (parent.southwestChild === this) {\n    return parent.northwestChild;\n  } else if (parent.southeastChild === this) {\n    return parent.northeastChild;\n  }\n\n  const northOfParent = parent.findTileToNorth(levelZeroTiles);\n  if (northOfParent === undefined) {\n    return undefined;\n  } else if (parent.northwestChild === this) {\n    return northOfParent.southwestChild;\n  }\n  return northOfParent.southeastChild;\n};\n\n/**\n * Frees the resources associated with this tile and returns it to the <code>START</code>\n * {@link QuadtreeTileLoadState}.  If the {@link QuadtreeTile#data} property is defined and it\n * has a <code>freeResources</code> method, the method will be invoked.\n *\n * @memberof QuadtreeTile\n */\nQuadtreeTile.prototype.freeResources = function () {\n  // Clears cached heights when the tile is freed\n  this.clearPositionCache();\n  this.state = QuadtreeTileLoadState.START;\n  this.renderable = false;\n  this.upsampledFromParent = false;\n\n  if (defined(this.data) && defined(this.data.freeResources)) {\n    this.data.freeResources();\n  }\n\n  freeTile(this._southwestChild);\n  this._southwestChild = undefined;\n  freeTile(this._southeastChild);\n  this._southeastChild = undefined;\n  freeTile(this._northwestChild);\n  this._northwestChild = undefined;\n  freeTile(this._northeastChild);\n  this._northeastChild = undefined;\n};\n\nfunction freeTile(tile) {\n  if (defined(tile)) {\n    tile.freeResources();\n  }\n}\nexport default QuadtreeTile;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}