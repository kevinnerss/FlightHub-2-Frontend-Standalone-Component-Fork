{"ast":null,"code":"export default {\n  name: 'DjiSpaceComponent',\n  props: {\n    componentName: {\n      type: String,\n      required: true\n    },\n    componentProps: {\n      type: Object,\n      default: () => ({})\n    },\n    config: {\n      type: Object,\n      required: true\n    }\n  },\n  data() {\n    return {\n      loading: false,\n      error: null,\n      loaded: false\n    };\n  },\n  mounted() {\n    this.initComponent();\n  },\n  beforeUnmount() {\n    // 清理组件\n    if (this.loaded && window.FH2 && this.$refs.container) {\n      this.$refs.container.innerHTML = '';\n    }\n  },\n  methods: {\n    async initComponent() {\n      this.loading = true;\n      this.error = null;\n      try {\n        // 检查FH2是否存在\n        if (!window.FH2) {\n          throw new Error('FH2未正确加载，请检查paas.js是否正确引入');\n        }\n\n        // 初始化配置\n        if (this.config) {\n          window.FH2.initConfig(this.config);\n        }\n\n        // 等待DOM更新\n        await this.$nextTick();\n\n        // 检查容器引用是否存在\n        if (!this.$refs.container) {\n          throw new Error('容器元素不存在');\n        }\n\n        // 生成唯一的容器ID\n        const containerId = `dji-component-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n        this.$refs.container.id = containerId;\n\n        // 检查容器元素是否存在\n        if (!document.getElementById(containerId)) {\n          throw new Error('容器元素未正确创建');\n        }\n\n        // 根据组件名称加载对应组件\n        switch (this.componentName) {\n          case 'project':\n            window.FH2.loadProject(containerId);\n            break;\n          case 'cockpit':\n            window.FH2.loadCockpit(containerId, this.componentProps);\n            break;\n          case 'wayline':\n            window.FH2.loadWayline(containerId, this.componentProps);\n            break;\n          case 'waylineCreation':\n            window.FH2.loadWaylineCreation(containerId);\n            break;\n          default:\n            throw new Error(`不支持的组件名称: ${this.componentName}`);\n        }\n        this.loaded = true;\n      } catch (err) {\n        this.error = err.message;\n        console.error('组件加载失败:', err);\n      } finally {\n        this.loading = false;\n      }\n    }\n  }\n};","map":{"version":3,"names":["name","props","componentName","type","String","required","componentProps","Object","default","config","data","loading","error","loaded","mounted","initComponent","beforeUnmount","window","FH2","$refs","container","innerHTML","methods","Error","initConfig","$nextTick","containerId","Date","now","Math","random","toString","substr","id","document","getElementById","loadProject","loadCockpit","loadWayline","loadWaylineCreation","err","message","console"],"sources":["D:\\projects\\FlightHub-2-Frontend-Standalone-Component\\frontend\\src\\djispace-components\\DjiSpaceComponent.vue"],"sourcesContent":["<template>\r\n  <div ref=\"container\" class=\"dji-space-component-container\">\r\n    <div v-if=\"loading\" class=\"loading-placeholder\">\r\n      <p>组件加载中...</p>\r\n    </div>\r\n    <div v-if=\"error\" class=\"error-placeholder\">\r\n      <p>组件加载失败: {{ error }}</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'DjiSpaceComponent',\r\n  props: {\r\n    componentName: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    componentProps: {\r\n      type: Object,\r\n      default: () => ({})\r\n    },\r\n    config: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      error: null,\r\n      loaded: false\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initComponent()\r\n  },\r\n  beforeUnmount() {\r\n    // 清理组件\r\n    if (this.loaded && window.FH2 && this.$refs.container) {\r\n      this.$refs.container.innerHTML = ''\r\n    }\r\n  },\r\n  methods: {\r\n    async initComponent() {\r\n      this.loading = true\r\n      this.error = null\r\n      \r\n      try {\r\n        // 检查FH2是否存在\r\n        if (!window.FH2) {\r\n          throw new Error('FH2未正确加载，请检查paas.js是否正确引入')\r\n        }\r\n        \r\n        // 初始化配置\r\n        if (this.config) {\r\n          window.FH2.initConfig(this.config)\r\n        }\r\n        \r\n        // 等待DOM更新\r\n        await this.$nextTick()\r\n        \r\n        // 检查容器引用是否存在\r\n        if (!this.$refs.container) {\r\n          throw new Error('容器元素不存在')\r\n        }\r\n        \r\n        // 生成唯一的容器ID\r\n        const containerId = `dji-component-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\r\n        this.$refs.container.id = containerId\r\n        \r\n        // 检查容器元素是否存在\r\n        if (!document.getElementById(containerId)) {\r\n          throw new Error('容器元素未正确创建')\r\n        }\r\n        \r\n        // 根据组件名称加载对应组件\r\n        switch (this.componentName) {\r\n          case 'project':\r\n            window.FH2.loadProject(containerId)\r\n            break\r\n          case 'cockpit':\r\n            window.FH2.loadCockpit(containerId, this.componentProps)\r\n            break\r\n          case 'wayline':\r\n            window.FH2.loadWayline(containerId, this.componentProps)\r\n            break\r\n          case 'waylineCreation':\r\n            window.FH2.loadWaylineCreation(containerId)\r\n            break\r\n          default:\r\n            throw new Error(`不支持的组件名称: ${this.componentName}`)\r\n        }\r\n        \r\n        this.loaded = true\r\n      } catch (err) {\r\n        this.error = err.message\r\n        console.error('组件加载失败:', err)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.dji-space-component-container {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: relative;\r\n}\r\n\r\n.loading-placeholder,\r\n.error-placeholder {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n\r\n.loading-placeholder p,\r\n.error-placeholder p {\r\n  font-size: 16px;\r\n  color: #666;\r\n}\r\n</style>"],"mappings":"AAYA,eAAe;EACbA,IAAI,EAAE,mBAAmB;EACzBC,KAAK,EAAE;IACLC,aAAa,EAAE;MACbC,IAAI,EAAEC,MAAM;MACZC,QAAQ,EAAE;IACZ,CAAC;IACDC,cAAc,EAAE;MACdH,IAAI,EAAEI,MAAM;MACZC,OAAO,EAAEA,CAAA,MAAO,CAAC,CAAC;IACpB,CAAC;IACDC,MAAM,EAAE;MACNN,IAAI,EAAEI,MAAM;MACZF,QAAQ,EAAE;IACZ;EACF,CAAC;EACDK,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,OAAO,EAAE,KAAK;MACdC,KAAK,EAAE,IAAI;MACXC,MAAM,EAAE;IACV;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,aAAa,CAAC;EACrB,CAAC;EACDC,aAAaA,CAAA,EAAG;IACd;IACA,IAAI,IAAI,CAACH,MAAK,IAAKI,MAAM,CAACC,GAAE,IAAK,IAAI,CAACC,KAAK,CAACC,SAAS,EAAE;MACrD,IAAI,CAACD,KAAK,CAACC,SAAS,CAACC,SAAQ,GAAI,EAAC;IACpC;EACF,CAAC;EACDC,OAAO,EAAE;IACP,MAAMP,aAAaA,CAAA,EAAG;MACpB,IAAI,CAACJ,OAAM,GAAI,IAAG;MAClB,IAAI,CAACC,KAAI,GAAI,IAAG;MAEhB,IAAI;QACF;QACA,IAAI,CAACK,MAAM,CAACC,GAAG,EAAE;UACf,MAAM,IAAIK,KAAK,CAAC,2BAA2B;QAC7C;;QAEA;QACA,IAAI,IAAI,CAACd,MAAM,EAAE;UACfQ,MAAM,CAACC,GAAG,CAACM,UAAU,CAAC,IAAI,CAACf,MAAM;QACnC;;QAEA;QACA,MAAM,IAAI,CAACgB,SAAS,CAAC;;QAErB;QACA,IAAI,CAAC,IAAI,CAACN,KAAK,CAACC,SAAS,EAAE;UACzB,MAAM,IAAIG,KAAK,CAAC,SAAS;QAC3B;;QAEA;QACA,MAAMG,WAAU,GAAI,iBAAiBC,IAAI,CAACC,GAAG,CAAC,CAAC,IAAIC,IAAI,CAACC,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC,CAACC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,EAAC;QAC3F,IAAI,CAACb,KAAK,CAACC,SAAS,CAACa,EAAC,GAAIP,WAAU;;QAEpC;QACA,IAAI,CAACQ,QAAQ,CAACC,cAAc,CAACT,WAAW,CAAC,EAAE;UACzC,MAAM,IAAIH,KAAK,CAAC,WAAW;QAC7B;;QAEA;QACA,QAAQ,IAAI,CAACrB,aAAa;UACxB,KAAK,SAAS;YACZe,MAAM,CAACC,GAAG,CAACkB,WAAW,CAACV,WAAW;YAClC;UACF,KAAK,SAAS;YACZT,MAAM,CAACC,GAAG,CAACmB,WAAW,CAACX,WAAW,EAAE,IAAI,CAACpB,cAAc;YACvD;UACF,KAAK,SAAS;YACZW,MAAM,CAACC,GAAG,CAACoB,WAAW,CAACZ,WAAW,EAAE,IAAI,CAACpB,cAAc;YACvD;UACF,KAAK,iBAAiB;YACpBW,MAAM,CAACC,GAAG,CAACqB,mBAAmB,CAACb,WAAW;YAC1C;UACF;YACE,MAAM,IAAIH,KAAK,CAAC,aAAa,IAAI,CAACrB,aAAa,EAAE;QACrD;QAEA,IAAI,CAACW,MAAK,GAAI,IAAG;MACnB,EAAE,OAAO2B,GAAG,EAAE;QACZ,IAAI,CAAC5B,KAAI,GAAI4B,GAAG,CAACC,OAAM;QACvBC,OAAO,CAAC9B,KAAK,CAAC,SAAS,EAAE4B,GAAG;MAC9B,UAAU;QACR,IAAI,CAAC7B,OAAM,GAAI,KAAI;MACrB;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}