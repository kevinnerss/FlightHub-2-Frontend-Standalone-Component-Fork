# 后端项目启动说明

本文档详细说明了如何启动 FlightHub 2 项目的后端服务。

## 项目技术栈

- Python 3.13.9
- Django 框架
- Django REST Framework
- SQLite 数据库

## 环境准备

### 1. Python 环境

确保系统已安装 Python 3.13.9 版本。可通过以下命令检查：

```bash
python --version
```

### 2. 虚拟环境（可选但推荐）

项目根目录已包含虚拟环境 [venv](file:///D:/projects/FlightHub-2-Frontend-Standalone-Component/venv)，可直接激活使用：

```bash
# Windows 系统
venv\Scripts\activate
```

如需重新创建虚拟环境：

```bash
python -m venv venv
```

### 3. 安装依赖

进入后端项目目录并安装所需依赖：

```bash
cd dji_command_root
pip install -r requirements.txt
```

此外，还需要安装两个额外的依赖包：

```bash
pip install django-filter django-cors-headers
```

## 启动步骤

### 1. 进入后端项目目录

```bash
cd dji_command_root
```

### 2. 数据库迁移（首次运行或模型变更后）

```bash
python manage.py migrate
```

### 3. 启动开发服务器

```bash
python manage.py runserver 8000
```

默认情况下，服务器将在 `http://127.0.0.1:8000/` 上运行。

根据项目配置，也可使用以下命令监听所有网络接口：

```bash
python manage.py runserver 0.0.0.0:8001
```

此时可通过 `http://<your-ip>:8001/` 访问后端服务。

## 常见问题

### 1. 依赖冲突

如果遇到依赖版本冲突，请尝试：

```bash
pip install --force-reinstall -r requirements.txt
pip install --force-reinstall django-filter django-cors-headers
```

### 2. 数据库问题

如果遇到数据库相关错误，可尝试删除 db.sqlite3 文件并重新运行迁移命令：

```bash
# 删除旧数据库（注意：这会丢失所有数据）
del db.sqlite3

# 重新创建数据库
python manage.py migrate
```

## API 测试

启动服务器后，可通过浏览器访问 `http://127.0.0.1:8000/` 查看 Django 默认页面，确认服务正常运行。

也可通过 Postman 或 curl 工具测试具体的 API 接口。